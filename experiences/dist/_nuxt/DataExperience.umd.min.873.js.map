{"version":3,"file":"DataExperience.umd.min.873.js","mappings":"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","sources":["webpack://DataExperience/./src/components/chart/view/ChartViewTimeSeries.vue?1410","webpack://DataExperience/src/components/chart/view/ChartViewTimeSeries.vue","webpack://DataExperience/./src/components/chart/view/ChartViewTimeSeries.vue?c550","webpack://DataExperience/./src/components/chart/view/ChartViewTimeSeries.vue","webpack://DataExperience/./src/components/chart/view/ChartViewVRowWebShare.vue?f831","webpack://DataExperience/src/components/chart/view/ChartViewVRowWebShare.vue","webpack://DataExperience/./src/components/chart/view/ChartViewVRowWebShare.vue?2101","webpack://DataExperience/./src/components/chart/view/ChartViewVRowWebShare.vue","webpack://DataExperience/./node_modules/d3-collection/src/map.js","webpack://DataExperience/./node_modules/d3-collection/src/nest.js","webpack://DataExperience/./node_modules/d3-collection/src/set.js","webpack://DataExperience/./node_modules/d3-collection/src/keys.js","webpack://DataExperience/./src/components/chart/view/utils/d3-helpers.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('VRow',[_c('VCol',{attrs:{\"cols\":\"12\",\"md\":\"8\",\"offset-md\":\"2\"}},[_c('VRow',{attrs:{\"dense\":\"\"}},[_c('VCol',{attrs:{\"cols\":\"9\"}},[_c('p',{staticClass:\"text-h6\"},[_vm._v(\" \"+_vm._s(_vm.title)+\" \")])]),_c('VSpacer'),_c('VCol',{staticClass:\"text-right\",attrs:{\"cols\":\"3\"}},[(_vm.filters.length === 0)?_c('VSelect',{attrs:{\"items\":_vm.namesInterval,\"label\":_vm.$t('Time interval'),\"dense\":\"\"},on:{\"change\":function($event){_vm.applyFilters()\n            _vm.draw()}},model:{value:(_vm.selectedInterval),callback:function ($$v) {_vm.selectedInterval=$$v},expression:\"selectedInterval\"}}):_vm._e(),(_vm.filters.length > 0)?_c('VDialog',{attrs:{\"persistent\":\"\",\"max-width\":\"300px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('VBtn',_vm._g(_vm._b({attrs:{\"color\":\"primary\",\"dark\":\"\",\"small\":\"\",\"fab\":\"\"}},'VBtn',attrs,false),on),[_c('VIcon',{attrs:{\"small\":\"\"}},[_vm._v(\" $vuetify.icons.mdiTuneVariant \")])],1)]}}],null,false,530295481),model:{value:(_vm.settingDialog),callback:function ($$v) {_vm.settingDialog=$$v},expression:\"settingDialog\"}},[_c('VCard',[_c('VCardTitle',[_c('span',{staticClass:\"text-h5\"},[_vm._v(_vm._s(_vm.$t('Settings'))+\"/\"+_vm._s(_vm.$t('Filters')))])]),_c('VCardText',[_c('VContainer',[_c('VRow',[_c('VCol',{attrs:{\"cols\":\"6\",\"sm\":\"12\"}},[_c('VSelect',{attrs:{\"items\":_vm.namesInterval,\"label\":_vm.$t('Time interval'),\"dense\":\"\"},model:{value:(_vm.selectedInterval),callback:function ($$v) {_vm.selectedInterval=$$v},expression:\"selectedInterval\"}})],1),_vm._l((_vm.filters),function(filter){return _c('VCol',{key:filter.value,attrs:{\"cols\":\"6\",\"sm\":\"12\"}},[_c('VSelect',{attrs:{\"items\":_vm.filterItems[filter.value]\n                          ? _vm.filterItems[filter.value]\n                          : [],\"label\":filter.text,\"dense\":\"\"},model:{value:(_vm.filterModel[filter.value]),callback:function ($$v) {_vm.$set(_vm.filterModel, filter.value, $$v)},expression:\"filterModel[filter.value]\"}})],1)})],2)],1)],1),_c('VCardActions',[_c('VSpacer'),_c('VBtn',{directives:[{name:\"t\",rawName:\"v-t\",value:('Reset'),expression:\"'Reset'\"}],attrs:{\"color\":\"red darken-1\",\"text\":\"\"},on:{\"click\":function($event){return _vm.resetFilters()}}}),_c('VBtn',{directives:[{name:\"t\",rawName:\"v-t\",value:('Close'),expression:\"'Close'\"}],attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":function($event){_vm.settingDialog = false}}}),_c('VBtn',{directives:[{name:\"t\",rawName:\"v-t\",value:('Save'),expression:\"'Save'\"}],attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":function($event){_vm.settingDialog = false\n                  _vm.applyFilters()\n                  _vm.draw()}}})],1)],1)],1):_vm._e()],1)],1),_c('ChartViewVRowWebShare',{attrs:{\"dense\":\"\"}},[_c('VCol',{attrs:{\"cols\":\"12\"}},[_c('div',{attrs:{\"id\":_vm.graphId}})])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <VRow>\r\n    <VCol cols=\"12\" md=\"8\" offset-md=\"2\">\r\n      <VRow dense>\r\n        <VCol cols=\"9\">\r\n          <p class=\"text-h6\">\r\n            {{ title }}\r\n          </p>\r\n        </VCol>\r\n        <VSpacer />\r\n        <VCol cols=\"3\" class=\"text-right\">\r\n          <VSelect\r\n            v-if=\"filters.length === 0\"\r\n            v-model=\"selectedInterval\"\r\n            :items=\"namesInterval\"\r\n            :label=\"$t('Time interval')\"\r\n            dense\r\n            @change=\"\r\n              applyFilters()\r\n              draw()\r\n            \"\r\n          />\r\n          <VDialog\r\n            v-if=\"filters.length > 0\"\r\n            v-model=\"settingDialog\"\r\n            persistent\r\n            max-width=\"300px\"\r\n          >\r\n            <template #activator=\"{ on, attrs }\">\r\n              <VBtn\r\n                color=\"primary\"\r\n                dark\r\n                small\r\n                fab\r\n                v-bind=\"attrs\"\r\n                v-on=\"on\"\r\n              >\r\n                <VIcon small>\r\n                  $vuetify.icons.mdiTuneVariant\r\n                </VIcon>\r\n              </VBtn>\r\n            </template>\r\n            <VCard>\r\n              <VCardTitle>\r\n                <span class=\"text-h5\">{{ $t('Settings') }}/{{ $t('Filters') }}</span>\r\n              </VCardTitle>\r\n              <VCardText>\r\n                <VContainer>\r\n                  <VRow>\r\n                    <VCol cols=\"6\" sm=\"12\">\r\n                      <VSelect\r\n                        v-model=\"selectedInterval\"\r\n                        :items=\"namesInterval\"\r\n                        :label=\"$t('Time interval')\"\r\n                        dense\r\n                      />\r\n                    </VCol>\r\n                    <VCol\r\n                      v-for=\"filter in filters\"\r\n                      :key=\"filter.value\"\r\n                      cols=\"6\"\r\n                      sm=\"12\"\r\n                    >\r\n                      <VSelect\r\n                        v-model=\"filterModel[filter.value]\"\r\n                        :items=\"\r\n                          filterItems[filter.value]\r\n                            ? filterItems[filter.value]\r\n                            : []\r\n                        \"\r\n                        :label=\"filter.text\"\r\n                        dense\r\n                      />\r\n                    </VCol>\r\n                  </VRow>\r\n                </VContainer>\r\n              </VCardText>\r\n              <VCardActions>\r\n                <VSpacer />\r\n                <VBtn v-t=\"'Reset'\" color=\"red darken-1\" text @click=\"resetFilters()\" />\r\n                <VBtn v-t=\"'Close'\" color=\"blue darken-1\" text @click=\"settingDialog = false\" />\r\n                <VBtn\r\n                  v-t=\"'Save'\"\r\n                  color=\"blue darken-1\"\r\n                  text\r\n                  @click=\"\r\n                    settingDialog = false\r\n                    applyFilters()\r\n                    draw()\r\n                  \"\r\n                />\r\n              </VCardActions>\r\n            </VCard>\r\n          </VDialog>\r\n        </VCol>\r\n      </VRow>\r\n      <ChartViewVRowWebShare dense>\r\n        <VCol cols=\"12\">\r\n          <div :id=\"graphId\" />\r\n        </VCol>\r\n      </ChartViewVRowWebShare>\r\n    </VCol>\r\n  </VRow>\r\n</template>\r\n\r\n<script>\r\nimport * as d3 from 'd3'\r\nimport { nest } from 'd3-collection'\r\nimport { addMissingDate } from './utils/d3-helpers'\r\nimport mixin from './mixin'\r\nimport ChartViewVRowWebShare from './ChartViewVRowWebShare.vue'\r\n\r\n// Inspired by\r\n// https://datawanderings.com/2019/10/28/tutorial-making-a-line-chart-in-d3-js-v-5/\r\nexport default {\r\n  components: { ChartViewVRowWebShare },\r\n  mixins: [mixin],\r\n  props: {\r\n    dateAccessor: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    seriesAccessor: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    // if not set will just count the rows\r\n    valueAccessor: {\r\n      type: String,\r\n      default: null\r\n    },\r\n    valueFormat: {\r\n      type: String,\r\n      default: '~s'\r\n    },\r\n    yLabel: {\r\n      type: String,\r\n      default: 'Count'\r\n    },\r\n    filters: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    lineWidth: {\r\n      type: Number,\r\n      default: 2\r\n    },\r\n    dotWidth: {\r\n      type: Number,\r\n      default: 2\r\n    },\r\n    dotRadius: {\r\n      type: Number,\r\n      default: 4\r\n    },\r\n    padding: {\r\n      type: Number,\r\n      default: 5\r\n    },\r\n    margin: {\r\n      type: Number,\r\n      default: 5\r\n    },\r\n    adj: {\r\n      type: Number,\r\n      default: 70\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: 'Title of the Graph'\r\n    },\r\n    legendOffset: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    legendPadding: {\r\n      type: Number,\r\n      default: 10\r\n    },\r\n    dateFormat: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    cumSum: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      slices: [],\r\n      selectedInterval: null,\r\n      intervals: {},\r\n      namesInterval: [],\r\n      settingDialog: false,\r\n      filterItems: {},\r\n      filterModel: {},\r\n      extentDate: null,\r\n      dateParser: d => new Date(d)\r\n    }\r\n  },\r\n  methods: {\r\n    initFilters() {\r\n      this.filters.forEach((filter, i) => {\r\n        this.filterItems[filter.value] = []\r\n        // get unique ids and set items for each filter select\r\n        this.filterItems[filter.value] = this.values\r\n          .map(i => i[filter.value])\r\n          .filter((value, index, self) => self.indexOf(value) === index)\r\n      })\r\n    },\r\n    resetFilters() {\r\n      this.filters.forEach((filter) => {\r\n        this.filterModel[filter.value] = null\r\n      })\r\n    },\r\n    applyFilters() {\r\n      this.slices.forEach((serie) => {\r\n        // aggregate per selected time interval and other filters\r\n        const interval = this.intervals[this.selectedInterval]\r\n        const filters = Object.keys(this.filterModel).filter(k => this.filterModel[k] != null)\r\n        // filter according to selection\r\n        serie.current = serie.values.filter((d) => {\r\n          return filters.every(f => this.filterModel[f] === d[f])\r\n        })\r\n        // Aggregate per time period\r\n        serie.current = nest()\r\n          .key(d => interval.parser(this.dateParser(d.date)))\r\n          .rollup(leaves => d3.sum(leaves, l => l.value))\r\n          .entries(serie.current)\r\n        // Add missing datapoints\r\n        serie.current = addMissingDate(serie.current, 'key', 'value', interval.parser, 0, this.extentDate[0], this.extentDate[1])\r\n        // Sort the result\r\n        serie.current = serie.current.sort((e1, e2) => this.dateParser(e1.key) - this.dateParser(e2.key))\r\n        // Compute cumulative sum if needed\r\n        if (this.cumSum) {\r\n          const cumSum = d3.cumsum(serie.current, d => d.value)\r\n          serie.current = serie.current.map((d, idx) => {\r\n            return {\r\n              ...d,\r\n              value: cumSum[idx]\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    drawViz() {\r\n      /* Init the possible aggregations dpending on dates extent */\r\n      if (this.dateFormat) {\r\n        this.dateParser = d3.timeParse(this.dateFormat)\r\n      }\r\n      this.extentDate = d3.extent(this.values, d => this.dateParser(d[this.dateAccessor.value]))\r\n      const diffDays = d3.timeDay.count(this.extentDate[0], this.extentDate[1])\r\n      if (!diffDays) {\r\n        console.error('Unrecognized Dates')\r\n        return\r\n      }\r\n      if (diffDays < 93) {\r\n        this.intervals.Day = {\r\n          parser: d3.timeDay,\r\n          format: d3.timeFormat('%B %d, %Y')\r\n        }\r\n      }\r\n      if (diffDays > 14 && diffDays < 651) {\r\n        this.intervals.Week = {\r\n          parser: d3.timeWeek,\r\n          format: d3.timeFormat('%B %d, %Y')\r\n        }\r\n      }\r\n      if (diffDays > 62 && diffDays < 1800) {\r\n        this.intervals.Month = {\r\n          parser: d3.timeMonth,\r\n          format: d3.timeFormat('%B %Y')\r\n        }\r\n      }\r\n      if (diffDays > 730) {\r\n        this.intervals.Year = {\r\n          parser: d3.timeYear,\r\n          format: d3.timeFormat('%Y')\r\n        }\r\n      }\r\n      this.namesInterval = Object.keys(this.intervals).map(value => ({\r\n        value,\r\n        text: this.$tc(value, 2)\r\n      }))\r\n      // get unique series ids\r\n      const ids = this.values\r\n        .map(i => i[this.seriesAccessor.value])\r\n        .filter((value, index, self) => self.indexOf(value) === index)\r\n      // group by series ids and sort values\r\n      this.slices = ids.map((a) => {\r\n        return {\r\n          id: 'legend' in this.messages ? this.messages.legend[a] : a,\r\n          values: this.values\r\n            .filter(v => a === v[this.seriesAccessor.value])\r\n            .map((d) => {\r\n              const ret = {\r\n                date: this.dateParser(d[this.dateAccessor.value]),\r\n                value: this.valueAccessor ? +d[this.valueAccessor] : 1\r\n              }\r\n              this.filters.forEach((f) => {\r\n                ret[f.value] = d[f.value]\r\n              })\r\n              return ret\r\n            })\r\n            .sort((e1, e2) => e1.date - e2.date)\r\n        }\r\n      })\r\n      this.selectedInterval = this.namesInterval.slice(-1)[0].value\r\n      this.initFilters()\r\n      this.applyFilters()\r\n      this.draw()\r\n    },\r\n    draw() {\r\n      const { graphId, adj } = this\r\n      const width = 800\r\n      const height = 300\r\n      /* create svg element */\r\n      d3.select(`#${graphId} svg`).remove()\r\n      const svg = d3\r\n        .select(`#${graphId}`)\r\n        .append('svg')\r\n        .attr('preserveAspectRatio', 'xMinYMin meet')\r\n        .attr('viewBox', `-${adj} -${adj} ${width + adj * 2} ${height + adj * 2}`)\r\n        .style('padding', this.padding)\r\n        .style('margin', this.margin)\r\n        .classed('svg-content', true)\r\n      function nestedExtent(data, dataAccessor, valueAccessor) {\r\n        return d3.extent(data.reduce(function(prevArr, currArr) {\r\n          const extentArr = d3.extent(currArr[dataAccessor], valueAccessor)\r\n          prevArr.push(extentArr[0])\r\n          prevArr.push(extentArr[1])\r\n          return prevArr\r\n        }, []))\r\n      }\r\n      /* Scales */\r\n      const xScale = d3.scaleTime().range([0, width])\r\n      const yScale = d3.scaleLinear().rangeRound([height, 0])\r\n      xScale.domain(nestedExtent(this.slices, 'current', d => this.dateParser(d.key)))\r\n      yScale.domain([0, nestedExtent(this.slices, 'current', d => d.value)[1]])\r\n      /* Axis */\r\n      const yAxis = d3.axisLeft().ticks(5).scale(yScale) // .ticks(slices[0].values.length)\r\n      const xAxis = d3\r\n        .axisBottom()\r\n        .ticks(8)\r\n      // .ticks(d3.timeDay.every(1))\r\n      // .tickFormat(d3.timeFormat('%b %d'))\r\n        .scale(xScale)\r\n      svg\r\n        .append('g')\r\n        .attr('class', 'xAxis')\r\n        .attr('transform', `translate(0,${height})`)\r\n        .call(xAxis)\r\n        .selectAll('text')\r\n        .attr('y', 0)\r\n        .attr('x', 9)\r\n        .attr('dy', '2em')\r\n        .attr('transform', 'rotate(-30)')\r\n        .style('text-anchor', 'end')\r\n      svg\r\n        .append('g')\r\n        .attr('class', 'yAxis')\r\n        .call(yAxis)\r\n        .append('text')\r\n        .attr('transform', 'rotate(-90)')\r\n        .attr('dy', '.75em')\r\n        .attr('y', -60)\r\n        .style('text-anchor', 'end')\r\n        .text(this.yLabel)\r\n      /* GridLayout */\r\n      d3.selectAll('#' + graphId + ' g.yAxis g.tick')\r\n        .append('line')\r\n        .attr('class', 'gridline')\r\n        .attr('x1', 0)\r\n        .attr('y1', 0)\r\n        .attr('x2', width)\r\n        .attr('y2', 0)\r\n      /*\r\n            d3.selectAll('#' + this.graphId + ' g.xAxis g.tick')\r\n              .append('line')\r\n              .attr('class', 'gridline')\r\n              .attr('x1', 0)\r\n              .attr('y1', -height)\r\n              .attr('x2', 0)\r\n              .attr('y2', 0)\r\n            */\r\n      /* Color Scale */\r\n      const keys = this.slices.map(d => d.id)\r\n      const color = d3.scaleOrdinal().domain(keys).range(this.colorPalette)\r\n      /* Legend */\r\n      const legend = svg.selectAll('.legend')\r\n        .data(keys)\r\n        .enter()\r\n        .append('g')\r\n      // add circles\r\n      legend\r\n        .append('circle')\r\n        .attr('r', 7)\r\n        .attr('cx', -20)\r\n        .attr('cy', -40)\r\n        .attr('fill', d => color(d))\r\n      // add text\r\n      legend\r\n        .append('text')\r\n        .attr('x', -5)\r\n        .attr('y', -37)\r\n        .text(function(d) {\r\n          return d\r\n        })\r\n      // space the groups depending on their size\r\n      legend.attr('transform', (d, i) => {\r\n        const x = d3.sum(keys, (e, j) => j < i ? legend.nodes()[j].getBBox().width : 0)\r\n        return ('translate(' +\r\n                    (x + this.legendOffset + this.legendPadding * i) +\r\n                    ',0)')\r\n      })\r\n      /* Tooltip */\r\n      d3.select('#' + graphId + '.tooltip').remove()\r\n      const tooltip = d3\r\n        .select('body')\r\n        .append('div')\r\n        .attr('class', 'tooltip')\r\n        .attr('id', graphId)\r\n        .style('opacity', 0)\r\n      const that = this\r\n      const f = d3.format(this.valueFormat)\r\n      function showTooltip(evt, d) {\r\n        tooltip.transition().duration(60).style('opacity', 0.98)\r\n        tooltip\r\n          .html('<b>' +\r\n                    that.intervals[that.selectedInterval].format(that.dateParser(d.key)) +\r\n                    '</b><br/>' +\r\n                    f(d.value)) // d.name\r\n          .style('left', evt.pageX - 55 + 'px')\r\n          .style('top', evt.pageY - 45 + 'px')\r\n      }\r\n      function hideTooltip() {\r\n        tooltip.transition().duration(60).style('opacity', 0)\r\n      }\r\n      /* Line */\r\n      const line = d3\r\n        .line()\r\n        .curve(d3.curveMonotoneX)\r\n        .x(d => xScale(this.dateParser(d.key)))\r\n        .y(d => yScale(d.value))\r\n      /* Draw lines */\r\n      const lines = svg.selectAll('lines').data(this.slices).enter().append('g')\r\n      const path = lines\r\n        .append('path')\r\n        .attr('fill', 'none')\r\n        .attr('stroke', d => color(d.id))\r\n        .attr('stroke-width', this.lineWidth)\r\n        .attr('d', d => line(d.current))\r\n      path\r\n        .attr('stroke-dashoffset', function() {\r\n          return d3.select(this).node().getTotalLength()\r\n        })\r\n        .attr('stroke-dasharray', function() {\r\n          return d3.select(this).node().getTotalLength()\r\n        })\r\n        .transition()\r\n        .duration(5000)\r\n        .ease(d3.easeSin)\r\n        .attr('stroke-dashoffset', 0)\r\n      /* Draw points */\r\n      const points = lines\r\n        .selectAll('circle')\r\n        .data(d => d.current.map((v) => {\r\n          v.color = color(d.id)\r\n          v.name = d.id\r\n          return v\r\n        }))\r\n        .enter()\r\n        .append('circle')\r\n      points\r\n        .attr('stroke', d => d.color)\r\n        .attr('fill', 'white')\r\n        .attr('stroke-width', this.dotWidth)\r\n        .attr('cy', d => yScale(d.value))\r\n        .attr('cx', d => xScale(this.dateParser(d.key)))\r\n        .transition()\r\n        .duration(1500)\r\n        .delay((d, i) => i * 100 + 500)\r\n        .ease(d3.easeSin)\r\n        .attr('cy', d => yScale(d.value))\r\n        .attr('cx', d => xScale(this.dateParser(d.key)))\r\n        .attr('r', this.dotRadius)\r\n        .attr('class', 'datapoint')\r\n        .attr('id', (d, i) => i)\r\n        .style('opacity', 1)\r\n      const radius = this.dotRadius\r\n      points.on('mouseover', function(evt, d) {\r\n        d3.select(this)\r\n          .attr('fill', d => d.color)\r\n          .transition()\r\n          .duration(60)\r\n          .attr('r', radius + 5)\r\n        showTooltip(evt, d)\r\n      })\r\n      points.on('mouseleave', function() {\r\n        d3.select(this)\r\n          .attr('fill', 'white')\r\n          .transition()\r\n          .duration(60)\r\n          .attr('r', radius)\r\n        hideTooltip()\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n/* AXES */\r\n/* ticks */\r\ndiv ::v-deep .xAxis line,\r\ndiv ::v-deep .yAxis line {\r\n  stroke: #706f6f;\r\n  stroke-width: 0.5;\r\n  shape-rendering: geometricPrecision;\r\n}\r\n/* axis contour */\r\ndiv ::v-deep .xAxis path,\r\ndiv ::v-deep .yAxis path {\r\n  stroke: #706f6f;\r\n  stroke-width: 0.7;\r\n  shape-rendering: geometricPrecision;\r\n}\r\ndiv ::v-deep .yAxis path {\r\n  display: none;\r\n}\r\n/* axis text */\r\ndiv ::v-deep .xAxis text,\r\ndiv ::v-deep .yAxis text {\r\n  fill: #2b2929;\r\n  font-size: 1rem;\r\n  font-weight: 300;\r\n}\r\ndiv ::v-deep .gridline {\r\n  stroke: lightgray;\r\n  shape-rendering: geometricPrecision;\r\n  stroke-opacity: 0.5;\r\n  stroke-width: 10;\r\n}\r\n</style>\r\n<style>\r\ndiv.tooltip {\r\n  position: absolute;\r\n  text-align: center;\r\n  width: 110px;\r\n  height: 30px;\r\n  padding: 2px;\r\n  font: 12px sans-serif;\r\n  background: white;\r\n  color: #565656;\r\n  border: 0px;\r\n  border-radius: 2px;\r\n  pointer-events: none;\r\n  box-shadow: 0 0px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewTimeSeries.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewTimeSeries.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChartViewTimeSeries.vue?vue&type=template&id=7330e736&scoped=true&\"\nimport script from \"./ChartViewTimeSeries.vue?vue&type=script&lang=js&\"\nexport * from \"./ChartViewTimeSeries.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChartViewTimeSeries.vue?vue&type=style&index=0&id=7330e736&prod&scoped=true&lang=css&\"\nimport style1 from \"./ChartViewTimeSeries.vue?vue&type=style&index=1&id=7330e736&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7330e736\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('VRow',_vm._b({ref:\"domToImageNode\"},'VRow',_vm.$attrs,false),[_vm._t(\"default\"),_c('VCol',{staticClass:\"dom-to-image-exclude webshare d-flex\",attrs:{\"cols\":\"12\"}},[_c('div',{staticClass:\"webshare__export-button\"},[_c('BaseButton',_vm._b({attrs:{\"mdi-icon\":\"mdiExport\",\"text\":\"Export\"},on:{\"click\":_vm.exportImage}},'BaseButton',{ progress: _vm.progress, status: _vm.status, error: _vm.error },false))],1),_c('div',{staticClass:\"webshare__download-button\"},[_c('BaseButtonDownloadData',_vm._b({},'BaseButtonDownloadData',{ disabled: !_vm.blob, extension: _vm.extension, filename: _vm.filename, data: _vm.blob },false))],1),_c('div',{staticClass:\"webshare__share-button\"},[_c('BaseButtonShare',_vm._b({attrs:{\"file-share\":\"\"}},'BaseButtonShare',{ files: _vm.files, disabled: !_vm.files },false))],1)])],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <VRow ref=\"domToImageNode\" v-bind=\"$attrs\">\r\n      <slot />\r\n      <VCol cols=\"12\" class=\"dom-to-image-exclude webshare d-flex\">\r\n        <div class=\"webshare__export-button\">\r\n          <BaseButton\r\n            mdi-icon=\"mdiExport\"\r\n            text=\"Export\"\r\n            v-bind=\"{ progress, status, error }\"\r\n            @click=\"exportImage\"\r\n          />\r\n        </div>\r\n        <div class=\"webshare__download-button\">\r\n        <BaseButtonDownloadData\r\n          v-bind=\"{ disabled: !blob, extension, filename, data: blob }\"\r\n        />\r\n        </div>\r\n        <div class=\"webshare__share-button\">\r\n        <BaseButtonShare\r\n          file-share\r\n          v-bind=\"{ files, disabled: !files }\"\r\n        />\r\n        </div>\r\n      </VCol>\r\n    </VRow>\r\n</template>\r\n\r\n<script>\r\nimport exportImageMixinFactory from '@/mixins/export-image-mixin-factory'\r\nimport BaseButton from '@/components/base/button/BaseButton.vue'\r\nimport BaseButtonDownloadData from '@/components/base/button/download/BaseButtonDownloadData.vue'\r\nimport BaseButtonShare from '@/components/base/button/BaseButtonShare.vue'\r\n\r\nexport default {\r\n  components: { BaseButton, BaseButtonDownloadData, BaseButtonShare },\r\n  mixins: [exportImageMixinFactory()]\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewVRowWebShare.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewVRowWebShare.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChartViewVRowWebShare.vue?vue&type=template&id=07259b63&\"\nimport script from \"./ChartViewVRowWebShare.vue?vue&type=script&lang=js&\"\nexport * from \"./ChartViewVRowWebShare.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import map from \"./map\";\n\nexport default function() {\n  var keys = [],\n      sortKeys = [],\n      sortValues,\n      rollup,\n      nest;\n\n  function apply(array, depth, createResult, setResult) {\n    if (depth >= keys.length) {\n      if (sortValues != null) array.sort(sortValues);\n      return rollup != null ? rollup(array) : array;\n    }\n\n    var i = -1,\n        n = array.length,\n        key = keys[depth++],\n        keyValue,\n        value,\n        valuesByKey = map(),\n        values,\n        result = createResult();\n\n    while (++i < n) {\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n        values.push(value);\n      } else {\n        valuesByKey.set(keyValue, [value]);\n      }\n    }\n\n    valuesByKey.each(function(values, key) {\n      setResult(result, key, apply(values, depth, createResult, setResult));\n    });\n\n    return result;\n  }\n\n  function entries(map, depth) {\n    if (++depth > keys.length) return map;\n    var array, sortKey = sortKeys[depth - 1];\n    if (rollup != null && depth >= keys.length) array = map.entries();\n    else array = [], map.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });\n    return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;\n  }\n\n  return nest = {\n    object: function(array) { return apply(array, 0, createObject, setObject); },\n    map: function(array) { return apply(array, 0, createMap, setMap); },\n    entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },\n    key: function(d) { keys.push(d); return nest; },\n    sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },\n    sortValues: function(order) { sortValues = order; return nest; },\n    rollup: function(f) { rollup = f; return nest; }\n  };\n}\n\nfunction createObject() {\n  return {};\n}\n\nfunction setObject(object, key, value) {\n  object[key] = value;\n}\n\nfunction createMap() {\n  return map();\n}\n\nfunction setMap(map, key, value) {\n  map.set(key, value);\n}\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume itâ€™s an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","export default function(map) {\n  var keys = [];\n  for (var key in map) keys.push(key);\n  return keys;\n}\n","import * as d3 from 'd3'\r\n/**\r\n * Fill in the missing dates of an array of dated objects with a specific value.\r\n * @param  {Array} data  array of objects that include dates\r\n * @param  {String} dateAccessor  the key of date object\r\n * @param  {String} valueAccessor the key of the value to add for each missing date\r\n * @param  {String} interval  the d3 interval between each date, e.g: d3.timeDay, d3.timeMonth\r\n * @param  {Any} fillValue  the value to fill for each missing date, default to 0.\r\n * @param  {Date} minDate  the starting date range, computed from the data by default.\r\n * @param  {Date} maxDate  the ending date range, computed from the data by default.\r\n * @return {Array} the modified data array with the missing dates and their value added\r\n */\r\nexport function addMissingDate(\r\n  data,\r\n  dateAccessor,\r\n  valueAccessor,\r\n  interval,\r\n  fillValue = 0,\r\n  minDate = null,\r\n  maxDate = null\r\n) {\r\n  if (data.length <= 0) { return [] }\r\n  // Compute the min and max date\r\n  const extent = d3.extent(data, d => new Date(d[dateAccessor]))\r\n\r\n  // Get the list of dates between this extent\r\n  const dates = interval.range(\r\n    minDate !== null ? interval.floor(minDate) : interval.floor(extent[0]),\r\n    maxDate !== null ? interval.ceil(maxDate) : interval.ceil(extent[1]),\r\n    1\r\n  )\r\n\r\n  // Get dates that are not in the above list\r\n  const missingDates = dates.filter(\r\n    value => !data.map(d => d[dateAccessor]).includes(value.toString())\r\n  )\r\n\r\n  // Add and fill missing dates\r\n  missingDates.forEach((date) => {\r\n    const obj = { ...data[0] }\r\n    obj[dateAccessor] = date\r\n    obj[valueAccessor] = fillValue\r\n    data.push(obj)\r\n  })\r\n\r\n  return data\r\n}\r\n"],"names":["render","_vm","this","_c","_self","attrs","staticClass","_v","_s","title","filters","length","namesInterval","$t","on","$event","applyFilters","draw","model","value","callback","$$v","selectedInterval","expression","_e","scopedSlots","_u","key","fn","_g","_b","settingDialog","_l","filter","filterItems","text","filterModel","$set","directives","name","rawName","resetFilters","graphId","staticRenderFns","components","ChartViewVRowWebShare","mixins","mixin","props","dateAccessor","type","Object","required","seriesAccessor","valueAccessor","String","default","valueFormat","yLabel","Array","lineWidth","Number","dotWidth","dotRadius","padding","margin","adj","legendOffset","legendPadding","dateFormat","cumSum","Boolean","data","slices","intervals","extentDate","dateParser","d","Date","methods","initFilters","forEach","i","values","map","index","self","indexOf","serie","interval","keys","k","current","every","f","parser","date","rollup","leaves","l","entries","addMissingDate","sort","e1","e2","idx","drawViz","diffDays","console","error","Day","format","Week","Month","Year","$tc","ids","a","id","messages","legend","v","ret","slice","width","height","remove","svg","append","attr","style","classed","nestedExtent","dataAccessor","reduce","prevArr","currArr","extentArr","push","xScale","range","yScale","rangeRound","domain","yAxis","ticks","scale","xAxis","call","selectAll","color","colorPalette","enter","x","e","j","nodes","getBBox","tooltip","that","showTooltip","evt","transition","duration","html","pageX","pageY","hideTooltip","line","curve","y","lines","path","node","getTotalLength","ease","points","delay","radius","component","ref","$attrs","_t","exportImage","progress","status","disabled","blob","extension","filename","files","BaseButton","prefix","Map","object","each","set","isArray","o","n","prototype","constructor","has","get","property","clear","size","empty","sortValues","nest","sortKeys","apply","array","depth","createResult","setResult","keyValue","valuesByKey","result","sortKey","b","createObject","setObject","createMap","setMap","order","Set","proto","add","fillValue","minDate","maxDate","extent","dates","floor","ceil","missingDates","includes","toString","obj"],"sourceRoot":""}