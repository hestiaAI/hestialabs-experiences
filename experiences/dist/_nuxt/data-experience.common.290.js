/*! For license information please see LICENSES */
(("undefined"!=typeof self?self:this).webpackChunkdata_experience=("undefined"!=typeof self?self:this).webpackChunkdata_experience||[]).push([[290],{40290:function(t,e,n){!function(t,e,n,r,o,c,l,h,f,d,_,y,m,v,x,w,A,M,C,S){"use strict";const k="4.2.7";class T extends Error{}const E={CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10};class R{constructor(){this.enableDebugLog=!1,this._alreadyWarned={}}warn(t){return console&&(console.warn?console.warn(t):console.log&&console.log(t)),this}warnOnce(t){return this._alreadyWarned[t]||(this._alreadyWarned[t]=!0,D.warn(t)),this}debug(t){return this.enableDebugLog&&console&&(console.debug?console.debug(t):console.log&&console.log(t)),this}}const D=new R;class L{constructor(){this._defaultColors=L._schemeCategory20c,this.dateFormat=e.timeFormat("%m/%d/%Y"),this._renderlet=null,this.disableTransitions=!1}defaultColors(t){return arguments.length?(this._defaultColors=t,this):(this._defaultColors===L._schemeCategory20c&&D.warnOnce("You are using d3.schemeCategory20c, which has been removed in D3v5. See the explanation at https://github.com/d3/d3/blob/master/CHANGES.md#changes-in-d3-50. DC is using it for backward compatibility, however it will be changed in DCv3.1. You can change it by calling dc.config.defaultColors(newScheme). See https://github.com/d3/d3-scale-chromatic for some alternatives."),this._defaultColors)}}L._schemeCategory20c=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];const N=new L,P={eventHandler:t=>function(a,b){console.warn("No d3.js compatbility event handler registered, defaulting to v6 behavior."),t.call(this,b,a)},nester:({key:t,sortKeys:e,sortValues:n,entries:r})=>{throw new Error("No d3.js compatbility nester registered, load v5 or v6 compability layer.")},pointer:()=>{throw new Error("No d3.js compatbility pointer registered, load v5 or v6 compability layer.")}};class O{constructor(){this._chartMap={}}_initializeChartGroup(t){return t||(t=E.DEFAULT_CHART_GROUP),this._chartMap[t]||(this._chartMap[t]=[]),t}has(t){for(const e in this._chartMap)if(this._chartMap[e].indexOf(t)>=0)return!0;return!1}register(t,e){this._chartMap[e=this._initializeChartGroup(e)].push(t)}deregister(t,e){e=this._initializeChartGroup(e);for(let i=0;i<this._chartMap[e].length;i++)if(this._chartMap[e][i].anchorName()===t.anchorName()){this._chartMap[e].splice(i,1);break}}clear(t){t?delete this._chartMap[t]:this._chartMap={}}list(t){return t=this._initializeChartGroup(t),this._chartMap[t]}}const z=new O,B=function(t,e){z.register(t,e)},F=function(t,e){z.deregister(t,e)},H=function(t){return z.has(t)},$=function(t){z.clear(t)},Y=function(t){const e=z.list(t);for(let i=0;i<e.length;++i)e[i].filterAll()},I=function(t){const e=z.list(t);for(let i=0;i<e.length;++i)e[i].focus&&e[i].focus()},G=function(t){const e=z.list(t);for(let i=0;i<e.length;++i)e[i].render();null!==N._renderlet&&N._renderlet(t)},U=function(t){const e=z.list(t);for(let i=0;i<e.length;++i)e[i].redraw();null!==N._renderlet&&N._renderlet(t)},V=function(t,e,n,r){if(N.disableTransitions||e<=0)return t;let s=t.transition(r);return(e>=0||void 0!==e)&&(s=s.duration(e)),(n>=0||void 0!==n)&&(s=s.delay(n)),s},X=function(t,e,n,r){return t?function(t){return V(t,e,n,r)}:function(t){return t}},j=function(t,e){if(t.empty()||!t.duration)e.call(t);else{let n=0;t.each((()=>{++n})).on("end",(()=>{--n||e.call(t)}))}},W=function(t){return arguments.length?(N._renderlet=t,null):N._renderlet},Z=function(t){return t instanceof Object&&t.__dcFlag__&&!0},K={current:null,trigger:function(t,e){e?(K.current=t,setTimeout((()=>{t===K.current&&t()}),e)):t()}},J={RangedFilter:function(t,e){const n=new Array(t,e);return n.isFiltered=function(t){return t>=this[0]&&t<this[1]},n.filterType="RangedFilter",n},TwoDimensionalFilter:function(filter){if(null===filter)return null;const t=filter;return t.isFiltered=function(e){return e.length&&e.length===t.length&&e[0]===t[0]&&e[1]===t[1]},t.filterType="TwoDimensionalFilter",t},RangedTwoDimensionalFilter:function(filter){if(null===filter)return null;const t=filter;let e;return e=t[0]instanceof Array?[[Math.min(filter[0][0],filter[1][0]),Math.min(filter[0][1],filter[1][1])],[Math.max(filter[0][0],filter[1][0]),Math.max(filter[0][1],filter[1][1])]]:[[filter[0],-1/0],[filter[1],1/0]],t.isFiltered=function(t){let n,r;return t instanceof Array?(n=t[0],r=t[1]):(n=t,r=e[0][1]),n>=e[0][0]&&n<e[1][0]&&r>=e[0][1]&&r<e[1][1]},t.filterType="RangedTwoDimensionalFilter",t},HierarchyFilter:function(path){if(null===path)return null;const filter=path.slice(0);return filter.isFiltered=function(t){if(!(filter.length&&t&&t.length&&t.length>=filter.length))return!1;for(let i=0;i<filter.length;i++)if(t[i]!==filter[i])return!1;return!0},filter}};class Q extends Error{}const tt=function(t,e){return e?function(n,i){return e.call(n,n[t],i)}:function(e){return e[t]}},et={printSingleValue:function(filter){let s=`${filter}`;return filter instanceof Date?s=N.dateFormat(filter):"string"==typeof filter?s=filter:et.isFloat(filter)?s=et.printSingleValue.fformat(filter):et.isInteger(filter)&&(s=Math.round(filter)),s}};et.printSingleValue.fformat=r.format(".2f"),et._toTimeFunc=function(t){return{second:n.timeSecond,minute:n.timeMinute,hour:n.timeHour,day:n.timeDay,week:n.timeWeek,month:n.timeMonth,year:n.timeYear}[t]},et.add=function(t,e,r){if("string"==typeof e&&(e=e.replace("%","")),t instanceof Date)return"string"==typeof e&&(e=+e),"millis"===r?new Date(t.getTime()+e):("function"!=typeof(r=r||n.timeDay)&&(r=et._toTimeFunc(r)),r.offset(t,e));if("string"==typeof e){const n=+e/100;return t>0?t*(1+n):t*(1-n)}return t+e},et.subtract=function(t,e,r){if("string"==typeof e&&(e=e.replace("%","")),t instanceof Date)return"string"==typeof e&&(e=+e),"millis"===r?new Date(t.getTime()-e):("function"!=typeof(r=r||n.timeDay)&&(r=et._toTimeFunc(r)),r.offset(t,-e));if("string"==typeof e){const n=+e/100;return t<0?t*(1+n):t*(1-n)}return t-e},et.isNumber=function(t){return t===+t},et.isFloat=function(t){return t===+t&&t!==(0|t)},et.isInteger=function(t){return t===+t&&t===(0|t)},et.isNegligible=function(t){return!et.isNumber(t)||t<E.NEGLIGIBLE_NUMBER&&t>-E.NEGLIGIBLE_NUMBER},et.clamp=function(t,e,n){return t<e?e:t>n?n:t},et.constant=function(t){return function(){return t}};let nt=0;function it(t,e){for(let n=0;n<t.length;n++)if(t[n].key===e)return t[n]}et.uniqueId=function(){return++nt},et.nameToId=function(t){return t.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},et.appendOrSelect=function(t,e,n){n=n||e;let element=t.select(e);return element.empty()&&(element=t.append(n)),element},et.safeNumber=function(t){return et.isNumber(+t)?+t:0},et.arraysEqual=function(t,e){return!t&&!e||!(!t||!e)&&t.length===e.length&&t.every(((t,i)=>t.valueOf()===e[i].valueOf()))},et.allChildren=function(t){let e=[];if(e.push(t.path),console.log("currentNode",t),t.children)for(let i=0;i<t.children.length;i++)e=e.concat(et.allChildren(t.children[i]));return e},et.toHierarchy=function(t,e){const n={key:"root",children:[]};for(let i=0;i<t.length;i++){const data=t[i],r=data.key,o=e(data);let c=n;for(let t=0;t<r.length;t++){const e=r.slice(0,t+1),n=c.children,l=r[t];let h;t+1<r.length?(h=it(n,l),void 0===h&&(h={key:l,children:[],path:e},n.push(h)),c=h):(h={key:l,value:o,data:data,path:e},n.push(h))}}return n},et.getAncestors=function(t){const path=[];let e=t;for(;e.parent;)path.unshift(e.name),e=e.parent;return path},et.arraysIdentical=function(a,b){let i=a.length;if(i!==b.length)return!1;for(;i--;)if(a[i]!==b[i])return!1;return!0};const st={filters:function(t){let s="";for(let i=0;i<t.length;++i)i>0&&(s+=", "),s+=st.filter(t[i]);return s},filter:function(filter){let s="";return null!=filter&&(filter instanceof Array?filter.length>=2?s=`[${filter.map((t=>et.printSingleValue(t))).join(" -> ")}]`:filter.length>=1&&(s=et.printSingleValue(filter[0])):s=et.printSingleValue(filter)),s}},at={integers:function(t,e){return Math.abs(e-t)},ordinal:function(){throw new Error("dc.units.ordinal should not be called - it is a placeholder")},fp:{}};at.fp.precision=function(t){const e=function(s,t){const n=Math.abs((t-s)/e.resolution);return et.isNegligible(n-Math.floor(n))?Math.floor(n):Math.ceil(n)};return e.resolution=t,e};const ot=(t,e)=>(0===e.length?t.filter(null):1!==e.length||e[0].isFiltered?1===e.length&&"RangedFilter"===e[0].filterType?t.filterRange(e[0]):t.filterFunction((t=>{for(let i=0;i<e.length;i++){const filter=e[i];if(filter.isFiltered){if(filter.isFiltered(t))return!0}else if(filter<=t&&filter>=t)return!0}return!1})):t.filterExact(e[0]),e),ut=(t,filter)=>null==filter?t.length>0:t.some((t=>filter<=t&&filter>=t)),ct=(t,filter)=>{for(let i=0;i<t.length;i++)if(t[i]<=filter&&t[i]>=filter){t.splice(i,1);break}return t},lt=(t,filter)=>(t.push(filter),t),ht=t=>[];class ft{constructor(){this.__dcFlag__=et.uniqueId(),this._svgDescription=null,this._keyboardAccessible=!1,this._dimension=void 0,this._group=void 0,this._anchor=void 0,this._root=void 0,this._svg=void 0,this._isChild=void 0,this._minWidth=200,this._defaultWidthCalc=element=>{const t=element&&element.getBoundingClientRect&&element.getBoundingClientRect().width;return t&&t>this._minWidth?t:this._minWidth},this._widthCalc=this._defaultWidthCalc,this._minHeight=200,this._defaultHeightCalc=element=>{const t=element&&element.getBoundingClientRect&&element.getBoundingClientRect().height;return t&&t>this._minHeight?t:this._minHeight},this._heightCalc=this._defaultHeightCalc,this._width=void 0,this._height=void 0,this._useViewBoxResizing=!1,this._keyAccessor=tt("key"),this._valueAccessor=tt("value"),this._label=tt("key"),this._ordering=tt("key"),this._renderLabel=!1,this._title=t=>`${this.keyAccessor()(t)}: ${this.valueAccessor()(t)}`,this._renderTitle=!0,this._controlsUseVisibility=!1,this._transitionDuration=750,this._transitionDelay=0,this._filterPrinter=st.filters,this._mandatoryAttributesList=["dimension","group"],this._chartGroup=E.DEFAULT_CHART_GROUP,this._listeners=c.dispatch("preRender","postRender","preRedraw","postRedraw","filtered","zoomed","renderlet","pretransition"),this._legend=void 0,this._commitHandler=void 0,this._defaultData=t=>t.all(),this._data=this._defaultData,this._filters=[],this._filterHandler=ot,this._hasFilterHandler=ut,this._removeFilterHandler=ct,this._addFilterHandler=lt,this._resetFilterHandler=ht}height(t){return arguments.length?(this._heightCalc=t?"function"==typeof t?t:et.constant(t):this._defaultHeightCalc,this._height=void 0,this):(et.isNumber(this._height)||(this._height=this._heightCalc(this._root.node())),this._height)}width(t){return arguments.length?(this._widthCalc=t?"function"==typeof t?t:et.constant(t):this._defaultWidthCalc,this._width=void 0,this):(et.isNumber(this._width)||(this._width=this._widthCalc(this._root.node())),this._width)}minWidth(t){return arguments.length?(this._minWidth=t,this):this._minWidth}minHeight(t){return arguments.length?(this._minHeight=t,this):this._minHeight}useViewBoxResizing(t){return arguments.length?(this._useViewBoxResizing=t,this):this._useViewBoxResizing}dimension(t){return arguments.length?(this._dimension=t,this.expireCache(),this):this._dimension}data(t){return arguments.length?(this._data="function"==typeof t?t:et.constant(t),this.expireCache(),this):this._data(this._group)}group(t,e){return arguments.length?(this._group=t,this._groupName=e,this.expireCache(),this):this._group}ordering(t){return arguments.length?(this._ordering=t,this.expireCache(),this):this._ordering}_computeOrderedGroups(data){return Array.from(data).sort(((a,b)=>l.ascending(this._ordering(a),this._ordering(b))))}filterAll(){return this.filter(null)}select(t){return this._root.select(t)}selectAll(t){return this._root?this._root.selectAll(t):null}anchor(t,e){if(!arguments.length)return this._anchor;if(Z(t))this._anchor=t.anchor(),this._anchor.children&&(this._anchor=`#${t.anchorName()}`),this._root=t.root(),this._isChild=!0;else{if(!t)throw new T("parent must be defined");t.select&&t.classed?this._anchor=t.node():this._anchor=t,this._root=o.select(this._anchor),this._root.classed(E.CHART_CLASS,!0),B(this,e),this._isChild=!1}return this._chartGroup=e,this}anchorName(){const a=this.anchor();return a&&a.id?a.id:a&&a.replace?a.replace("#",""):`dc-chart${this.chartID()}`}root(t){return arguments.length?(this._root=t,this):this._root}svg(t){return arguments.length?(this._svg=t,this):this._svg}resetSvg(){return this.select("svg").remove(),this.generateSvg()}sizeSvg(){this._svg&&(this._useViewBoxResizing?this._svg.attr("viewBox")||this._svg.attr("viewBox",`0 0 ${this.width()} ${this.height()}`):this._svg.attr("width",this.width()).attr("height",this.height()))}generateSvg(){return this._svg=this.root().append("svg"),(this._svgDescription||this._keyboardAccessible)&&(this._svg.append("desc").attr("id",`desc-id-${this.__dcFlag__}`).html(`${this.svgDescription()}`),this._svg.attr("tabindex","0").attr("role","img").attr("aria-labelledby",`desc-id-${this.__dcFlag__}`)),this.sizeSvg(),this._svg}svgDescription(t){return arguments.length?(this._svgDescription=t,this):this._svgDescription||this.constructor.name}keyboardAccessible(t){return arguments.length?(this._keyboardAccessible=t,this):this._keyboardAccessible}filterPrinter(t){return arguments.length?(this._filterPrinter=t,this):this._filterPrinter}controlsUseVisibility(t){return arguments.length?(this._controlsUseVisibility=t,this):this._controlsUseVisibility}turnOnControls(){if(this._root){const t=this.controlsUseVisibility()?"visibility":"display";this.selectAll(".reset").style(t,null),this.selectAll(".filter").text(this._filterPrinter(this.filters())).style(t,null)}return this}turnOffControls(){if(this._root){const t=this.controlsUseVisibility()?"visibility":"display",e=this.controlsUseVisibility()?"hidden":"none";this.selectAll(".reset").style(t,e),this.selectAll(".filter").style(t,e).text(this.filter())}return this}transitionDuration(t){return arguments.length?(this._transitionDuration=t,this):this._transitionDuration}transitionDelay(t){return arguments.length?(this._transitionDelay=t,this):this._transitionDelay}_mandatoryAttributes(t){return arguments.length?(this._mandatoryAttributesList=t,this):this._mandatoryAttributesList}checkForMandatoryAttributes(a){if(!this[a]||!this[a]())throw new Q(`Mandatory attribute chart.${a} is missing on chart[#${this.anchorName()}]`)}render(){this._height=this._width=void 0,this._listeners.call("preRender",this,this),this._mandatoryAttributesList&&this._mandatoryAttributesList.forEach((t=>this.checkForMandatoryAttributes(t)));const t=this._doRender();return this._legend&&this._legend.render(),this._activateRenderlets("postRender"),t}_makeKeyboardAccessible(t,...e){const n=this._svg.selectAll(".dc-tabbable").attr("tabindex",0);t&&n.on("keydown",P.eventHandler(((n,r)=>{13===r.keyCode&&"object"==typeof n&&t.call(this,n,...e),32===r.keyCode&&"object"==typeof n&&(t.call(this,n,...e),r.preventDefault())})))}_activateRenderlets(t){this._listeners.call("pretransition",this,this),this.transitionDuration()>0&&this._svg?this._svg.transition().duration(this.transitionDuration()).delay(this.transitionDelay()).on("end",(()=>{this._listeners.call("renderlet",this,this),t&&this._listeners.call(t,this,this)})):(this._listeners.call("renderlet",this,this),t&&this._listeners.call(t,this,this))}redraw(){this.sizeSvg(),this._listeners.call("preRedraw",this,this);const t=this._doRedraw();return this._legend&&this._legend.render(),this._activateRenderlets("postRedraw"),t}commitHandler(t){return arguments.length?(this._commitHandler=t,this):this._commitHandler}redrawGroup(){return this._commitHandler?this._commitHandler(!1,((t,e)=>{t?console.log(t):U(this.chartGroup())})):U(this.chartGroup()),this}renderGroup(){return this._commitHandler?this._commitHandler(!1,((t,e)=>{t?console.log(t):G(this.chartGroup())})):G(this.chartGroup()),this}_invokeFilteredListener(t){void 0!==t&&this._listeners.call("filtered",this,this,t)}_invokeZoomedListener(){this._listeners.call("zoomed",this,this)}hasFilterHandler(t){return arguments.length?(this._hasFilterHandler=t,this):this._hasFilterHandler}hasFilter(filter){return this._hasFilterHandler(this._filters,filter)}removeFilterHandler(t){return arguments.length?(this._removeFilterHandler=t,this):this._removeFilterHandler}addFilterHandler(t){return arguments.length?(this._addFilterHandler=t,this):this._addFilterHandler}resetFilterHandler(t){return arguments.length?(this._resetFilterHandler=t,this):this._resetFilterHandler}applyFilters(t){if(this.dimension()&&this.dimension().filter){const e=this._filterHandler(this.dimension(),t);e&&(t=e)}return t}replaceFilter(filter){return this._filters=this._resetFilterHandler(this._filters),this.filter(filter),this}filter(filter){if(!arguments.length)return this._filters.length>0?this._filters[0]:null;let t=this._filters;return filter instanceof Array&&filter[0]instanceof Array&&!filter.isFiltered?filter[0].forEach((e=>{t=this._hasFilterHandler(t,e)?this._removeFilterHandler(t,e):this._addFilterHandler(t,e)})):t=null===filter?this._resetFilterHandler(t):this._hasFilterHandler(t,filter)?this._removeFilterHandler(t,filter):this._addFilterHandler(t,filter),this._filters=this.applyFilters(t),this._invokeFilteredListener(filter),null!==this._root&&this.hasFilter()?this.turnOnControls():this.turnOffControls(),this}filters(){return this._filters}highlightSelected(t){o.select(t).classed(E.SELECTED_CLASS,!0),o.select(t).classed(E.DESELECTED_CLASS,!1)}fadeDeselected(t){o.select(t).classed(E.SELECTED_CLASS,!1),o.select(t).classed(E.DESELECTED_CLASS,!0)}resetHighlight(t){o.select(t).classed(E.SELECTED_CLASS,!1),o.select(t).classed(E.DESELECTED_CLASS,!1)}onClick(t){const filter=this.keyAccessor()(t);K.trigger((()=>{this.filter(filter),this.redrawGroup()}))}filterHandler(t){return arguments.length?(this._filterHandler=t,this):this._filterHandler}_doRender(){return this}_doRedraw(){return this}legendables(){return[]}legendHighlight(){}legendReset(){}legendToggle(){}isLegendableHidden(){return!1}keyAccessor(t){return arguments.length?(this._keyAccessor=t,this):this._keyAccessor}valueAccessor(t){return arguments.length?(this._valueAccessor=t,this):this._valueAccessor}label(t,e){return arguments.length?(this._label=t,(void 0===e||e)&&(this._renderLabel=!0),this):this._label}renderLabel(t){return arguments.length?(this._renderLabel=t,this):this._renderLabel}title(t){return arguments.length?(this._title=t,this):this._title}renderTitle(t){return arguments.length?(this._renderTitle=t,this):this._renderTitle}chartGroup(t){return arguments.length?(this._isChild||F(this,this._chartGroup),this._chartGroup=t,this._isChild||B(this,this._chartGroup),this):this._chartGroup}expireCache(){return this}legend(legend){return arguments.length?(this._legend=legend,this._legend.parent(this),this):this._legend}chartID(){return this.__dcFlag__}options(t){const e=["anchor","group","xAxisLabel","yAxisLabel","stack","title","point","getColor","overlayGeoJson"];for(const n in t)"function"==typeof this[n]?t[n]instanceof Array&&-1!==e.indexOf(n)?this[n].apply(this,t[n]):this[n].call(this,t[n]):D.debug(`Not a valid option setter name: ${n}`);return this}on(t,e){return this._listeners.on(t,e),this}renderlet(t){return D.warnOnce('chart.renderlet has been deprecated. Please use chart.on("renderlet.<renderletKey>", renderletFunction)'),this.on(`renderlet.${et.uniqueId()}`,t),this}}const _t=()=>new ft,gt=t=>class extends t{constructor(){super(),this._colors=h.scaleOrdinal(N.defaultColors()),this._colorAccessor=t=>this.keyAccessor()(t),this._colorCalculator=void 0;{const t=this;t.getColor=function(e,i){return t._colorCalculator?t._colorCalculator.call(this,e,i):t._colors(t._colorAccessor.call(this,e,i))}}}calculateColorDomain(){const t=[l.min(this.data(),this.colorAccessor()),l.max(this.data(),this.colorAccessor())];return this._colors.domain(t),this}colors(t){return arguments.length?(this._colors=t instanceof Array?h.scaleQuantize().range(t):"function"==typeof t?t:et.constant(t),this):this._colors}ordinalColors(t){return this.colors(h.scaleOrdinal().range(t))}linearColors(t){return this.colors(h.scaleLinear().range(t).interpolate(f.interpolateHcl))}colorAccessor(t){return arguments.length?(this._colorAccessor=t,this):this._colorAccessor}colorDomain(t){return arguments.length?(this._colors.domain(t),this):this._colors.domain()}colorCalculator(t){return arguments.length?(this._colorCalculator=t,this):this._colorCalculator||this.getColor}},pt=t=>class extends(gt(t)){constructor(){super(),this._maxBubbleRelativeSize=.3,this._minRadiusWithLabel=10,this._sortBubbleSize=!1,this._elasticRadius=!1,this._excludeElasticZero=!0,this.BUBBLE_NODE_CLASS="node",this.BUBBLE_CLASS="bubble",this.MIN_RADIUS=10,this.renderLabel(!0),this.data((t=>{const data=t.all();if(this._keyboardAccessible&&data.sort(((a,b)=>l.ascending(this.keyAccessor()(a),this.keyAccessor()(b)))),this._sortBubbleSize){const t=this.radiusValueAccessor();data.sort(((a,b)=>l.descending(t(a),t(b))))}return data})),this._r=h.scaleLinear().domain([0,100])}_rValueAccessor(t){return t.r}r(t){return arguments.length?(this._r=t,this):this._r}elasticRadius(t){return arguments.length?(this._elasticRadius=t,this):this._elasticRadius}calculateRadiusDomain(){this._elasticRadius&&this.r().domain([this.rMin(),this.rMax()])}radiusValueAccessor(t){return arguments.length?(this._rValueAccessor=t,this):this._rValueAccessor}rMin(){let t=this.data().map(this.radiusValueAccessor());return this._excludeElasticZero&&(t=t.filter((t=>t>0))),l.min(t)}rMax(){return l.max(this.data(),(t=>this.radiusValueAccessor()(t)))}bubbleR(t){const e=this.radiusValueAccessor()(t);let n=this.r()(e);return(isNaN(n)||e<=0)&&(n=0),n}_labelFunction(t){return this.label()(t)}_shouldLabel(t){return this.bubbleR(t)>this._minRadiusWithLabel}_labelOpacity(t){return this._shouldLabel(t)?1:0}_labelPointerEvent(t){return this._shouldLabel(t)?"all":"none"}_doRenderLabel(t){if(this.renderLabel()){let label=t.select("text");label.empty()&&(label=t.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",P.eventHandler((t=>this.onClick(t))))),label.attr("opacity",0).attr("pointer-events",(t=>this._labelPointerEvent(t))).text((t=>this._labelFunction(t))),V(label,this.transitionDuration(),this.transitionDelay()).attr("opacity",(t=>this._labelOpacity(t)))}}doUpdateLabels(t){if(this.renderLabel()){const e=t.select("text").attr("pointer-events",(t=>this._labelPointerEvent(t))).text((t=>this._labelFunction(t)));V(e,this.transitionDuration(),this.transitionDelay()).attr("opacity",(t=>this._labelOpacity(t)))}}_titleFunction(t){return this.title()(t)}_doRenderTitles(g){this.renderTitle()&&g.select("title").empty()&&g.append("title").text((t=>this._titleFunction(t)))}doUpdateTitles(g){this.renderTitle()&&g.select("title").text((t=>this._titleFunction(t)))}sortBubbleSize(t){return arguments.length?(this._sortBubbleSize=t,this):this._sortBubbleSize}minRadius(t){return arguments.length?(this.MIN_RADIUS=t,this):this.MIN_RADIUS}minRadiusWithLabel(t){return arguments.length?(this._minRadiusWithLabel=t,this):this._minRadiusWithLabel}maxBubbleRelativeSize(t){return arguments.length?(this._maxBubbleRelativeSize=t,this):this._maxBubbleRelativeSize}excludeElasticZero(t){return arguments.length?(this._excludeElasticZero=t,this):this._excludeElasticZero}fadeDeselectedArea(t){if(this.hasFilter()){const t=this;this.selectAll(`g.${t.BUBBLE_NODE_CLASS}`).each((function(e){t.isSelectedNode(e)?t.highlightSelected(this):t.fadeDeselected(this)}))}else{const t=this;this.selectAll(`g.${t.BUBBLE_NODE_CLASS}`).each((function(){t.resetHighlight(this)}))}}isSelectedNode(t){return this.hasFilter(t.key)}onClick(t){const filter=t.key;K.trigger((()=>{this.filter(filter),this.redrawGroup()}))}},yt=t=>class extends t{constructor(){super(),this._cap=1/0,this._takeFront=!0,this._othersLabel="Others",this._othersGrouper=(t,e)=>{const n=l.sum(e,this.valueAccessor()),r=e.map(this.keyAccessor());return n>0?t.concat([{others:r,key:this.othersLabel(),value:n}]):t},this.ordering((t=>-t.value)),this.data((t=>{if(this._cap===1/0)return this._computeOrderedGroups(t.all());{let e,n=t.all();if(n=this._computeOrderedGroups(n),this._cap)if(this._takeFront)e=n.slice(this._cap),n=n.slice(0,this._cap);else{const t=Math.max(0,n.length-this._cap);e=n.slice(0,t),n=n.slice(t)}return this._othersGrouper?this._othersGrouper(n,e):n}}))}cappedKeyAccessor(t,i){return t.others?t.key:this.keyAccessor()(t,i)}cappedValueAccessor(t,i){return t.others?t.value:this.valueAccessor()(t,i)}cap(t){return arguments.length?(this._cap=t,this):this._cap}takeFront(t){return arguments.length?(this._takeFront=t,this):this._takeFront}othersLabel(label){return arguments.length?(this._othersLabel=label,this):this._othersLabel}othersGrouper(t){return arguments.length?(this._othersGrouper=t,this):this._othersGrouper}onClick(t){t.others&&this.filter([t.others]),super.onClick(t)}};class mt extends ft{constructor(){super(),this._margin={top:10,right:50,bottom:30,left:30}}margins(t){return arguments.length?(this._margin=t,this):this._margin}effectiveWidth(){return this.width()-this.margins().left-this.margins().right}effectiveHeight(){return this.height()-this.margins().top-this.margins().bottom}}const bt="grid-line",vt="horizontal",xt="vertical",wt="y-axis-label",At="x-axis-label",Mt="custom-brush-handle",Ct=12;class St extends(gt(mt)){constructor(){super(),this.colors(h.scaleOrdinal(d.schemeCategory10)),this._mandatoryAttributes().push("x"),this._parent=void 0,this._g=void 0,this._chartBodyG=void 0,this._x=void 0,this._origX=void 0,this._xOriginalDomain=void 0,this._xAxis=null,this._xUnits=at.integers,this._xAxisPadding=0,this._xAxisPaddingUnit=n.timeDay,this._xElasticity=!1,this._xAxisLabel=void 0,this._xAxisLabelPadding=0,this._lastXDomain=void 0,this._y=void 0,this._yAxis=null,this._yAxisPadding=0,this._yElasticity=!1,this._yAxisLabel=void 0,this._yAxisLabelPadding=0,this._brush=m.brushX(),this._gBrush=void 0,this._brushOn=!0,this._parentBrushOn=!1,this._round=void 0,this._ignoreBrushEvents=!1,this._renderHorizontalGridLine=!1,this._renderVerticalGridLine=!1,this._resizing=!1,this._unitCount=void 0,this._zoomScale=[1,1/0],this._zoomOutRestrict=!0,this._zoom=y.zoom().on("zoom",P.eventHandler(((t,e)=>this._onZoom(e)))),this._nullZoom=y.zoom().on("zoom",null),this._hasBeenMouseZoomable=!1,this._ignoreZoomEvents=!1,this._rangeChart=void 0,this._focusChart=void 0,this._mouseZoomable=!1,this._clipPadding=0,this._fOuterRangeBandPadding=.5,this._fRangeBandPadding=0,this._useRightYAxis=!1,this._useTopXAxis=!1}rescale(){return this._unitCount=void 0,this._resizing=!0,this}resizing(t){return arguments.length?(this._resizing=t,this):this._resizing}rangeChart(t){return arguments.length?(this._rangeChart=t,this._rangeChart.focusChart(this),this):this._rangeChart}zoomScale(t){return arguments.length?(this._zoomScale=t,this):this._zoomScale}zoomOutRestrict(t){return arguments.length?(this._zoomOutRestrict=t,this):this._zoomOutRestrict}_generateG(t){this._parent=void 0===t?this.svg():t;const e=window.location.href.split("#")[0];return this._g=this._parent.append("g"),this._chartBodyG=this._g.append("g").attr("class","chart-body").attr("transform",`translate(${this.margins().left}, ${this.margins().top})`).attr("clip-path",`url(${e}#${this._getClipPathId()})`),this._g}g(t){return arguments.length?(this._g=t,this):this._g}mouseZoomable(t){return arguments.length?(this._mouseZoomable=t,this):this._mouseZoomable}chartBodyG(t){return arguments.length?(this._chartBodyG=t,this):this._chartBodyG}x(t){return arguments.length?(this._x=t,this._xOriginalDomain=this._x.domain(),this.rescale(),this):this._x}xOriginalDomain(){return this._xOriginalDomain}xUnits(t){return arguments.length?(this._xUnits=t,this):this._xUnits}xAxis(t){return arguments.length?(this._xAxis=t,this):(this._xAxis||(this._xAxis=this._createXAxis()),this._xAxis)}elasticX(t){return arguments.length?(this._xElasticity=t,this):this._xElasticity}xAxisPadding(t){return arguments.length?(this._xAxisPadding=t,this):this._xAxisPadding}xAxisPaddingUnit(t){return arguments.length?(this._xAxisPaddingUnit=t,this):this._xAxisPaddingUnit}xUnitCount(){return void 0===this._unitCount&&(this.isOrdinal()?this._unitCount=this.x().domain().length:(this._unitCount=this.xUnits()(this.x().domain()[0],this.x().domain()[1]),this._unitCount instanceof Array&&(this._unitCount=this._unitCount.length))),this._unitCount}useRightYAxis(t){return arguments.length?(this._useRightYAxis!==t&&this._yAxis&&D.warn("Value of useRightYAxis has been altered, after yAxis was created. You might get unexpected yAxis behavior. Make calls to useRightYAxis sooner in your chart creation process."),this._useRightYAxis=t,this):this._useRightYAxis}useTopXAxis(t){return arguments.length?(this._useTopXAxis!==t&&this._xAxis&&D.warn("Value of useTopXAxis has been altered, after xAxis was created. You might get unexpected yAxis behavior. Make calls to useTopXAxis sooner in your chart creation process."),this._useTopXAxis=t,this):this._useTopXAxis}isOrdinal(){return this.xUnits()===at.ordinal}_useOuterPadding(){return!0}_ordinalXDomain(){return this._computeOrderedGroups(this.data()).map(this.keyAccessor())}_createXAxis(){return this._useTopXAxis?_.axisTop():_.axisBottom()}_prepareXAxis(g,t){this.isOrdinal()?(this._x.bandwidth||(D.warn("For compatibility with d3v4+, dc.js d3.0 ordinal bar/line/bubble charts need d3.scaleBand() for the x scale, instead of d3.scaleOrdinal(). Replacing .x() with a d3.scaleBand with the same domain - make the same change in your code to avoid this warning!"),this._x=h.scaleBand().domain(this._x.domain())),(this.elasticX()||0===this._x.domain().length)&&this._x.domain(this._ordinalXDomain())):this.elasticX()&&this._x.domain([this.xAxisMin(),this.xAxisMax()]);const e=this._x.domain();!t&&et.arraysEqual(this._lastXDomain,e)||this.rescale(),this._lastXDomain=e,this.isOrdinal()?this._x.range([0,this.xAxisLength()]).paddingInner(this._fRangeBandPadding).paddingOuter(this._useOuterPadding()?this._fOuterRangeBandPadding:0):this._x.range([0,this.xAxisLength()]),this._xAxis||(this._xAxis=this._createXAxis()),this._xAxis=this._xAxis.scale(this.x()),this._renderVerticalGridLines(g)}renderXAxis(g){let t=g.select("g.x");t.empty()&&(t=g.append("g").attr("class","axis x").attr("transform",`translate(${this.margins().left},${this._xAxisY()})`));let e=g.select(`text.${At}`);const n=this._useTopXAxis?this._xAxisLabelPadding:this.height()-this._xAxisLabelPadding;e.empty()&&this.xAxisLabel()&&(e=g.append("text").attr("class",At).attr("transform",`translate(${this.margins().left+this.xAxisLength()/2},${n})`).attr("text-anchor","middle")),this.xAxisLabel()&&e.text()!==this.xAxisLabel()&&e.text(this.xAxisLabel()),V(t,this.transitionDuration(),this.transitionDelay()).attr("transform",`translate(${this.margins().left},${this._xAxisY()})`).call(this._xAxis),V(e,this.transitionDuration(),this.transitionDelay()).attr("transform",`translate(${this.margins().left+this.xAxisLength()/2},${n})`)}_renderVerticalGridLines(g){let t=g.select(`g.${xt}`);if(this._renderVerticalGridLine){t.empty()&&(t=g.insert("g",":first-child").attr("class",`${bt} ${xt}`).attr("transform",`translate(${this.margins().left},${this.margins().top})`));const e=this._xAxis.tickValues()?this._xAxis.tickValues():"function"==typeof this._x.ticks?this._x.ticks.apply(this._x,this._xAxis.tickArguments()):this._x.domain(),n=t.selectAll("line").data(e),r=n.enter().append("line").attr("x1",(t=>this._x(t))).attr("y1",this._xAxisY()-this.margins().top).attr("x2",(t=>this._x(t))).attr("y2",0).attr("opacity",0);V(r,this.transitionDuration(),this.transitionDelay()).attr("opacity",.5),V(n,this.transitionDuration(),this.transitionDelay()).attr("x1",(t=>this._x(t))).attr("y1",this._xAxisY()-this.margins().top).attr("x2",(t=>this._x(t))).attr("y2",0),n.exit().remove()}else t.selectAll("line").remove()}_xAxisY(){return this._useTopXAxis?this.margins().top:this.height()-this.margins().bottom}xAxisLength(){return this.effectiveWidth()}xAxisLabel(t,e){return arguments.length?(this._xAxisLabel=t,this.margins().bottom-=this._xAxisLabelPadding,this._xAxisLabelPadding=void 0===e?Ct:e,this.margins().bottom+=this._xAxisLabelPadding,this):this._xAxisLabel}_createYAxis(){return this._useRightYAxis?_.axisRight():_.axisLeft()}_prepareYAxis(g){if(void 0===this._y||this.elasticY()){void 0===this._y&&(this._y=h.scaleLinear());const t=this.yAxisMin()||0,e=this.yAxisMax()||0;this._y.domain([t,e]).rangeRound([this.yAxisHeight(),0])}this._y.range([this.yAxisHeight(),0]),this._yAxis||(this._yAxis=this._createYAxis()),this._yAxis.scale(this._y),this._renderHorizontalGridLinesForAxis(g,this._y,this._yAxis)}renderYAxisLabel(t,text,e,n){n=n||this._yAxisLabelPadding;let r=this.g().select(`text.${wt}.${t}-label`);const o=this.margins().top+this.yAxisHeight()/2;r.empty()&&text&&(r=this.g().append("text").attr("transform",`translate(${n},${o}),rotate(${e})`).attr("class",`${wt} ${t}-label`).attr("text-anchor","middle").text(text)),text&&r.text()!==text&&r.text(text),V(r,this.transitionDuration(),this.transitionDelay()).attr("transform",`translate(${n},${o}),rotate(${e})`)}renderYAxisAt(t,e,n){let r=this.g().select(`g.${t}`);r.empty()&&(r=this.g().append("g").attr("class",`axis ${t}`).attr("transform",`translate(${n},${this.margins().top})`)),V(r,this.transitionDuration(),this.transitionDelay()).attr("transform",`translate(${n},${this.margins().top})`).call(e)}renderYAxis(){const t=this._useRightYAxis?this.width()-this.margins().right:this._yAxisX();this.renderYAxisAt("y",this._yAxis,t);const e=this._useRightYAxis?this.width()-this._yAxisLabelPadding:this._yAxisLabelPadding,n=this._useRightYAxis?90:-90;this.renderYAxisLabel("y",this.yAxisLabel(),n,e)}_renderHorizontalGridLinesForAxis(g,t,e){let n=g.select(`g.${vt}`);if(this._renderHorizontalGridLine){const r=e.tickValues()?e.tickValues():t.ticks?t.ticks.apply(t,e.tickArguments()):t.domain();n.empty()&&(n=g.insert("g",":first-child").attr("class",`${bt} ${vt}`).attr("transform",`translate(${this.margins().left},${this.margins().top})`));const o=n.selectAll("line").data(r),c=o.enter().append("line").attr("x1",1).attr("y1",(e=>t(e))).attr("x2",this.xAxisLength()).attr("y2",(e=>t(e))).attr("opacity",0);V(c,this.transitionDuration(),this.transitionDelay()).attr("opacity",.5),V(o,this.transitionDuration(),this.transitionDelay()).attr("x1",1).attr("y1",(e=>t(e))).attr("x2",this.xAxisLength()).attr("y2",(e=>t(e))),o.exit().remove()}else n.selectAll("line").remove()}_yAxisX(){return this.useRightYAxis()?this.width()-this.margins().right:this.margins().left}yAxisLabel(t,e){return arguments.length?(this._yAxisLabel=t,this.margins().left-=this._yAxisLabelPadding,this._yAxisLabelPadding=void 0===e?Ct:e,this.margins().left+=this._yAxisLabelPadding,this):this._yAxisLabel}y(t){return arguments.length?(this._y=t,this.rescale(),this):this._y}yAxis(t){return arguments.length?(this._yAxis=t,this):(this._yAxis||(this._yAxis=this._createYAxis()),this._yAxis)}elasticY(t){return arguments.length?(this._yElasticity=t,this):this._yElasticity}renderHorizontalGridLines(t){return arguments.length?(this._renderHorizontalGridLine=t,this):this._renderHorizontalGridLine}renderVerticalGridLines(t){return arguments.length?(this._renderVerticalGridLine=t,this):this._renderVerticalGridLine}xAxisMin(){const t=l.min(this.data(),(t=>this.keyAccessor()(t)));return et.subtract(t,this._xAxisPadding,this._xAxisPaddingUnit)}xAxisMax(){const t=l.max(this.data(),(t=>this.keyAccessor()(t)));return et.add(t,this._xAxisPadding,this._xAxisPaddingUnit)}yAxisMin(){const t=l.min(this.data(),(t=>this.valueAccessor()(t)));return et.subtract(t,this._yAxisPadding)}yAxisMax(){const t=l.max(this.data(),(t=>this.valueAccessor()(t)));return et.add(t,this._yAxisPadding)}yAxisPadding(t){return arguments.length?(this._yAxisPadding=t,this):this._yAxisPadding}yAxisHeight(){return this.effectiveHeight()}round(t){return arguments.length?(this._round=t,this):this._round}_rangeBandPadding(t){return arguments.length?(this._fRangeBandPadding=t,this):this._fRangeBandPadding}_outerRangeBandPadding(t){return arguments.length?(this._fOuterRangeBandPadding=t,this):this._fOuterRangeBandPadding}filter(t){return arguments.length?(super.filter(t),this.redrawBrush(t,!1),this):super.filter()}brush(t){return arguments.length?(this._brush=t,this):this._brush}renderBrush(g,t){this._brushOn&&(this._brush.on("start brush end",P.eventHandler(((t,e)=>this._brushing(e)))),this._gBrush=g.append("g").attr("class","brush").attr("transform",`translate(${this.margins().left},${this.margins().top})`),this.setBrushExtents(),this.createBrushHandlePaths(this._gBrush,t),this.redrawBrush(this.filter(),t))}createBrushHandlePaths(t){let e=t.selectAll(`path.${Mt}`).data([{type:"w"},{type:"e"}]);e=e.enter().append("path").attr("class",Mt).merge(e),e.attr("d",(t=>this.resizeHandlePath(t)))}extendBrush(t){return t&&this.round()&&(t[0]=this.round()(t[0]),t[1]=this.round()(t[1])),t}brushIsEmpty(t){return!t||t[1]<=t[0]}_brushing(t){if(this._ignoreBrushEvents)return;let e=t.selection;e&&(e=e.map(this.x().invert)),e=this.extendBrush(e),this.redrawBrush(e,!1);const n=this.brushIsEmpty(e)?null:J.RangedFilter(e[0],e[1]);K.trigger((()=>{this.applyBrushSelection(n)}),E.EVENT_DELAY)}applyBrushSelection(t){this.replaceFilter(t),this.redrawGroup()}_withoutBrushEvents(t){const e=this._ignoreBrushEvents;this._ignoreBrushEvents=!0;try{t()}finally{this._ignoreBrushEvents=e}}setBrushExtents(t){this._withoutBrushEvents((()=>{this._brush.extent([[0,0],[this.effectiveWidth(),this.effectiveHeight()]])})),this._gBrush.call(this._brush)}redrawBrush(t,e){if(this._brushOn&&this._gBrush)if(this._resizing&&this.setBrushExtents(e),t){const n=[this._x(t[0]),this._x(t[1])],r=X(e,this.transitionDuration(),this.transitionDelay())(this._gBrush);this._withoutBrushEvents((()=>{r.call(this._brush.move,n)})),r.selectAll(`path.${Mt}`).attr("display",null).attr("transform",((e,i)=>`translate(${this._x(t[i])}, 0)`)).attr("d",(t=>this.resizeHandlePath(t)))}else this._withoutBrushEvents((()=>{this._gBrush.call(this._brush.move,null)})),this._gBrush.selectAll(`path.${Mt}`).attr("display","none");this.fadeDeselectedArea(t)}fadeDeselectedArea(t){}resizeHandlePath(t){const e=+("e"===(t=t.type)),n=e?1:-1,r=this.effectiveHeight()/3;return`M${.5*n},${r}A6,6 0 0 ${e} ${6.5*n},${r+6}V${2*r-6}A6,6 0 0 ${e} ${.5*n},${2*r}ZM${2.5*n},${r+8}V${2*r-8}M${4.5*n},${r+8}V${2*r-8}`}_getClipPathId(){return`${this.anchorName().replace(/[ .#=\[\]"]/g,"-")}-clip`}clipPadding(t){return arguments.length?(this._clipPadding=t,this):this._clipPadding}_generateClipPath(){const defs=et.appendOrSelect(this._parent,"defs"),t=this._getClipPathId(),e=et.appendOrSelect(defs,`#${t}`,"clipPath").attr("id",t),n=2*this._clipPadding;et.appendOrSelect(e,"rect").attr("width",this.xAxisLength()+n).attr("height",this.yAxisHeight()+n).attr("transform",`translate(-${this._clipPadding}, -${this._clipPadding})`)}_preprocessData(){}_doRender(){return this.resetSvg(),this._preprocessData(),this._generateG(),this._generateClipPath(),this._drawChart(!0),this._configureMouseZoom(),this}_doRedraw(){return this._preprocessData(),this._drawChart(!1),this._generateClipPath(),this}_drawChart(t){this.isOrdinal()&&(this._brushOn=!1),this._prepareXAxis(this.g(),t),this._prepareYAxis(this.g()),this.plotData(),(this.elasticX()||this._resizing||t)&&this.renderXAxis(this.g()),(this.elasticY()||this._resizing||t)&&this.renderYAxis(this.g()),t?this.renderBrush(this.g(),!1):this.redrawBrush(this.filter(),this._resizing),this.fadeDeselectedArea(this.filter()),this.resizing(!1)}_configureMouseZoom(){this._origX=this._x.copy(),this._mouseZoomable?this._enableMouseZoom():this._hasBeenMouseZoomable&&this._disableMouseZoom()}_enableMouseZoom(){this._hasBeenMouseZoomable=!0;const t=[[0,0],[this.effectiveWidth(),this.effectiveHeight()]];if(this._zoom.scaleExtent(this._zoomScale).extent(t).duration(this.transitionDuration()),this._zoomOutRestrict){const e=Math.max(this._zoomScale[0],1);this._zoom.translateExtent(t).scaleExtent([e,this._zoomScale[1]])}this.root().call(this._zoom),this._updateD3zoomTransform()}_disableMouseZoom(){this.root().call(this._nullZoom)}_zoomHandler(t,e){let n;this._hasRangeSelected(t)?(this.x().domain(t),n=J.RangedFilter(t[0],t[1])):(this.x().domain(this._xOriginalDomain),n=null),this.replaceFilter(n),this.rescale(),this.redraw(),e||(this._rangeChart&&!et.arraysEqual(this.filter(),this._rangeChart.filter())&&K.trigger((()=>{this._rangeChart.replaceFilter(n),this._rangeChart.redraw()})),this._invokeZoomedListener(),K.trigger((()=>{this.redrawGroup()}),E.EVENT_DELAY))}_domainToZoomTransform(t,e,n){const r=(e[1]-e[0])/(t[1]-t[0]),o=-1*n(t[0]);return y.zoomIdentity.scale(r).translate(o,0)}_updateD3zoomTransform(){this._zoom&&this._withoutZoomEvents((()=>{this._zoom.transform(this.root(),this._domainToZoomTransform(this.x().domain(),this._xOriginalDomain,this._origX))}))}_withoutZoomEvents(t){const e=this._ignoreZoomEvents;this._ignoreZoomEvents=!0;try{t()}finally{this._ignoreZoomEvents=e}}_onZoom(t){if(this._ignoreZoomEvents)return;const e=t.transform.rescaleX(this._origX).domain();this.focus(e,!1)}_checkExtents(t,e){return t&&2===t.length&&e&&2===e.length?((t[0]>e[1]||t[1]<e[0])&&console.warn("Could not intersect extents, will reset"),[t[0]>e[0]?t[0]:e[0],t[1]<e[1]?t[1]:e[1]]):t}focus(t,e){this._zoomOutRestrict&&(t=this._checkExtents(t,this._xOriginalDomain),this._rangeChart&&(t=this._checkExtents(t,this._rangeChart.x().domain()))),this._zoomHandler(t,e),this._updateD3zoomTransform()}refocused(){return!et.arraysEqual(this.x().domain(),this._xOriginalDomain)}focusChart(t){return arguments.length?(this._focusChart=t,this.on("filtered.dcjs-range-chart",(t=>{t.filter()?et.arraysEqual(t.filter(),this._focusChart.filter())||K.trigger((()=>{this._focusChart.focus(t.filter(),!0)})):K.trigger((()=>{this._focusChart.x().domain(this._focusChart.xOriginalDomain(),!0)}))})),this):this._focusChart}brushOn(t){return arguments.length?(this._brushOn=t,this):this._brushOn}parentBrushOn(t){return arguments.length?(this._parentBrushOn=t,this):this._parentBrushOn}gBrush(){return this._gBrush}_hasRangeSelected(t){return t instanceof Array&&t.length>1}}const kt=function(){let t=1,e=1,n=0;const r=0;let c=null,f=Number,d=Tt,_=Et,y=null,m=!1;const x=3;let w=.3,A=.8,M=!1,C=!0,S=!1;function k(g){g.each((function(data,v){data=data.map(f).sort(l.ascending);const k=o.select(this),T=data.length;let E,R;if(0===T)return;const D=data.quartiles=_(data),L=d&&d.call(this,data,v),N=L&&L.map((t=>data[t])),P=L?l.range(0,L[0]).concat(l.range(L[1]+1,T)):l.range(T);C?(E=data[0],R=data[T-1]):(E=data[L[0]],R=data[L[1]]);const O=l.range(L[0],L[1]+1),z=h.scaleLinear().domain(c&&c.call(this,data,v)||[E,R]).range([e,0]),B=this.__chart__||h.scaleLinear().domain([0,1/0]).range(z.range());this.__chart__=z;const F=k.selectAll("line.center").data(N?[N]:[]);F.enter().insert("line","rect").attr("class","center").attr("x1",t/2).attr("y1",(t=>B(t[0]))).attr("x2",t/2).attr("y2",(t=>B(t[1]))).style("opacity",1e-6).transition().duration(n).delay(r).style("opacity",1).attr("y1",(t=>z(t[0]))).attr("y2",(t=>z(t[1]))),F.transition().duration(n).delay(r).style("opacity",1).attr("x1",t/2).attr("x2",t/2).attr("y1",(t=>z(t[0]))).attr("y2",(t=>z(t[1]))),F.exit().transition().duration(n).delay(r).style("opacity",1e-6).attr("y1",(t=>z(t[0]))).attr("y2",(t=>z(t[1]))).remove();const H=k.selectAll("rect.box").data([D]);H.enter().append("rect").attr("class","box").attr("x",0).attr("y",(t=>B(t[2]))).attr("width",t).attr("height",(t=>B(t[0])-B(t[2]))).style("fill-opacity",m?.1:1).transition().duration(n).delay(r).attr("y",(t=>z(t[2]))).attr("height",(t=>z(t[0])-z(t[2]))),H.transition().duration(n).delay(r).attr("width",t).attr("y",(t=>z(t[2]))).attr("height",(t=>z(t[0])-z(t[2])));const $=k.selectAll("line.median").data([D[1]]);$.enter().append("line").attr("class","median").attr("x1",0).attr("y1",B).attr("x2",t).attr("y2",B).transition().duration(n).delay(r).attr("y1",z).attr("y2",z),$.transition().duration(n).delay(r).attr("x1",0).attr("x2",t).attr("y1",z).attr("y2",z);const Y=k.selectAll("line.whisker").data(N||[]);if(Y.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",B).attr("x2",t).attr("y2",B).style("opacity",1e-6).transition().duration(n).delay(r).attr("y1",z).attr("y2",z).style("opacity",1),Y.transition().duration(n).delay(r).attr("x1",0).attr("x2",t).attr("y1",z).attr("y2",z).style("opacity",1),Y.exit().transition().duration(n).delay(r).attr("y1",z).attr("y2",z).style("opacity",1e-6).remove(),C){const e=S?"outlierBold":"outlier",o=S?3:5,c=S?function(){return Math.floor(Math.random()*(t*A)+1+(t-t*A)/2)}:function(){return t/2},l=k.selectAll(`circle.${e}`).data(P,Number);l.enter().insert("circle","text").attr("class",e).attr("r",o).attr("cx",c).attr("cy",(i=>B(data[i]))).style("opacity",1e-6).transition().duration(n).delay(r).attr("cy",(i=>z(data[i]))).style("opacity",.6),M&&(l.selectAll("title").remove(),l.append("title").text((i=>data[i]))),l.transition().duration(n).delay(r).attr("cx",c).attr("cy",(i=>z(data[i]))).style("opacity",.6),l.exit().transition().duration(n).delay(r).attr("cy",0).style("opacity",1e-6).remove()}if(m){const e=k.selectAll("circle.data").data(O);e.enter().insert("circle","text").attr("class","data").attr("r",x).attr("cx",(()=>Math.floor(Math.random()*(t*A)+1+(t-t*A)/2))).attr("cy",(i=>B(data[i]))).style("opacity",1e-6).transition().duration(n).delay(r).attr("cy",(i=>z(data[i]))).style("opacity",w),M&&(e.selectAll("title").remove(),e.append("title").text((i=>data[i]))),e.transition().duration(n).delay(r).attr("cx",(()=>Math.floor(Math.random()*(t*A)+1+(t-t*A)/2))).attr("cy",(i=>z(data[i]))).style("opacity",w),e.exit().transition().duration(n).delay(r).attr("cy",0).style("opacity",1e-6).remove()}const I=y||z.tickFormat(8),G=k.selectAll("text.box").data(D);G.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",((t,i)=>1&i?6:-6)).attr("x",((e,i)=>1&i?t:0)).attr("y",B).attr("text-anchor",((t,i)=>1&i?"start":"end")).text(I).transition().duration(n).delay(r).attr("y",z),G.transition().duration(n).delay(r).text(I).attr("x",((e,i)=>1&i?t:0)).attr("y",z);const U=k.selectAll("text.whisker").data(N||[]);U.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",t).attr("y",B).text(I).style("opacity",1e-6).transition().duration(n).delay(r).attr("y",z).style("opacity",1),U.transition().duration(n).delay(r).text(I).attr("x",t).attr("y",z).style("opacity",1),U.exit().transition().duration(n).delay(r).attr("y",z).style("opacity",1e-6).remove(),delete data.quartiles})),v.timerFlush()}return k.width=function(e){return arguments.length?(t=e,k):t},k.height=function(t){return arguments.length?(e=t,k):e},k.tickFormat=function(t){return arguments.length?(y=t,k):y},k.showOutliers=function(t){return arguments.length?(C=t,k):C},k.boldOutlier=function(t){return arguments.length?(S=t,k):S},k.renderDataPoints=function(t){return arguments.length?(m=t,k):m},k.renderTitle=function(t){return arguments.length?(M=t,k):M},k.dataOpacity=function(t){return arguments.length?(w=t,k):w},k.dataWidthPortion=function(t){return arguments.length?(A=t,k):A},k.duration=function(t){return arguments.length?(n=t,k):n},k.domain=function(t){return arguments.length?(c=null===t||"function"==typeof t?t:et.constant(t),k):c},k.value=function(t){return arguments.length?(f=t,k):f},k.whiskers=function(t){return arguments.length?(d=t,k):d},k.quartiles=function(t){return arguments.length?(_=t,k):_},k};function Tt(t){return[0,t.length-1]}function Et(t){return[l.quantile(t,.25),l.quantile(t,.5),l.quantile(t,.75)]}class Rt extends St{constructor(){super(),this._stackLayout=x.stack(),this._stack=[],this._titles={},this._hidableStacks=!1,this._evadeDomainFilter=!1,this.data((()=>{const t=this._stack.filter(this._visibility);if(!t.length)return[];t.forEach(((t,i)=>this._prepareValues(t,i)));const e=t[0].values.map(((e,i)=>{const col={x:e.x};return t.forEach((t=>{col[t.name]=t.values[i].y})),col})),n=t.map((t=>t.name));return this.stackLayout().keys(n)(e).forEach(((e,i)=>{e.forEach(((e,n)=>{t[i].values[n].y0=e[0],t[i].values[n].y1=e[1]}))})),t})),this.colorAccessor((function(t){return this.layer||this.name||t.name||t.layer}))}_prepareValues(t,e){const n=t.accessor||this.valueAccessor();t.name=String(t.name||e);const r=t.group.all().map(((e,i)=>({x:this.keyAccessor()(e,i),y:t.hidden?null:n(e,i),data:e,layer:t.name,hidden:t.hidden})));t.domainValues=r.filter((t=>this._domainFilter()(t))),t.values=this.evadeDomainFilter()?r:t.domainValues}_domainFilter(){if(!this.x())return et.constant(!0);const t=this.x().domain();return this.isOrdinal()||this.elasticX()?()=>!0:p=>p.x>=t[0]&&p.x<=t[t.length-1]}stack(t,e,n){if(!arguments.length)return this._stack;arguments.length<=2&&(n=e);const r={group:t};return"string"==typeof e&&(r.name=e),"function"==typeof n&&(r.accessor=n),this._stack.push(r),this}group(g,t,e){return arguments.length?(this._stack=[],this._titles={},this.stack(g,t),e&&this.valueAccessor(e),super.group(g,t)):super.group()}hidableStacks(t){return arguments.length?(this._hidableStacks=t,this):this._hidableStacks}_findLayerByName(t){const i=this._stack.map(tt("name")).indexOf(t);return this._stack[i]}hideStack(t){const e=this._findLayerByName(t);return e&&(e.hidden=!0),this}showStack(t){const e=this._findLayerByName(t);return e&&(e.hidden=!1),this}getValueAccessorByIndex(t){return this._stack[t].accessor||this.valueAccessor()}yAxisMin(){const t=l.min(this._flattenStack(),(p=>p.y<0?p.y+p.y0:p.y0));return et.subtract(t,this.yAxisPadding())}yAxisMax(){const t=l.max(this._flattenStack(),(p=>p.y>0?p.y+p.y0:p.y0));return et.add(t,this.yAxisPadding())}_flattenStack(){const t=this.data().map((t=>t.domainValues));return[].concat(...t)}xAxisMin(){const t=l.min(this._flattenStack(),tt("x"));return et.subtract(t,this.xAxisPadding(),this.xAxisPaddingUnit())}xAxisMax(){const t=l.max(this._flattenStack(),tt("x"));return et.add(t,this.xAxisPadding(),this.xAxisPaddingUnit())}title(t,e){return t?"function"==typeof t?super.title(t):t===this._groupName&&"function"==typeof e?super.title(e):"function"!=typeof e?this._titles[t]||super.title():(this._titles[t]=e,this):super.title()}stackLayout(t){return arguments.length?(this._stackLayout=t,this):this._stackLayout}evadeDomainFilter(t){return arguments.length?(this._evadeDomainFilter=t,this):this._evadeDomainFilter}_visibility(t){return!t.hidden}_ordinalXDomain(){const t=this._flattenStack().map(tt("data"));return this._computeOrderedGroups(t).map(this.keyAccessor())}legendables(){return this._stack.map(((t,i)=>({chart:this,name:t.name,hidden:t.hidden||!1,color:this.getColor.call(t,t.values,i)})))}isLegendableHidden(t){const e=this._findLayerByName(t.name);return!!e&&e.hidden}legendToggle(t){this._hidableStacks&&(this.isLegendableHidden(t)?this.showStack(t.name):this.hideStack(t.name),this.renderGroup())}}const Dt=1,Lt=2,Nt=3;class Pt extends Rt{constructor(t,e){super(),this._gap=Lt,this._centerBar=!1,this._alwaysUseRounding=!1,this._barWidth=void 0,this.label((t=>et.printSingleValue(t.y0+t.y)),!1),this.anchor(t,e)}outerPadding(t){return arguments.length?this._outerRangeBandPadding(t):this._outerRangeBandPadding()}rescale(){return super.rescale(),this._barWidth=void 0,this}render(){return this.round()&&this._centerBar&&!this._alwaysUseRounding&&D.warn("By default, brush rounding is disabled if bars are centered. See dc.js bar chart API documentation for details."),super.render()}plotData(){let t=this.chartBodyG().selectAll("g.stack").data(this.data());this._calculateBarWidth(),t=t.enter().append("g").attr("class",((t,i)=>`stack _${i}`)).merge(t);const e=t.size()-1;{const n=this;t.each((function(t,i){const r=o.select(this);n._renderBars(r,i,t),n.renderLabel()&&e===i&&n._renderLabels(r,i,t)}))}}_barHeight(t){return et.safeNumber(Math.abs(this.y()(t.y+t.y0)-this.y()(t.y0)))}_labelXPos(t){let e=this.x()(t.x);return this._centerBar||(e+=this._barWidth/2),this.isOrdinal()&&void 0!==this._gap&&(e+=this._gap/2),et.safeNumber(e)}_labelYPos(t){let e=this.y()(t.y+t.y0);return t.y<0&&(e-=this._barHeight(t)),et.safeNumber(e-Nt)}_renderLabels(t,e,data){const n=t.selectAll("text.barLabel").data(data.values,tt("x")),r=n.enter().append("text").attr("class","barLabel").attr("text-anchor","middle").attr("x",(t=>this._labelXPos(t))).attr("y",(t=>this._labelYPos(t))).merge(n);this.isOrdinal()&&(r.on("click",P.eventHandler((t=>this.onClick(t)))),r.attr("cursor","pointer")),V(r,this.transitionDuration(),this.transitionDelay()).attr("x",(t=>this._labelXPos(t))).attr("y",(t=>this._labelYPos(t))).text((t=>this.label()(t))),V(n.exit(),this.transitionDuration(),this.transitionDelay()).attr("height",0).remove()}_barXPos(t){let e=this.x()(t.x);return this._centerBar&&(e-=this._barWidth/2),this.isOrdinal()&&void 0!==this._gap&&(e+=this._gap/2),et.safeNumber(e)}_renderBars(t,e,data){const n=t.selectAll("rect.bar").data(data.values,tt("x")),r=n.enter().append("rect").attr("class","bar").classed("dc-tabbable",this._keyboardAccessible).attr("fill",tt("data",this.getColor)).attr("x",(t=>this._barXPos(t))).attr("y",this.yAxisHeight()).attr("height",0),o=r.merge(n);this.renderTitle()&&r.append("title").text(tt("data",this.title(data.name))),this.isOrdinal()&&o.on("click",P.eventHandler((t=>this.onClick(t)))),this._keyboardAccessible&&this._makeKeyboardAccessible(this.onClick),V(o,this.transitionDuration(),this.transitionDelay()).attr("x",(t=>this._barXPos(t))).attr("y",(t=>{let e=this.y()(t.y+t.y0);return t.y<0&&(e-=this._barHeight(t)),et.safeNumber(e)})).attr("width",this._barWidth).attr("height",(t=>this._barHeight(t))).attr("fill",tt("data",this.getColor)).select("title").text(tt("data",this.title(data.name))),V(n.exit(),this.transitionDuration(),this.transitionDelay()).attr("x",(t=>this.x()(t.x))).attr("width",.9*this._barWidth).remove()}_calculateBarWidth(){if(void 0===this._barWidth){const t=this.xUnitCount();this.isOrdinal()&&void 0===this._gap?this._barWidth=Math.floor(this.x().bandwidth()):this._gap?this._barWidth=Math.floor((this.xAxisLength()-(t-1)*this._gap)/t):this._barWidth=Math.floor(this.xAxisLength()/(1+this.barPadding())/t),(this._barWidth===1/0||isNaN(this._barWidth)||this._barWidth<Dt)&&(this._barWidth=Dt)}}fadeDeselectedArea(t){const e=this.chartBodyG().selectAll("rect.bar");if(this.isOrdinal())this.hasFilter()?(e.classed(E.SELECTED_CLASS,(t=>this.hasFilter(t.x))),e.classed(E.DESELECTED_CLASS,(t=>!this.hasFilter(t.x)))):(e.classed(E.SELECTED_CLASS,!1),e.classed(E.DESELECTED_CLASS,!1));else if(this.brushOn()||this.parentBrushOn())if(this.brushIsEmpty(t))e.classed(E.DESELECTED_CLASS,!1);else{const n=t[0],r=t[1];e.classed(E.DESELECTED_CLASS,(t=>t.x<n||t.x>=r))}}centerBar(t){return arguments.length?(this._centerBar=t,this):this._centerBar}onClick(t){super.onClick(t.data)}barPadding(t){return arguments.length?(this._rangeBandPadding(t),this._gap=void 0,this):this._rangeBandPadding()}_useOuterPadding(){return void 0===this._gap}gap(t){return arguments.length?(this._gap=t,this):this._gap}extendBrush(t){return t&&this.round()&&(!this._centerBar||this._alwaysUseRounding)&&(t[0]=this.round()(t[0]),t[1]=this.round()(t[1])),t}alwaysUseRounding(t){return arguments.length?(this._alwaysUseRounding=t,this):this._alwaysUseRounding}legendHighlight(t){const e=(t,e)=>function(){const n=o.select(this).attr("fill")===t;return e?!n:n};this.isLegendableHidden(t)||this.g().selectAll("rect.bar").classed("highlight",e(t.color)).classed("fadeout",e(t.color,!0))}legendReset(){this.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)}xAxisMax(){let t=super.xAxisMax();return"resolution"in this.xUnits()&&(t+=this.xUnits().resolution),t}}const Ot=(t,e)=>new Pt(t,e);function zt(t){return e=>{const n=e.quartiles[0],r=e.quartiles[2],o=(r-n)*t;let i=-1,c=e.length;do{++i}while(e[i]<n-o);do{--c}while(e[c]>r+o);return[i,c]}}class Bt extends St{constructor(t,e){super(),this._whiskerIqrFactor=1.5,this._whiskersIqr=zt,this._whiskers=this._whiskersIqr(this._whiskerIqrFactor),this._box=kt(),this._tickFormat=null,this._renderDataPoints=!1,this._dataOpacity=.3,this._dataWidthPortion=.8,this._showOutliers=!0,this._boldOutlier=!1,this._yRangePadding=8,this._boxWidth=(t,e)=>this.isOrdinal()?this.x().bandwidth():t/(1+this.boxPadding())/e,this.x(h.scaleBand()),this.xUnits(at.ordinal),this.data((t=>t.all().map((t=>(t.map=e=>e.call(t,t),t))).filter((t=>0!==this.valueAccessor()(t).length)))),this.boxPadding(.8),this.outerPadding(.5),this.anchor(t,e)}boxPadding(t){return arguments.length?this._rangeBandPadding(t):this._rangeBandPadding()}outerPadding(t){return arguments.length?this._outerRangeBandPadding(t):this._outerRangeBandPadding()}boxWidth(t){return arguments.length?(this._boxWidth="function"==typeof t?t:et.constant(t),this):this._boxWidth}_boxTransform(t,i){return`translate(${this.x()(this.keyAccessor()(t,i))}, 0)`}_preprocessData(){this.elasticX()&&this.x().domain([])}plotData(){this._calculatedBoxWidth=this._boxWidth(this.effectiveWidth(),this.xUnitCount()),this._box.whiskers(this._whiskers).width(this._calculatedBoxWidth).height(this.effectiveHeight()).value(this.valueAccessor()).domain(this.y().domain()).duration(this.transitionDuration()).tickFormat(this._tickFormat).renderDataPoints(this._renderDataPoints).dataOpacity(this._dataOpacity).dataWidthPortion(this._dataWidthPortion).renderTitle(this.renderTitle()).showOutliers(this._showOutliers).boldOutlier(this._boldOutlier);const t=this.chartBodyG().selectAll("g.box").data(this.data(),this.keyAccessor()),e=this._renderBoxes(t);this._updateBoxes(e),this._removeBoxes(t),this.fadeDeselectedArea(this.filter())}_renderBoxes(t){const e=t.enter().append("g");return e.attr("class","box").classed("dc-tabbable",this._keyboardAccessible).attr("transform",((t,i)=>this._boxTransform(t,i))).call(this._box).on("click",P.eventHandler((t=>{this.filter(this.keyAccessor()(t)),this.redrawGroup()}))).selectAll("circle").classed("dc-tabbable",this._keyboardAccessible),this._keyboardAccessible&&this._makeKeyboardAccessible(this.onClick),e.merge(t)}_updateBoxes(t){const e=this;V(t,this.transitionDuration(),this.transitionDelay()).attr("transform",((t,i)=>this._boxTransform(t,i))).call(this._box).each((function(t){const n=e.getColor(t,0);o.select(this).select("rect.box").attr("fill",n),o.select(this).selectAll("circle.data").attr("fill",n)}))}_removeBoxes(t){t.exit().remove().call(this._box)}_minDataValue(){return l.min(this.data(),(t=>l.min(this.valueAccessor()(t))))}_maxDataValue(){return l.max(this.data(),(t=>l.max(this.valueAccessor()(t))))}_yAxisRangeRatio(){return(this._maxDataValue()-this._minDataValue())/this.effectiveHeight()}onClick(t){this.filter(this.keyAccessor()(t)),this.redrawGroup()}fadeDeselectedArea(t){const e=this;if(this.hasFilter())if(this.isOrdinal())this.g().selectAll("g.box").each((function(t){e.isSelectedNode(t)?e.highlightSelected(this):e.fadeDeselected(this)}));else{if(!this.brushOn()&&!this.parentBrushOn())return;const n=t[0],r=t[1];this.g().selectAll("g.box").each((function(t){const o=e.keyAccessor()(t);o<n||o>=r?e.fadeDeselected(this):e.highlightSelected(this)}))}else this.g().selectAll("g.box").each((function(){e.resetHighlight(this)}))}isSelectedNode(t){return this.hasFilter(this.keyAccessor()(t))}yAxisMin(){const t=this._yRangePadding*this._yAxisRangeRatio();return et.subtract(this._minDataValue()-t,this.yAxisPadding())}yAxisMax(){const t=this._yRangePadding*this._yAxisRangeRatio();return et.add(this._maxDataValue()+t,this.yAxisPadding())}tickFormat(t){return arguments.length?(this._tickFormat=t,this):this._tickFormat}yRangePadding(t){return arguments.length?(this._yRangePadding=t,this):this._yRangePadding}renderDataPoints(t){return arguments.length?(this._renderDataPoints=t,this):this._renderDataPoints}dataOpacity(t){return arguments.length?(this._dataOpacity=t,this):this._dataOpacity}dataWidthPortion(t){return arguments.length?(this._dataWidthPortion=t,this):this._dataWidthPortion}showOutliers(t){return arguments.length?(this._showOutliers=t,this):this._showOutliers}boldOutlier(t){return arguments.length?(this._boldOutlier=t,this):this._boldOutlier}}const Ft=(t,e)=>new Bt(t,e);class Ht extends(pt(St)){constructor(t,e){super(),this.transitionDuration(750),this.transitionDelay(0),this.anchor(t,e)}_bubbleLocator(t){return`translate(${this._bubbleX(t)},${this._bubbleY(t)})`}plotData(){this.calculateRadiusDomain(),this.r().range([this.MIN_RADIUS,this.xAxisLength()*this.maxBubbleRelativeSize()]);const data=this.data();let t=this.chartBodyG().selectAll(`g.${this.BUBBLE_NODE_CLASS}`).data(data,(t=>t.key));(this.sortBubbleSize()||this.keyboardAccessible())&&t.order(),this._removeNodes(t),t=this._renderNodes(t),this._updateNodes(t),this.fadeDeselectedArea(this.filter())}_renderNodes(t){const e=t.enter().append("g");return e.attr("class",this.BUBBLE_NODE_CLASS).attr("transform",(t=>this._bubbleLocator(t))).append("circle").attr("class",((t,i)=>`${this.BUBBLE_CLASS} _${i}`)).on("click",P.eventHandler((t=>this.onClick(t)))).classed("dc-tabbable",this._keyboardAccessible).attr("fill",this.getColor).attr("r",0),t=e.merge(t),V(t,this.transitionDuration(),this.transitionDelay()).select(`circle.${this.BUBBLE_CLASS}`).attr("r",(t=>this.bubbleR(t))).attr("opacity",(t=>this.bubbleR(t)>0?1:0)),this._keyboardAccessible&&this._makeKeyboardAccessible(this.onClick),this._doRenderLabel(e),this._doRenderTitles(e),t}_updateNodes(t){V(t,this.transitionDuration(),this.transitionDelay()).attr("transform",(t=>this._bubbleLocator(t))).select(`circle.${this.BUBBLE_CLASS}`).attr("fill",this.getColor).attr("r",(t=>this.bubbleR(t))).attr("opacity",(t=>this.bubbleR(t)>0?1:0)),this.doUpdateLabels(t),this.doUpdateTitles(t)}_removeNodes(t){t.exit().remove()}_bubbleX(t){let e=this.x()(this.keyAccessor()(t));return!isNaN(e)&&isFinite(e)||(e=0),e}_bubbleY(t){let e=this.y()(this.valueAccessor()(t));return!isNaN(e)&&isFinite(e)||(e=0),e}renderBrush(){}redrawBrush(t,e){this.fadeDeselectedArea(t)}}const $t=(t,e)=>new Ht(t,e),Yt="bubble-overlay",It="node",Gt="bubble";class Ut extends(pt(ft)){constructor(t,e){super(),this._g=void 0,this._points=[],this._keyboardAccessible=!1,this.transitionDuration(750),this.transitionDelay(0),this.radiusValueAccessor((t=>t.value)),this.anchor(t,e)}point(t,e,n){return this._points.push({name:t,x:e,y:n}),this}_doRender(){return this._g=this._initOverlayG(),this.r().range([this.MIN_RADIUS,this.width()*this.maxBubbleRelativeSize()]),this._initializeBubbles(),this.fadeDeselectedArea(this.filter()),this}_initOverlayG(){return this._g=this.select(`g.${Yt}`),this._g.empty()&&(this._g=this.svg().append("g").attr("class",Yt)),this._g}_initializeBubbles(){const data=this._mapData();this.calculateRadiusDomain(),this._points.forEach((t=>{const e=this._getNodeG(t,data);let circle=e.select(`circle.${Gt}`);circle.empty()&&(circle=e.append("circle").attr("class",Gt).classed("dc-tabbable",this._keyboardAccessible).attr("r",0).attr("fill",this.getColor).on("click",P.eventHandler((t=>this.onClick(t))))),this._keyboardAccessible&&this._makeKeyboardAccessible(this.onClick),V(circle,this.transitionDuration(),this.transitionDelay()).attr("r",(t=>this.bubbleR(t))),this._doRenderLabel(e),this._doRenderTitles(e)}))}_mapData(){const data={};return this.data().forEach((t=>{data[this.keyAccessor()(t)]=t})),data}_getNodeG(t,data){const e=`${It} ${et.nameToId(t.name)}`;let n=this._g.select(`g.${et.nameToId(t.name)}`);return n.empty()&&(n=this._g.append("g").attr("class",e).attr("transform",`translate(${t.x},${t.y})`)),n.datum(data[t.name]),n}_doRedraw(){return this._updateBubbles(),this.fadeDeselectedArea(this.filter()),this}_updateBubbles(){const data=this._mapData();this.calculateRadiusDomain(),this._points.forEach((t=>{const e=this._getNodeG(t,data),circle=e.select(`circle.${Gt}`);V(circle,this.transitionDuration(),this.transitionDelay()).attr("r",(t=>this.bubbleR(t))).attr("fill",this.getColor),this.doUpdateLabels(e),this.doUpdateTitles(e)}))}debug(t){if(t){let t=this.select(`g.${E.DEBUG_GROUP_CLASS}`);t.empty()&&(t=this.svg().append("g").attr("class",E.DEBUG_GROUP_CLASS));const e=t.append("text").attr("x",10).attr("y",20);t.append("rect").attr("width",this.width()).attr("height",this.height()).on("mousemove",P.eventHandler(((n,r)=>{const o=P.pointer(r,t.node()),c=`${o[0]}, ${o[1]}`;e.text(c)})))}else this.selectAll(".debug").remove();return this}}const qt=(t,e)=>new Ut(t,e),Vt="dc-cbox-group",Xt="dc-cbox-item";class jt extends ft{constructor(t,e){super(),this._cbox=void 0,this._promptText="Select all",this._multiple=!1,this._inputType="radio",this._promptValue=null,this._uniqueId=et.uniqueId(),this.data((t=>t.all().filter(this._filterDisplayed))),this._filterDisplayed=t=>this.valueAccessor()(t)>0,this._order=(a,b)=>this.keyAccessor()(a)>this.keyAccessor()(b)?1:this.keyAccessor()(a)<this.keyAccessor()(b)?-1:0,this.anchor(t,e)}_doRender(){return this._doRedraw()}_doRedraw(){return this.select("ul").remove(),this._cbox=this.root().append("ul").classed(Vt,!0),this._renderOptions(),this.hasFilter()&&this._multiple?this._cbox.selectAll("input").property("checked",(t=>t&&this.filters().indexOf(String(this.keyAccessor()(t)))>=0||!1)):this.hasFilter()&&this._cbox.selectAll("input").property("checked",(t=>!!t&&this.keyAccessor()(t)===this.filter())),this}_renderOptions(){let t=this._cbox.selectAll(`li.${Xt}`).data(this.data(),(t=>this.keyAccessor()(t)));t.exit().remove(),t=t.enter().append("li").classed(Xt,!0).merge(t),t.append("input").attr("type",this._inputType).attr("value",(t=>this.keyAccessor()(t))).attr("name",`domain_${this._uniqueId}`).attr("id",((t,i)=>`input_${this._uniqueId}_${i}`)),t.append("label").attr("for",((t,i)=>`input_${this._uniqueId}_${i}`)).text(this.title());const e=this;if(this._multiple)this._cbox.append("li").append("input").attr("type","reset").text(this._promptText).on("click",P.eventHandler((function(t,n){return e._onChange(t,n,this)})));else{const li=this._cbox.append("li");li.append("input").attr("type",this._inputType).attr("value",this._promptValue).attr("name",`domain_${this._uniqueId}`).attr("id",((t,i)=>`input_${this._uniqueId}_all`)).property("checked",!0),li.append("label").attr("for",((t,i)=>`input_${this._uniqueId}_all`)).text(this._promptText)}return this._cbox.selectAll(`li.${Xt}`).sort(this._order),this._cbox.on("change",P.eventHandler((function(t,n){return e._onChange(t,n,this)}))),t}_onChange(t,e,element){let n,r;o.select(e.target).datum()?(r=o.select(element).selectAll("input").filter((function(t){if(t)return this.checked})),n=r.nodes().map((option=>option.value)),this._multiple||1!==n.length||(n=n[0])):n=this._promptValue||null,this.onChange(n)}onChange(t){t&&this._multiple?this.replaceFilter([t]):t?this.replaceFilter(t):this.filterAll(),K.trigger((()=>{this.redrawGroup()}))}order(t){return arguments.length?(this._order=t,this):this._order}promptText(t){return arguments.length?(this._promptText=t,this):this._promptText}filterDisplayed(t){return arguments.length?(this._filterDisplayed=t,this):this._filterDisplayed}multiple(t){return arguments.length?(this._multiple=t,this._multiple?this._inputType="checkbox":this._inputType="radio",this):this._multiple}promptValue(t){return arguments.length?(this._promptValue=t,this):this._promptValue}}const Wt=(t,e)=>new jt(t,e),Zt="sub",Kt=12;class Jt extends St{constructor(t,e){super(),this._children=[],this._childOptions={},this._shareColors=!1,this._shareTitle=!0,this._alignYAxes=!1,this._rightYAxis=_.axisRight(),this._rightYAxisLabel=0,this._rightYAxisLabelPadding=Kt,this._rightY=void 0,this._rightAxisGridLines=!1,this._mandatoryAttributes([]),this.transitionDuration(500),this.transitionDelay(0),this.on("filtered.dcjs-composite-chart",(t=>{for(let i=0;i<this._children.length;++i)this._children[i].replaceFilter(this.filter())})),this.anchor(t,e)}_generateG(){const g=super._generateG();for(let i=0;i<this._children.length;++i){const t=this._children[i];this._generateChildG(t,i),t.dimension()||t.dimension(this.dimension()),t.group()||t.group(this.group()),t.chartGroup(this.chartGroup()),t.svg(this.svg()),t.xUnits(this.xUnits()),t.transitionDuration(this.transitionDuration(),this.transitionDelay()),t.parentBrushOn(this.brushOn()),t.brushOn(!1),t.renderTitle(this.renderTitle()),t.elasticX(this.elasticX())}return g}rescale(){return super.rescale(),this._children.forEach((t=>{t.rescale()})),this}resizing(t){return arguments.length?(super.resizing(t),this._children.forEach((e=>{e.resizing(t)})),this):super.resizing()}_prepareYAxis(){const t=0!==this._leftYAxisChildren().length,e=0!==this._rightYAxisChildren().length,n=this._calculateYAxisRanges(t,e);t&&this._prepareLeftYAxis(n),e&&this._prepareRightYAxis(n),this._leftYAxisChildren().length>0&&!this._rightAxisGridLines?this._renderHorizontalGridLinesForAxis(this.g(),this.y(),this.yAxis()):this._rightYAxisChildren().length>0&&this._renderHorizontalGridLinesForAxis(this.g(),this._rightY,this._rightYAxis)}renderYAxis(){0!==this._leftYAxisChildren().length&&(this.renderYAxisAt("y",this.yAxis(),this.margins().left),this.renderYAxisLabel("y",this.yAxisLabel(),-90)),0!==this._rightYAxisChildren().length&&(this.renderYAxisAt("yr",this.rightYAxis(),this.width()-this.margins().right),this.renderYAxisLabel("yr",this.rightYAxisLabel(),90,this.width()-this._rightYAxisLabelPadding))}_calculateYAxisRanges(t,e){let n,r,o,c,l;return t&&(n=this._yAxisMin(),r=this._yAxisMax()),e&&(o=this._rightYAxisMin(),c=this._rightYAxisMax()),this.alignYAxes()&&t&&e&&(l=this._alignYAxisRanges(n,r,o,c)),l||{lyAxisMin:n,lyAxisMax:r,ryAxisMin:o,ryAxisMax:c}}_alignYAxisRanges(t,e,n,r){const o=(r-n)/(e-t);return{lyAxisMin:Math.min(t,n/o),lyAxisMax:Math.max(e,r/o),ryAxisMin:Math.min(n,t*o),ryAxisMax:Math.max(r,e*o)}}_prepareRightYAxis(t){const e=void 0===this.rightY()||this.elasticY(),n=e||this.resizing();void 0===this.rightY()&&this.rightY(h.scaleLinear()),e&&this.rightY().domain([t.ryAxisMin,t.ryAxisMax]),n&&this.rightY().rangeRound([this.yAxisHeight(),0]),this.rightY().range([this.yAxisHeight(),0]),this.rightYAxis(this.rightYAxis().scale(this.rightY()))}_prepareLeftYAxis(t){const e=void 0===this.y()||this.elasticY(),n=e||this.resizing();void 0===this.y()&&this.y(h.scaleLinear()),e&&this.y().domain([t.lyAxisMin,t.lyAxisMax]),n&&this.y().rangeRound([this.yAxisHeight(),0]),this.y().range([this.yAxisHeight(),0]),this.yAxis(this.yAxis().scale(this.y()))}_generateChildG(t,i){t._generateG(this.g()),t.g().attr("class",`${Zt} _${i}`)}plotData(){for(let i=0;i<this._children.length;++i){const t=this._children[i];t.g()||this._generateChildG(t,i),this._shareColors&&t.colors(this.colors()),t.x(this.x()),t.xAxis(this.xAxis()),t.useRightYAxis()?(t.y(this.rightY()),t.yAxis(this.rightYAxis())):(t.y(this.y()),t.yAxis(this.yAxis())),t.plotData(),t._activateRenderlets()}}useRightAxisGridLines(t){return arguments?(this._rightAxisGridLines=t,this):this._rightAxisGridLines}childOptions(t){return arguments.length?(this._childOptions=t,this._children.forEach((t=>{t.options(this._childOptions)})),this):this._childOptions}fadeDeselectedArea(t){if(this.brushOn())for(let i=0;i<this._children.length;++i)this._children[i].fadeDeselectedArea(t)}rightYAxisLabel(t,e){return arguments.length?(this._rightYAxisLabel=t,this.margins().right-=this._rightYAxisLabelPadding,this._rightYAxisLabelPadding=void 0===e?Kt:e,this.margins().right+=this._rightYAxisLabelPadding,this):this._rightYAxisLabel}compose(t){return this._children=t,this._children.forEach((t=>{t.height(this.height()),t.width(this.width()),t.margins(this.margins()),this._shareTitle&&t.title(this.title()),t.options(this._childOptions)})),this.rescale(),this}_setChildrenProperty(t,e){this._children.forEach((n=>{n[t](e)}))}height(t){return arguments.length?(super.height(t),this._setChildrenProperty("height",t),this):super.height()}width(t){return arguments.length?(super.width(t),this._setChildrenProperty("width",t),this):super.width()}margins(t){return arguments.length?(super.margins(t),this._setChildrenProperty("margins",t),this):super.margins()}children(){return this._children}shareColors(t){return arguments.length?(this._shareColors=t,this):this._shareColors}shareTitle(t){return arguments.length?(this._shareTitle=t,this):this._shareTitle}rightY(t){return arguments.length?(this._rightY=t,this.rescale(),this):this._rightY}alignYAxes(t){return arguments.length?(this._alignYAxes=t,this.rescale(),this):this._alignYAxes}_leftYAxisChildren(){return this._children.filter((t=>!t.useRightYAxis()))}_rightYAxisChildren(){return this._children.filter((t=>t.useRightYAxis()))}_getYAxisMin(t){return t.map((t=>t.yAxisMin()))}_yAxisMin(){return l.min(this._getYAxisMin(this._leftYAxisChildren()))}_rightYAxisMin(){return l.min(this._getYAxisMin(this._rightYAxisChildren()))}_getYAxisMax(t){return t.map((t=>t.yAxisMax()))}_yAxisMax(){return et.add(l.max(this._getYAxisMax(this._leftYAxisChildren())),this.yAxisPadding())}_rightYAxisMax(){return et.add(l.max(this._getYAxisMax(this._rightYAxisChildren())),this.yAxisPadding())}_getAllXAxisMinFromChildCharts(){return this._children.map((t=>t.xAxisMin()))}xAxisMin(){return et.subtract(l.min(this._getAllXAxisMinFromChildCharts()),this.xAxisPadding(),this.xAxisPaddingUnit())}_getAllXAxisMaxFromChildCharts(){return this._children.map((t=>t.xAxisMax()))}xAxisMax(){return et.add(l.max(this._getAllXAxisMaxFromChildCharts()),this.xAxisPadding(),this.xAxisPaddingUnit())}legendables(){return this._children.reduce(((t,e)=>(this._shareColors&&e.colors(this.colors()),t.push.apply(t,e.legendables()),t)),[])}legendHighlight(t){for(let e=0;e<this._children.length;++e)this._children[e].legendHighlight(t)}legendReset(t){for(let e=0;e<this._children.length;++e)this._children[e].legendReset(t)}legendToggle(){console.log("composite should not be getting legendToggle itself")}rightYAxis(t){return arguments.length?(this._rightYAxis=t,this):this._rightYAxis}yAxisMin(){throw new Error("Not supported for this chart type")}yAxisMax(){throw new Error("Not supported for this chart type")}}const Qt=(t,e)=>new Jt(t,e);class te extends ft{constructor(t,e){super(),this._formatNumber=r.format(",d"),this._crossfilter=null,this._groupAll=null,this._html={some:"",all:""},this._mandatoryAttributes(["crossfilter","groupAll"]),this.anchor(t,e)}html(t){return arguments.length?(t.all&&(this._html.all=t.all),t.some&&(this._html.some=t.some),this):this._html}formatNumber(t){return arguments.length?(this._formatNumber=t,this):this._formatNumber}_doRender(){const t=this.crossfilter().size(),e=this.groupAll().value(),n=this._formatNumber(t),r=this._formatNumber(e);return t===e&&""!==this._html.all?this.root().html(this._html.all.replace("%total-count",n).replace("%filter-count",r)):""!==this._html.some?this.root().html(this._html.some.replace("%total-count",n).replace("%filter-count",r)):(this.selectAll(".total-count").text(n),this.selectAll(".filter-count").text(r)),this}_doRedraw(){return this._doRender()}crossfilter(t){return arguments.length?(this._crossfilter=t,this):this._crossfilter}dimension(t){return D.warnOnce("consider using dataCount.crossfilter instead of dataCount.dimension for clarity"),arguments.length?this.crossfilter(t):this.crossfilter()}groupAll(t){return arguments.length?(this._groupAll=t,this):this._groupAll}group(t){return D.warnOnce("consider using dataCount.groupAll instead of dataCount.group for clarity"),arguments.length?this.groupAll(t):this.groupAll()}}const ee=(t,e)=>new te(t,e),ne="dc-grid-label",ie="dc-grid-item",re="dc-grid-section dc-grid-group",se="dc-grid-top";class ae extends ft{constructor(t,e){super(),this._section=null,this._size=999,this._html=function(t){return`you need to provide an html() handling param:  ${JSON.stringify(t)}`},this._sortBy=function(t){return t},this._order=l.ascending,this._beginSlice=0,this._endSlice=void 0,this._htmlSection=t=>`<div class='${re}'><h1 class='${ne}'>${this.keyAccessor()(t)}</h1></div>`,this._mandatoryAttributes(["dimension","section"]),this.anchor(t,e)}_doRender(){return this.selectAll(`div.${se}`).remove(),this._renderItems(this._renderSections()),this}_renderSections(){const t=this.root().selectAll(`div.${se}`).data(this._nestEntries(),(t=>this.keyAccessor()(t))),e=t.enter().append("div").attr("class",se);return this._htmlSection&&e.html((t=>this._htmlSection(t))),t.exit().remove(),e}_nestEntries(){let t=this.dimension().top(this._size);return t=t.sort(((a,b)=>this._order(this._sortBy(a),this._sortBy(b)))).slice(this._beginSlice,this._endSlice),P.nester({key:this.section(),sortKeys:this._order,entries:t})}_renderItems(t){let e=t.order().selectAll(`div.${ie}`).data((t=>t.values));return e.exit().remove(),e=e.enter().append("div").attr("class",ie).html((t=>this._html(t))).merge(e),e}_doRedraw(){return this._doRender()}section(section){return arguments.length?(this._section=section,this):this._section}group(section){return D.warnOnce("consider using dataGrid.section instead of dataGrid.group for clarity"),arguments.length?this.section(section):this.section()}beginSlice(t){return arguments.length?(this._beginSlice=t,this):this._beginSlice}endSlice(t){return arguments.length?(this._endSlice=t,this):this._endSlice}size(t){return arguments.length?(this._size=t,this):this._size}html(html){return arguments.length?(this._html=html,this):this._html}htmlSection(t){return arguments.length?(this._htmlSection=t,this):this._htmlSection}htmlGroup(t){return D.warnOnce("consider using dataGrid.htmlSection instead of dataGrid.htmlGroup for clarity"),arguments.length?this.htmlSection(t):this.htmlSection()}sortBy(t){return arguments.length?(this._sortBy=t,this):this._sortBy}order(t){return arguments.length?(this._order=t,this):this._order}}const oe=(t,e)=>new ae(t,e),ue="dc-table-label",ce="dc-table-row",le="dc-table-column",he="dc-table-section dc-table-group",fe="dc-table-head";class de extends ft{constructor(t,e){super(),this._size=25,this._columns=[],this._sortBy=t=>t,this._order=l.ascending,this._beginSlice=0,this._endSlice=void 0,this._showSections=!0,this._section=()=>"",this._mandatoryAttributes(["dimension"]),this.anchor(t,e)}_doRender(){return this.selectAll("tbody").remove(),this._renderRows(this._renderSections()),this}_doColumnValueFormat(t,e){return"function"==typeof t?t(e):"string"==typeof t?e[t]:t.format(e)}_doColumnHeaderFormat(t){return"function"==typeof t?this._doColumnHeaderFnToString(t):"string"==typeof t?this._doColumnHeaderCapitalize(t):String(t.label)}_doColumnHeaderCapitalize(s){return s.charAt(0).toUpperCase()+s.slice(1)}_doColumnHeaderFnToString(t){let s=String(t);const e=s.indexOf("return ");if(e>=0){const t=s.lastIndexOf(";");t>=0&&(s=s.substring(e+7,t),s.indexOf("numberFormat")>=0&&(s=s.replace("numberFormat","")))}return s}_renderSections(){let t=!0;if(this._columns.forEach((e=>{t&="function"==typeof e})),!t){let thead=this.selectAll("thead").data([0]);thead.exit().remove(),thead=thead.enter().append("thead").merge(thead);let t=thead.selectAll("tr").data([0]);t.exit().remove(),t=t.enter().append("tr").merge(t);const e=t.selectAll("th").data(this._columns);e.exit().remove(),e.enter().append("th").merge(e).attr("class",fe).html((t=>this._doColumnHeaderFormat(t)))}const e=this.root().selectAll("tbody").data(this._nestEntries(),(t=>this.keyAccessor()(t))),n=e.enter().append("tbody");return!0===this._showSections&&n.append("tr").attr("class",he).append("td").attr("class",ue).attr("colspan",this._columns.length).html((t=>this.keyAccessor()(t))),e.exit().remove(),n}_nestEntries(){let t;return t=this._order===l.ascending?this.dimension().bottom(this._size):this.dimension().top(this._size),t=t.sort(((a,b)=>this._order(this._sortBy(a),this._sortBy(b)))).slice(this._beginSlice,this._endSlice),P.nester({key:this.section(),sortKeys:this._order,entries:t})}_renderRows(t){const e=t.order().selectAll(`tr.${ce}`).data((t=>t.values)),n=e.enter().append("tr").attr("class",ce);return this._columns.forEach(((t,i)=>{n.append("td").attr("class",`${le} _${i}`).html((e=>this._doColumnValueFormat(t,e)))})),e.exit().remove(),e}_doRedraw(){return this._doRender()}section(section){return arguments.length?(this._section=section,this):this._section}group(section){return D.warnOnce("consider using dataTable.section instead of dataTable.group for clarity"),arguments.length?this.section(section):this.section()}size(t){return arguments.length?(this._size=t,this):this._size}beginSlice(t){return arguments.length?(this._beginSlice=t,this):this._beginSlice}endSlice(t){return arguments.length?(this._endSlice=t,this):this._endSlice}columns(t){return arguments.length?(this._columns=t,this):this._columns}sortBy(t){return arguments.length?(this._sortBy=t,this):this._sortBy}order(t){return arguments.length?(this._order=t,this):this._order}showSections(t){return arguments.length?(this._showSections=t,this):this._showSections}showGroups(t){return D.warnOnce("consider using dataTable.showSections instead of dataTable.showGroups for clarity"),arguments.length?this.showSections(t):this.showSections()}}const _e=(t,e)=>new de(t,e);class ge extends(gt(ft)){constructor(t,e){super(),this.colorAccessor((t=>t||0)),this._geoPath=w.geoPath(),this._projectionFlag=void 0,this._projection=void 0,this._geoJsons=[],this.anchor(t,e)}_doRender(){this.resetSvg();for(let t=0;t<this._geoJsons.length;++t){let e=this.svg().append("g").attr("class",`layer${t}`).selectAll(`g.${this._geoJson(t).name}`).data(this._geoJson(t).data);e=e.enter().append("g").attr("class",this._geoJson(t).name).merge(e),e.append("path").classed("dc-tabbable",this._keyboardAccessible).attr("fill","white").attr("d",this._getGeoPath()),e.append("title"),this._plotData(t)}this._projectionFlag=!1}_plotData(t){const data=this._generateLayeredData();if(this._isDataLayer(t)){const e=this._renderRegionG(t);this._renderPaths(e,t,data),this._renderTitles(e,t,data)}}_generateLayeredData(){const data={},t=this.data();for(let i=0;i<t.length;++i)data[this.keyAccessor()(t[i])]=this.valueAccessor()(t[i]);return data}_isDataLayer(t){return this._geoJson(t).keyAccessor}_renderRegionG(t){return this.svg().selectAll(this._layerSelector(t)).classed("selected",(e=>this._isSelected(t,e))).classed("deselected",(e=>this._isDeselected(t,e))).attr("class",(e=>{let n=`${this._geoJson(t).name} ${et.nameToId(this._geoJson(t).keyAccessor(e))}`;return this._isSelected(t,e)&&(n+=" selected"),this._isDeselected(t,e)&&(n+=" deselected"),n}))}_layerSelector(t){return`g.layer${t} g.${this._geoJson(t).name}`}_isSelected(t,e){return this.hasFilter()&&this.hasFilter(this._getKey(t,e))}_isDeselected(t,e){return this.hasFilter()&&!this.hasFilter(this._getKey(t,e))}_getKey(t,e){return this._geoJson(t).keyAccessor(e)}_geoJson(t){return this._geoJsons[t]}_renderPaths(t,e,data){const n=t.select("path").attr("fill",(function(){const t=o.select(this).attr("fill");return t||"none"})).on("click",P.eventHandler((t=>this.onClick(t,e))));this._keyboardAccessible&&this._makeKeyboardAccessible(this.onClick,e),V(n,this.transitionDuration(),this.transitionDelay()).attr("fill",((t,i)=>this.getColor(data[this._geoJson(e).keyAccessor(t)],i)))}onClick(t,e){const n=this._geoJson(e).keyAccessor(t);K.trigger((()=>{this.filter(n),this.redrawGroup()}))}_renderTitles(t,e,data){this.renderTitle()&&t.selectAll("title").text((t=>{const n=this._getKey(e,t),r=data[n];return this.title()({key:n,value:r})}))}_doRedraw(){for(let t=0;t<this._geoJsons.length;++t)this._plotData(t),this._projectionFlag&&this.svg().selectAll(`g.${this._geoJson(t).name} path`).attr("d",this._getGeoPath());this._projectionFlag=!1}overlayGeoJson(t,e,n){for(let i=0;i<this._geoJsons.length;++i)if(this._geoJsons[i].name===e)return this._geoJsons[i].data=t,this._geoJsons[i].keyAccessor=n,this;return this._geoJsons.push({name:e,data:t,keyAccessor:n}),this}projection(t){return arguments.length?(this._projection=t,this._projectionFlag=!0,this):this._projection}_getGeoPath(){return void 0===this._projection?(D.warn("choropleth projection default of geoAlbers is deprecated, in next version projection will need to be set explicitly"),this._geoPath.projection(w.geoAlbersUsa())):this._geoPath.projection(this._projection)}geoJsons(){return this._geoJsons}geoPath(){return this._geoPath}removeGeoJson(t){const e=[];for(let i=0;i<this._geoJsons.length;++i){const n=this._geoJsons[i];n.name!==t&&e.push(n)}return this._geoJsons=e,this}}const pe=(t,e)=>new ge(t,e),ye=6.75;class me extends(gt(mt)){constructor(t,e){super(),this._chartBody=void 0,this._cols=void 0,this._rows=void 0,this._colOrdering=l.ascending,this._rowOrdering=l.ascending,this._colScale=h.scaleBand(),this._rowScale=h.scaleBand(),this._xBorderRadius=ye,this._yBorderRadius=ye,this._mandatoryAttributes(["group"]),this.title(this.colorAccessor()),this._colsLabel=t=>t,this._rowsLabel=t=>t,this._xAxisOnClick=t=>{this._filterAxis(0,t)},this._yAxisOnClick=t=>{this._filterAxis(1,t)},this._boxOnClick=t=>{const filter=t.key;K.trigger((()=>{this.filter(J.TwoDimensionalFilter(filter)),this.redrawGroup()}))},this.anchor(t,e)}colsLabel(t){return arguments.length?(this._colsLabel=t,this):this._colsLabel}rowsLabel(t){return arguments.length?(this._rowsLabel=t,this):this._rowsLabel}_filterAxis(t,e){const n=this.selectAll(".box-group").filter((n=>n.key[t]===e)),r=n.filter((t=>!this.hasFilter(t.key)));K.trigger((()=>{const t=(r.empty()?n:r).data().map((t=>J.TwoDimensionalFilter(t.key)));this.filter([t]),this.redrawGroup()}))}filter(filter){const t=t=>(D.warnOnce("heatmap.filter taking a coordinate is deprecated - please pass dc.filters.TwoDimensionalFilter instead"),this._filter(J.TwoDimensionalFilter(t)));return arguments.length?null===filter||"TwoDimensionalFilter"===filter.filterType||Array.isArray(filter)&&Array.isArray(filter[0])&&"TwoDimensionalFilter"===filter[0][0].filterType?super.filter(filter):t(filter):super.filter()}rows(t){return arguments.length?(this._rows=t,this):this._rows}rowOrdering(t){return arguments.length?(this._rowOrdering=t,this):this._rowOrdering}cols(t){return arguments.length?(this._cols=t,this):this._cols}colOrdering(t){return arguments.length?(this._colOrdering=t,this):this._colOrdering}_doRender(){return this.resetSvg(),this._chartBody=this.svg().append("g").attr("class","heatmap").attr("transform",`translate(${this.margins().left},${this.margins().top})`),this._doRedraw()}_doRedraw(){const data=this.data();let t=this.rows()||data.map(this.valueAccessor()),e=this.cols()||data.map(this.keyAccessor());this._rowOrdering&&(t=t.sort(this._rowOrdering)),this._colOrdering&&(e=e.sort(this._colOrdering)),t=this._rowScale.domain(t),e=this._colScale.domain(e);const n=t.domain().length,r=e.domain().length,o=Math.floor(this.effectiveWidth()/r),c=Math.floor(this.effectiveHeight()/n);e.rangeRound([0,this.effectiveWidth()]),t.rangeRound([this.effectiveHeight(),0]);let l=this._chartBody.selectAll("g.box-group").data(this.data(),((t,i)=>`${this.keyAccessor()(t,i)}\0${this.valueAccessor()(t,i)}`));l.exit().remove();const h=l.enter().append("g").attr("class","box-group");h.append("rect").attr("class","heat-box").classed("dc-tabbable",this._keyboardAccessible).attr("fill","white").attr("x",((t,i)=>e(this.keyAccessor()(t,i)))).attr("y",((e,i)=>t(this.valueAccessor()(e,i)))).on("click",P.eventHandler(this.boxOnClick())),this._keyboardAccessible&&this._makeKeyboardAccessible(this.boxOnClick),l=h.merge(l),this.renderTitle()&&(h.append("title"),l.select("title").text(this.title())),V(l.select("rect"),this.transitionDuration(),this.transitionDelay()).attr("x",((t,i)=>e(this.keyAccessor()(t,i)))).attr("y",((e,i)=>t(this.valueAccessor()(e,i)))).attr("rx",this._xBorderRadius).attr("ry",this._yBorderRadius).attr("fill",this.getColor).attr("width",o).attr("height",c);let f=this._chartBody.select("g.cols");f.empty()&&(f=this._chartBody.append("g").attr("class","cols axis"));let d=f.selectAll("text").data(e.domain());d.exit().remove(),d=d.enter().append("text").attr("x",(t=>e(t)+o/2)).style("text-anchor","middle").attr("y",this.effectiveHeight()).attr("dy",12).on("click",P.eventHandler(this.xAxisOnClick())).text(this.colsLabel()).merge(d),V(d,this.transitionDuration(),this.transitionDelay()).text(this.colsLabel()).attr("x",(t=>e(t)+o/2)).attr("y",this.effectiveHeight());let _=this._chartBody.select("g.rows");_.empty()&&(_=this._chartBody.append("g").attr("class","rows axis"));let y=_.selectAll("text").data(t.domain());if(y.exit().remove(),y=y.enter().append("text").style("text-anchor","end").attr("x",0).attr("dx",-2).attr("y",(e=>t(e)+c/2)).attr("dy",6).on("click",P.eventHandler(this.yAxisOnClick())).text(this.rowsLabel()).merge(y),V(y,this.transitionDuration(),this.transitionDelay()).text(this.rowsLabel()).attr("y",(e=>t(e)+c/2)),this.hasFilter()){const t=this;this.selectAll("g.box-group").each((function(e){t.isSelectedNode(e)?t.highlightSelected(this):t.fadeDeselected(this)}))}else{const t=this;this.selectAll("g.box-group").each((function(){t.resetHighlight(this)}))}return this}boxOnClick(t){return arguments.length?(this._boxOnClick=t,this):this._boxOnClick}xAxisOnClick(t){return arguments.length?(this._xAxisOnClick=t,this):this._xAxisOnClick}yAxisOnClick(t){return arguments.length?(this._yAxisOnClick=t,this):this._yAxisOnClick}xBorderRadius(t){return arguments.length?(this._xBorderRadius=t,this):this._xBorderRadius}yBorderRadius(t){return arguments.length?(this._yBorderRadius=t,this):this._yBorderRadius}isSelectedNode(t){return this.hasFilter(t.key)}}const be=(t,e)=>new me(t,e);class ve{constructor(){this._htmlLegendDivCssClass="dc-html-legend",this._legendItemCssClassHorizontal="dc-legend-item-horizontal",this._legendItemCssClassVertical="dc-legend-item-vertical",this._parent=void 0,this._container=void 0,this._legendText=tt("name"),this._maxItems=void 0,this._horizontal=!1,this._legendItemClass=void 0,this._highlightSelected=!1,this._keyboardAccessible=!1}parent(p){return arguments.length?(this._parent=p,this):this._parent}render(){this._defaultLegendItemCssClass=this._horizontal?this._legendItemCssClassHorizontal:this._legendItemCssClassVertical,this._container.select(`div.${this._htmlLegendDivCssClass}`).remove();const t=this._container.append("div").attr("class",this._htmlLegendDivCssClass);t.attr("style",`max-width:${this._container.nodes()[0].style.width}`);let e=this._parent.legendables();const n=this._parent.filters();void 0!==this._maxItems&&(e=e.slice(0,this._maxItems));const r=this._legendItemClass?this._legendItemClass:this._defaultLegendItemCssClass,o=t.selectAll(`div.${r}`).data(e).enter().append("div").classed(r,!0).on("mouseover",P.eventHandler((t=>this._parent.legendHighlight(t)))).on("mouseout",P.eventHandler((t=>this._parent.legendReset(t)))).on("click",P.eventHandler((t=>this._parent.legendToggle(t))));this._highlightSelected&&o.classed(E.SELECTED_CLASS,(t=>-1!==n.indexOf(t.name))),o.append("span").attr("class","dc-legend-item-color").style("background-color",tt("color")),o.append("span").attr("class","dc-legend-item-label").classed("dc-tabbable",this._keyboardAccessible).attr("title",this._legendText).text(this._legendText),this._keyboardAccessible&&this._makeLegendKeyboardAccessible()}container(t){return arguments.length?(this._container=o.select(t),this):this._container}legendItemClass(t){return arguments.length?(this._legendItemClass=t,this):this._legendItemClass}highlightSelected(t){return arguments.length?(this._highlightSelected=t,this):this._highlightSelected}horizontal(t){return arguments.length?(this._horizontal=t,this):this._horizontal}legendText(t){return arguments.length?(this._legendText=t,this):this._legendText}maxItems(t){return arguments.length?(this._maxItems=et.isNumber(t)?t:void 0,this):this._maxItems}keyboardAccessible(t){return arguments.length?(this._keyboardAccessible=t,this):this._keyboardAccessible}_makeLegendKeyboardAccessible(){this._parent._svgDescription||(this._parent.svg().append("desc").attr("id",`desc-id-${this._parent.__dcFlag__}`).html(`${this._parent.svgDescription()}`),this._parent.svg().attr("tabindex","0").attr("role","img").attr("aria-labelledby",`desc-id-${this._parent.__dcFlag__}`)),this.container().selectAll(".dc-legend-item-label.dc-tabbable").attr("tabindex",0).on("keydown",P.eventHandler(((t,e)=>{13===e.keyCode&&"object"==typeof t&&t.chart.legendToggle(t),32===e.keyCode&&"object"==typeof t&&(t.chart.legendToggle(t),e.preventDefault())}))).on("focus",P.eventHandler((t=>{this._parent.legendHighlight(t)}))).on("blur",P.eventHandler((t=>{this._parent.legendReset(t)})))}}const xe=()=>new ve,we=2;class Ae{constructor(){this._parent=void 0,this._x=0,this._y=0,this._itemHeight=12,this._gap=5,this._horizontal=!1,this._legendWidth=560,this._itemWidth=70,this._autoItemWidth=!1,this._legendText=tt("name"),this._maxItems=void 0,this._highlightSelected=!1,this._keyboardAccessible=!1,this._g=void 0}parent(p){return arguments.length?(this._parent=p,this):this._parent}x(t){return arguments.length?(this._x=t,this):this._x}y(t){return arguments.length?(this._y=t,this):this._y}gap(t){return arguments.length?(this._gap=t,this):this._gap}highlightSelected(t){return arguments.length?(this._highlightSelected=t,this):this._highlightSelected}itemHeight(t){return arguments.length?(this._itemHeight=t,this):this._itemHeight}horizontal(t){return arguments.length?(this._horizontal=t,this):this._horizontal}legendWidth(t){return arguments.length?(this._legendWidth=t,this):this._legendWidth}itemWidth(t){return arguments.length?(this._itemWidth=t,this):this._itemWidth}autoItemWidth(t){return arguments.length?(this._autoItemWidth=t,this):this._autoItemWidth}legendText(t){return arguments.length?(this._legendText=t,this):this._legendText}maxItems(t){return arguments.length?(this._maxItems=et.isNumber(t)?t:void 0,this):this._maxItems}keyboardAccessible(t){return arguments.length?(this._keyboardAccessible=t,this):this._keyboardAccessible}_legendItemHeight(){return this._gap+this._itemHeight}_makeLegendKeyboardAccessible(){this._parent._svgDescription||(this._parent.svg().append("desc").attr("id",`desc-id-${this._parent.__dcFlag__}`).html(`${this._parent.svgDescription()}`),this._parent.svg().attr("tabindex","0").attr("role","img").attr("aria-labelledby",`desc-id-${this._parent.__dcFlag__}`)),this._parent.svg().selectAll(".dc-legend .dc-tabbable").attr("tabindex",0).on("keydown",P.eventHandler(((t,e)=>{13===e.keyCode&&"object"==typeof t&&t.chart.legendToggle(t),32===e.keyCode&&"object"==typeof t&&(t.chart.legendToggle(t),e.preventDefault())}))).on("focus",P.eventHandler((t=>{this._parent.legendHighlight(t)}))).on("blur",P.eventHandler((t=>{this._parent.legendReset(t)})))}render(){this._parent.svg().select("g.dc-legend").remove(),this._g=this._parent.svg().append("g").attr("class","dc-legend").attr("transform",`translate(${this._x},${this._y})`);let t=this._parent.legendables();const e=this._parent.filters();void 0!==this._maxItems&&(t=t.slice(0,this._maxItems));const n=this._g.selectAll("g.dc-legend-item").data(t).enter().append("g").attr("class","dc-legend-item").on("mouseover",P.eventHandler((t=>{this._parent.legendHighlight(t)}))).on("mouseout",P.eventHandler((t=>{this._parent.legendReset(t)}))).on("click",P.eventHandler((t=>{t.chart.legendToggle(t)})));this._highlightSelected&&n.classed(E.SELECTED_CLASS,(t=>-1!==e.indexOf(t.name))),this._g.selectAll("g.dc-legend-item").classed("fadeout",(t=>t.chart.isLegendableHidden(t))),t.some(tt("dashstyle"))?n.append("line").attr("x1",0).attr("y1",this._itemHeight/2).attr("x2",this._itemHeight).attr("y2",this._itemHeight/2).attr("stroke-width",2).attr("stroke-dasharray",tt("dashstyle")).attr("stroke",tt("color")):n.append("rect").attr("width",this._itemHeight).attr("height",this._itemHeight).attr("fill",(t=>t?t.color:"blue"));{const t=this;n.append("text").text(t._legendText).classed("dc-tabbable",this._keyboardAccessible).attr("x",t._itemHeight+we).attr("y",(function(){return t._itemHeight/2+(this.clientHeight?this.clientHeight:13)/2-2})),this._keyboardAccessible&&this._makeLegendKeyboardAccessible()}let r=0,o=0;{const t=this;n.attr("transform",(function(e,i){if(t._horizontal){const e=!0===t._autoItemWidth?this.getBBox().width+t._gap:t._itemWidth;r+e>t._legendWidth&&r>0&&(++o,r=0);const n=`translate(${r},${o*t._legendItemHeight()})`;return r+=e,n}return`translate(0,${i*t._legendItemHeight()})`}))}}}const legend=()=>new Ae,Me=5,Ce="dc-tooltip",Se="dot",ke="yRef",Te="xRef",Ee=1e-6,Re=3;class De extends Rt{constructor(t,e){super(),this._renderArea=!1,this._dotRadius=Me,this._dataPointRadius=null,this._dataPointFillOpacity=Ee,this._dataPointStrokeOpacity=Ee,this._curve=null,this._interpolate=null,this._tension=null,this._defined=void 0,this._dashStyle=void 0,this._xyTipsOn=!0,this.transitionDuration(500),this.transitionDelay(0),this._rangeBandPadding(1),this.label((t=>et.printSingleValue(t.y0+t.y)),!1),this.anchor(t,e)}plotData(){const t=this.chartBodyG();let e=t.select("g.stack-list");e.empty()&&(e=t.append("g").attr("class","stack-list"));let n=e.selectAll("g.stack").data(this.data());const r=n.enter().append("g").attr("class",((t,i)=>`stack _${i}`));n=r.merge(n),this._drawLine(r,n),this._drawArea(r,n),this._drawDots(t,n),this.renderLabel()&&this._drawLabels(n)}curve(t){return arguments.length?(this._curve=t,this):this._curve}interpolate(t){return D.warnOnce("dc.lineChart.interpolate has been deprecated since version 3.0 use dc.lineChart.curve instead"),arguments.length?(this._interpolate=t,this):this._interpolate}tension(t){return D.warnOnce("dc.lineChart.tension has been deprecated since version 3.0 use dc.lineChart.curve instead"),arguments.length?(this._tension=t,this):this._tension}defined(t){return arguments.length?(this._defined=t,this):this._defined}dashStyle(t){return arguments.length?(this._dashStyle=t,this):this._dashStyle}renderArea(t){return arguments.length?(this._renderArea=t,this):this._renderArea}_getColor(t,i){return this.getColor.call(t,t.values,i)}_getCurveFactory(){let t=null;return this._curve?this._curve:(t="function"==typeof this._interpolate?this._interpolate:{linear:x.curveLinear,"linear-closed":x.curveLinearClosed,step:x.curveStep,"step-before":x.curveStepBefore,"step-after":x.curveStepAfter,basis:x.curveBasis,"basis-open":x.curveBasisOpen,"basis-closed":x.curveBasisClosed,bundle:x.curveBundle,cardinal:x.curveCardinal,"cardinal-open":x.curveCardinalOpen,"cardinal-closed":x.curveCardinalClosed,monotone:x.curveMonotoneX}[this._interpolate],t||(t=x.curveLinear),null!==this._tension&&("function"!=typeof t.tension?D.warn("tension was specified but the curve/interpolate does not support it."):t=t.tension(this._tension)),t)}_drawLine(t,e){const n=x.line().x((t=>this.x()(t.x))).y((t=>this.y()(t.y+t.y0))).curve(this._getCurveFactory());this._defined&&n.defined(this._defined);const path=t.append("path").attr("class","line").attr("stroke",((t,i)=>this._getColor(t,i)));this._dashStyle&&path.attr("stroke-dasharray",this._dashStyle),V(e.select("path.line"),this.transitionDuration(),this.transitionDelay()).attr("stroke",((t,i)=>this._getColor(t,i))).attr("d",(t=>this._safeD(n(t.values))))}_drawArea(t,e){if(this._renderArea){const n=x.area().x((t=>this.x()(t.x))).y1((t=>this.y()(t.y+t.y0))).y0((t=>this.y()(t.y0))).curve(this._getCurveFactory());this._defined&&n.defined(this._defined),t.append("path").attr("class","area").attr("fill",((t,i)=>this._getColor(t,i))).attr("d",(t=>this._safeD(n(t.values)))),V(e.select("path.area"),this.transitionDuration(),this.transitionDelay()).attr("fill",((t,i)=>this._getColor(t,i))).attr("d",(t=>this._safeD(n(t.values))))}}_safeD(t){return!t||t.indexOf("NaN")>=0?"M0,0":t}_drawDots(t,e){if("always"===this.xyTipsOn()||!this.brushOn()&&!this.parentBrushOn()&&this.xyTipsOn()){const n=`${Ce}-list`;let r=t.select(`g.${n}`);r.empty()&&(r=t.append("g").attr("class",n)),e.each(((data,t)=>{let e=data.values;this._defined&&(e=e.filter(this._defined));let g=r.select(`g.${Ce}._${t}`);g.empty()&&(g=r.append("g").attr("class",`${Ce} _${t}`)),this._createRefLines(g);const n=g.selectAll(`circle.${Se}`).data(e,tt("x")),c=this,l=n.enter().append("circle").attr("class",Se).classed("dc-tabbable",this._keyboardAccessible).attr("cx",(t=>et.safeNumber(this.x()(t.x)))).attr("cy",(t=>et.safeNumber(this.y()(t.y+t.y0)))).attr("r",this._getDotRadius()).style("fill-opacity",this._dataPointFillOpacity).style("stroke-opacity",this._dataPointStrokeOpacity).attr("fill",this.getColor).attr("stroke",this.getColor).on("mousemove",(function(){const t=o.select(this);c._showDot(t),c._showRefLines(t,g)})).on("mouseout",(function(){const t=o.select(this);c._hideDot(t),c._hideRefLines(g)})).merge(n);this._keyboardAccessible&&this._svg.selectAll(".dc-tabbable").attr("tabindex",0).on("focus",(function(){const t=o.select(this);c._showDot(t),c._showRefLines(t,g)})).on("blur",(function(){const t=o.select(this);c._hideDot(t),c._hideRefLines(g)})),l.call((t=>this._doRenderTitle(t,data))),V(l,this.transitionDuration()).attr("cx",(t=>et.safeNumber(this.x()(t.x)))).attr("cy",(t=>et.safeNumber(this.y()(t.y+t.y0)))).attr("fill",this.getColor),n.exit().remove()}))}}_drawLabels(t){const e=this;t.each((function(data,t){const n=o.select(this).selectAll("text.lineLabel").data(data.values,tt("x")),r=n.enter().append("text").attr("class","lineLabel").attr("text-anchor","middle").merge(n);V(r,e.transitionDuration()).attr("x",(t=>et.safeNumber(e.x()(t.x)))).attr("y",(t=>{const n=e.y()(t.y+t.y0)-Re;return et.safeNumber(n)})).text((t=>e.label()(t))),V(n.exit(),e.transitionDuration()).attr("height",0).remove()}))}_createRefLines(g){(g.select(`path.${ke}`).empty()?g.append("path").attr("class",ke):g.select(`path.${ke}`)).style("display","none").attr("stroke-dasharray","5,5"),(g.select(`path.${Te}`).empty()?g.append("path").attr("class",Te):g.select(`path.${Te}`)).style("display","none").attr("stroke-dasharray","5,5")}_showDot(t){return t.style("fill-opacity",.8),t.style("stroke-opacity",.8),t.attr("r",this._dotRadius),t}_showRefLines(t,g){const e=t.attr("cx"),n=t.attr("cy"),r=`M${this._yAxisX()-this.margins().left} ${n}L${e} ${n}`,o=`M${e} ${this.yAxisHeight()}L${e} ${n}`;g.select(`path.${ke}`).style("display","").attr("d",r),g.select(`path.${Te}`).style("display","").attr("d",o)}_getDotRadius(){return this._dataPointRadius||this._dotRadius}_hideDot(t){t.style("fill-opacity",this._dataPointFillOpacity).style("stroke-opacity",this._dataPointStrokeOpacity).attr("r",this._getDotRadius())}_hideRefLines(g){g.select(`path.${ke}`).style("display","none"),g.select(`path.${Te}`).style("display","none")}_doRenderTitle(t,e){this.renderTitle()&&(t.select("title").remove(),t.append("title").text(tt("data",this.title(e.name))))}xyTipsOn(t){return arguments.length?(this._xyTipsOn=t,this):this._xyTipsOn}dotRadius(t){return arguments.length?(this._dotRadius=t,this):this._dotRadius}renderDataPoints(t){return arguments.length?(t?(this._dataPointFillOpacity=t.fillOpacity||.8,this._dataPointStrokeOpacity=t.strokeOpacity||0,this._dataPointRadius=t.radius||2):(this._dataPointFillOpacity=Ee,this._dataPointStrokeOpacity=Ee,this._dataPointRadius=null),this):{fillOpacity:this._dataPointFillOpacity,strokeOpacity:this._dataPointStrokeOpacity,radius:this._dataPointRadius}}_colorFilter(t,e,n){return function(){const r=o.select(this),c=r.attr("stroke")===t&&r.attr("stroke-dasharray")===(e instanceof Array?e.join(","):null)||r.attr("fill")===t;return n?!c:c}}legendHighlight(t){this.isLegendableHidden(t)||this.g().selectAll("path.line, path.area").classed("highlight",this._colorFilter(t.color,t.dashstyle)).classed("fadeout",this._colorFilter(t.color,t.dashstyle,!0))}legendReset(){this.g().selectAll("path.line, path.area").classed("highlight",!1).classed("fadeout",!1)}legendables(){const t=super.legendables();return this._dashStyle?t.map((t=>(t.dashstyle=this._dashStyle,t))):t}}const Le=(t,e)=>new De(t,e),Ne="number-display";class Pe extends ft{constructor(t,e){super(),this._formatNumber=r.format(".2s"),this._html={one:"",some:"",none:""},this._lastValue=void 0,this._ariaLiveRegion=!1,this._mandatoryAttributes(["group"]),this.ordering((t=>t.value)),this.data((t=>{const e=t.value?t.value():this._maxBin(t.all());return this.valueAccessor()(e)})),this.transitionDuration(250),this.transitionDelay(0),this.anchor(t,e)}html(html){return arguments.length?(html.none?this._html.none=html.none:html.one?this._html.none=html.one:html.some&&(this._html.none=html.some),html.one?this._html.one=html.one:html.some&&(this._html.one=html.some),html.some?this._html.some=html.some:html.one&&(this._html.some=html.one),this):this._html}value(){return this.data()}_maxBin(t){if(!t.length)return null;const e=this._computeOrderedGroups(t);return e[e.length-1]}_doRender(){const t=this.value();let span=this.selectAll(`.${Ne}`);span.empty()&&(span=span.data([0]).enter().append("span").attr("class",Ne).classed("dc-tabbable",this._keyboardAccessible).merge(span),this._keyboardAccessible&&span.attr("tabindex","0"),this._ariaLiveRegion&&(this.transitionDuration(0),span.attr("aria-live","polite")));{const e=this;span.transition().duration(e.transitionDuration()).delay(e.transitionDelay()).ease(A.easeQuad).tween("text",(function(){const n=isFinite(e._lastValue)?e._lastValue:0,r=f.interpolateNumber(n||0,t);e._lastValue=t;const o=this;return n=>{let html=null;const c=e.formatNumber()(r(n));0===t&&""!==e._html.none?html=e._html.none:1===t&&""!==e._html.one?html=e._html.one:""!==e._html.some&&(html=e._html.some),o.innerHTML=html?html.replace("%number",c):c}}))}}_doRedraw(){return this._doRender()}formatNumber(t){return arguments.length?(this._formatNumber=t,this):this._formatNumber}ariaLiveRegion(t){return arguments.length?(this._ariaLiveRegion=t,this):this._ariaLiveRegion}}const Oe=(t,e)=>new Pe(t,e),ze=.5;class Be extends(yt(gt(ft))){constructor(t,e){super(),this._sliceCssClass="pie-slice",this._labelCssClass="pie-label",this._sliceGroupCssClass="pie-slice-group",this._labelGroupCssClass="pie-label-group",this._emptyCssClass="empty-chart",this._emptyTitle="empty",this._radius=void 0,this._givenRadius=void 0,this._innerRadius=0,this._externalRadiusPadding=0,this._g=void 0,this._cx=void 0,this._cy=void 0,this._minAngleForLabel=ze,this._externalLabelRadius=void 0,this._drawPaths=!1,this.colorAccessor((t=>this.cappedKeyAccessor(t))),this.title((t=>`${this.cappedKeyAccessor(t)}: ${this.cappedValueAccessor(t)}`)),this.label((t=>this.cappedKeyAccessor(t))),this.renderLabel(!0),this.transitionDuration(350),this.transitionDelay(0),this.anchor(t,e)}slicesCap(t){return this.cap(t)}_doRender(){return this.resetSvg(),this._g=this.svg().append("g").attr("transform",`translate(${this.cx()},${this.cy()})`),this._g.append("g").attr("class",this._sliceGroupCssClass),this._g.append("g").attr("class",this._labelGroupCssClass),this._drawChart(),this}_drawChart(){const t=l.min([this.width(),this.height()])/2;this._radius=this._givenRadius&&this._givenRadius<t?this._givenRadius:t;const e=this._buildArcs(),n=this._pieLayout();let r;if(l.sum(this.data(),(t=>this.cappedValueAccessor(t)))?(r=n(this.data()),this._g.classed(this._emptyCssClass,!1)):(r=n([{key:this._emptyTitle,value:1,others:[this._emptyTitle]}]),this._g.classed(this._emptyCssClass,!0)),this._g){const t=this._g.select(`g.${this._sliceGroupCssClass}`).selectAll(`g.${this._sliceCssClass}`).data(r),n=this._g.select(`g.${this._labelGroupCssClass}`).selectAll(`text.${this._labelCssClass}`).data(r);this._removeElements(t,n),this._createElements(t,n,e,r),this._updateElements(r,e),this._highlightFilter(),V(this._g,this.transitionDuration(),this.transitionDelay()).attr("transform",`translate(${this.cx()},${this.cy()})`)}}_createElements(t,e,n,r){const o=this._createSliceNodes(t);this._createSlicePath(o,n),this._createTitles(o),this._createLabels(e,r,n)}_createSliceNodes(t){return t.enter().append("g").attr("class",((t,i)=>`${this._sliceCssClass} _${i}`)).classed("dc-tabbable",this._keyboardAccessible)}_createSlicePath(t,e){const n=t.append("path").attr("fill",((t,i)=>this._fill(t,i))).on("click",P.eventHandler((t=>this._onClick(t)))).attr("d",((t,i)=>this._safeArc(t,i,e)));this._keyboardAccessible&&this._makeKeyboardAccessible(this._onClick);const r=V(n,this.transitionDuration(),this.transitionDelay());if(r.attrTween){const t=this;r.attrTween("d",(function(e){return t._tweenPie(e,this)}))}}_createTitles(t){this.renderTitle()&&t.append("title").text((t=>this.title()(t.data)))}_applyLabelText(t){t.text((t=>{const data=t.data;return!this._sliceHasNoData(data)&&!this._sliceTooSmall(t)||this._isSelectedSlice(t)?this.label()(t.data):""}))}_positionLabels(t,e){this._applyLabelText(t),V(t,this.transitionDuration(),this.transitionDelay()).attr("transform",(t=>this._labelPosition(t,e))).attr("text-anchor","middle")}_highlightSlice(i,t){this.select(`g.pie-slice._${i}`).classed("highlight",t)}_createLabels(t,e,n){if(this.renderLabel()){const r=t.enter().append("text").attr("class",((t,i)=>{let e=`${this._sliceCssClass} ${this._labelCssClass} _${i}`;return this._externalLabelRadius&&(e+=" external"),e})).on("click",P.eventHandler((t=>this._onClick(t)))).on("mouseover",P.eventHandler((t=>{this._highlightSlice(t.index,!0)}))).on("mouseout",P.eventHandler((t=>{this._highlightSlice(t.index,!1)})));this._positionLabels(r,n),this._externalLabelRadius&&this._drawPaths&&this._updateLabelPaths(e,n)}}_updateLabelPaths(t,e){let polyline=this._g.selectAll(`polyline.${this._sliceCssClass}`).data(t);polyline.exit().remove(),polyline=polyline.enter().append("polyline").attr("class",((t,i)=>`pie-path _${i} ${this._sliceCssClass}`)).on("click",P.eventHandler((t=>this._onClick(t)))).on("mouseover",P.eventHandler((t=>{this._highlightSlice(t.index,!0)}))).on("mouseout",P.eventHandler((t=>{this._highlightSlice(t.index,!1)}))).merge(polyline);const n=x.arc().outerRadius(this._radius-this._externalRadiusPadding+this._externalLabelRadius).innerRadius(this._radius-this._externalRadiusPadding),r=V(polyline,this.transitionDuration(),this.transitionDelay());r.attrTween?r.attrTween("points",(function(t){let r=this._current||t;r={startAngle:r.startAngle,endAngle:r.endAngle};const o=f.interpolate(r,t);return this._current=o(0),t=>{const r=o(t);return[e.centroid(r),n.centroid(r)]}})):r.attr("points",(t=>[e.centroid(t),n.centroid(t)])),r.style("visibility",(t=>t.endAngle-t.startAngle<1e-4?"hidden":"visible"))}_updateElements(t,e){this._updateSlicePaths(t,e),this._updateLabels(t,e),this._updateTitles(t)}_updateSlicePaths(t,e){const n=this._g.selectAll(`g.${this._sliceCssClass}`).data(t).select("path").attr("d",((t,i)=>this._safeArc(t,i,e))),r=V(n,this.transitionDuration(),this.transitionDelay());if(r.attrTween){const t=this;r.attrTween("d",(function(e){return t._tweenPie(e,this)}))}r.attr("fill",((t,i)=>this._fill(t,i)))}_updateLabels(t,e){if(this.renderLabel()){const n=this._g.selectAll(`text.${this._labelCssClass}`).data(t);this._positionLabels(n,e),this._externalLabelRadius&&this._drawPaths&&this._updateLabelPaths(t,e)}}_updateTitles(t){this.renderTitle()&&this._g.selectAll(`g.${this._sliceCssClass}`).data(t).select("title").text((t=>this.title()(t.data)))}_removeElements(t,e){t.exit().remove(),e.exit().remove()}_highlightFilter(){const t=this;this.hasFilter()?this.selectAll(`g.${this._sliceCssClass}`).each((function(e){t._isSelectedSlice(e)?t.highlightSelected(this):t.fadeDeselected(this)})):this.selectAll(`g.${this._sliceCssClass}`).each((function(){t.resetHighlight(this)}))}externalRadiusPadding(t){return arguments.length?(this._externalRadiusPadding=t,this):this._externalRadiusPadding}innerRadius(t){return arguments.length?(this._innerRadius=t,this):this._innerRadius}radius(t){return arguments.length?(this._givenRadius=t,this):this._givenRadius}cx(t){return arguments.length?(this._cx=t,this):this._cx||this.width()/2}cy(t){return arguments.length?(this._cy=t,this):this._cy||this.height()/2}_buildArcs(){return x.arc().outerRadius(this._radius-this._externalRadiusPadding).innerRadius(this._innerRadius)}_isSelectedSlice(t){return this.hasFilter(this.cappedKeyAccessor(t.data))}_doRedraw(){return this._drawChart(),this}minAngleForLabel(t){return arguments.length?(this._minAngleForLabel=t,this):this._minAngleForLabel}_pieLayout(){return x.pie().sort(null).value((t=>this.cappedValueAccessor(t)))}_sliceTooSmall(t){const e=t.endAngle-t.startAngle;return isNaN(e)||e<this._minAngleForLabel}_sliceHasNoData(t){return 0===this.cappedValueAccessor(t)}_isOffCanvas(t){return!t||isNaN(t.startAngle)||isNaN(t.endAngle)}_fill(t,i){return this.getColor(t.data,i)}_onClick(t){this._g.attr("class")!==this._emptyCssClass&&this.onClick(t.data)}_safeArc(t,i,e){let path=e(t,i);return path.indexOf("NaN")>=0&&(path="M0,0"),path}emptyTitle(title){return 0===arguments.length?this._emptyTitle:(this._emptyTitle=title,this)}externalLabels(t){return 0===arguments.length?this._externalLabelRadius:(this._externalLabelRadius=t||void 0,this)}drawPaths(t){return 0===arguments.length?this._drawPaths:(this._drawPaths=t,this)}_labelPosition(t,e){let n;return n=this._externalLabelRadius?x.arc().outerRadius(this._radius-this._externalRadiusPadding+this._externalLabelRadius).innerRadius(this._radius-this._externalRadiusPadding+this._externalLabelRadius).centroid(t):e.centroid(t),isNaN(n[0])||isNaN(n[1])?"translate(0,0)":`translate(${n})`}legendables(){return this.data().map(((t,i)=>{const e={name:t.key,data:t.value,others:t.others,chart:this};return e.color=this.getColor(t,i),e}))}legendHighlight(t){this._highlightSliceFromLegendable(t,!0)}legendReset(t){this._highlightSliceFromLegendable(t,!1)}legendToggle(t){this.onClick({key:t.name,others:t.others})}_highlightSliceFromLegendable(t,e){this.selectAll("g.pie-slice").each((function(n){t.name===n.data.key&&o.select(this).classed("highlight",e)}))}_tweenPie(b,element){b.innerRadius=this._innerRadius;let t=element._current;t=this._isOffCanvas(t)?{startAngle:0,endAngle:0}:{startAngle:t.startAngle,endAngle:t.endAngle};const i=f.interpolate(t,b);return element._current=i(0),t=>this._safeArc(i(t),0,this._buildArcs())}}const Fe=(t,e)=>new Be(t,e);class He extends(yt(gt(mt))){constructor(t,e){super(),this._g=void 0,this._labelOffsetX=10,this._labelOffsetY=15,this._hasLabelOffsetY=!1,this._dyOffset="0.35em",this._titleLabelOffsetX=2,this._gap=5,this._fixedBarHeight=!1,this._rowCssClass="row",this._titleRowCssClass="titlerow",this._renderTitleLabel=!1,this._x=void 0,this._elasticX=void 0,this._xAxis=_.axisBottom(),this._rowData=void 0,this.rowsCap=this.cap,this.title((t=>`${this.cappedKeyAccessor(t)}: ${this.cappedValueAccessor(t)}`)),this.label((t=>this.cappedKeyAccessor(t))),this.anchor(t,e)}_calculateAxisScale(){if(!this._x||this._elasticX){const t=l.extent(this._rowData,(t=>this.cappedValueAccessor(t)));t[0]>0&&(t[0]=0),t[1]<0&&(t[1]=0),this._x=h.scaleLinear().domain(t).range([0,this.effectiveWidth()])}this._xAxis.scale(this._x)}_drawAxis(){let t=this._g.select("g.axis");this._calculateAxisScale(),t.empty()&&(t=this._g.append("g").attr("class","axis")),t.attr("transform",`translate(0, ${this.effectiveHeight()})`),V(t,this.transitionDuration(),this.transitionDelay()).call(this._xAxis)}_doRender(){return this.resetSvg(),this._g=this.svg().append("g").attr("transform",`translate(${this.margins().left},${this.margins().top})`),this._drawChart(),this}x(t){return arguments.length?(this._x=t,this):this._x}_drawGridLines(){this._g.selectAll("g.tick").select("line.grid-line").remove(),this._g.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",(()=>-this.effectiveHeight()))}_drawChart(){this._rowData=this.data(),this._drawAxis(),this._drawGridLines();let t=this._g.selectAll(`g.${this._rowCssClass}`).data(this._rowData);this._removeElements(t),t=this._createElements(t).merge(t),this._updateElements(t)}_createElements(t){const e=t.enter().append("g").attr("class",((t,i)=>`${this._rowCssClass} _${i}`));return e.append("rect").attr("width",0),this._createLabels(e),e}_removeElements(t){t.exit().remove()}_rootValue(){const t=this._x(0);return t===-1/0||t!=t?this._x(1):t}_updateElements(t){const e=this._rowData.length;let n;n=this._fixedBarHeight?this._fixedBarHeight:(this.effectiveHeight()-(e+1)*this._gap)/e,this._hasLabelOffsetY||(this._labelOffsetY=n/2);const rect=t.attr("transform",((t,i)=>`translate(0,${(i+1)*this._gap+i*n})`)).select("rect").attr("height",n).attr("fill",this.getColor).on("click",P.eventHandler((t=>this._onClick(t)))).classed("dc-tabbable",this._keyboardAccessible).classed("deselected",(t=>!!this.hasFilter()&&!this._isSelectedRow(t))).classed("selected",(t=>!!this.hasFilter()&&this._isSelectedRow(t)));this._keyboardAccessible&&this._makeKeyboardAccessible((t=>this._onClick(t))),V(rect,this.transitionDuration(),this.transitionDelay()).attr("width",(t=>Math.abs(this._rootValue()-this._x(this.cappedValueAccessor(t))))).attr("transform",(t=>this._translateX(t))),this._createTitles(t),this._updateLabels(t)}_createTitles(t){this.renderTitle()&&(t.select("title").remove(),t.append("title").text(this.title()))}_createLabels(t){this.renderLabel()&&t.append("text").on("click",P.eventHandler((t=>this._onClick(t)))),this.renderTitleLabel()&&t.append("text").attr("class",this._titleRowCssClass).on("click",P.eventHandler((t=>this._onClick(t))))}_updateLabels(t){if(this.renderLabel()){const e=t.select("text").attr("x",this._labelOffsetX).attr("y",this._labelOffsetY).attr("dy",this._dyOffset).on("click",P.eventHandler((t=>this._onClick(t)))).attr("class",((t,i)=>`${this._rowCssClass} _${i}`)).text((t=>this.label()(t)));V(e,this.transitionDuration(),this.transitionDelay()).attr("transform",(t=>this._translateX(t)))}if(this.renderTitleLabel()){const e=t.select(`.${this._titleRowCssClass}`).attr("x",this.effectiveWidth()-this._titleLabelOffsetX).attr("y",this._labelOffsetY).attr("dy",this._dyOffset).attr("text-anchor","end").on("click",P.eventHandler((t=>this._onClick(t)))).attr("class",((t,i)=>`${this._titleRowCssClass} _${i}`)).text((t=>this.title()(t)));V(e,this.transitionDuration(),this.transitionDelay()).attr("transform",(t=>this._translateX(t)))}}renderTitleLabel(t){return arguments.length?(this._renderTitleLabel=t,this):this._renderTitleLabel}_onClick(t){this.onClick(t)}_translateX(t){const e=this._x(this.cappedValueAccessor(t)),n=this._rootValue();return`translate(${e>n?n:e},0)`}_doRedraw(){return this._drawChart(),this}xAxis(t){return arguments.length?(this._xAxis=t,this):this._xAxis}fixedBarHeight(t){return arguments.length?(this._fixedBarHeight=t,this):this._fixedBarHeight}gap(t){return arguments.length?(this._gap=t,this):this._gap}elasticX(t){return arguments.length?(this._elasticX=t,this):this._elasticX}labelOffsetX(t){return arguments.length?(this._labelOffsetX=t,this):this._labelOffsetX}labelOffsetY(t){return arguments.length?(this._labelOffsetY=t,this._hasLabelOffsetY=!0,this):this._labelOffsetY}titleLabelOffsetX(t){return arguments.length?(this._titleLabelOffsetX=t,this):this._titleLabelOffsetX}_isSelectedRow(t){return this.hasFilter(this.cappedKeyAccessor(t))}}const $e=(t,e)=>new He(t,e);class Ye extends St{constructor(t,e){super(),this._symbol=x.symbol(),this._existenceAccessor=t=>t.value;const n=this.keyAccessor();this.keyAccessor((t=>n(t)[0])),this.valueAccessor((t=>n(t)[1])),this.colorAccessor((()=>this._groupName)),this.title((t=>`${this.keyAccessor()(t)},${this.valueAccessor()(t)}: ${this.existenceAccessor()(t)}`)),this._highlightedSize=7,this._symbolSize=5,this._excludedSize=3,this._excludedColor=null,this._excludedOpacity=1,this._emptySize=0,this._emptyOpacity=0,this._nonemptyOpacity=1,this._emptyColor=null,this._filtered=[],this._canvas=null,this._context=null,this._useCanvas=!1,this.brush(m.brush()),this._symbol.size(((t,i)=>this._elementSize(t,i))),this.anchor(t,e)}_canvasElementSize(t,e){return this._existenceAccessor(t)?e?this._symbolSize/Math.sqrt(Math.PI):this._excludedSize/Math.sqrt(Math.PI):this._emptySize/Math.sqrt(Math.PI)}_elementSize(t,i){return this._existenceAccessor(t)?this._filtered[i]?Math.pow(this._symbolSize,2):Math.pow(this._excludedSize,2):Math.pow(this._emptySize,2)}_locator(t){return`translate(${this.x()(this.keyAccessor()(t))},${this.y()(this.valueAccessor()(t))})`}filter(filter){return arguments.length?super.filter(J.RangedTwoDimensionalFilter(filter)):super.filter()}resetSvg(){if(this._useCanvas){super.resetSvg(),this.select("canvas").remove();const t=this.svg();this.root().style("position","relative"),t.style("position","relative");const e=isNaN(parseInt(t.style("left"),10))?0:parseInt(t.style("left"),10),n=isNaN(parseInt(t.style("top"),10))?0:parseInt(t.style("top"),10),r=this.effectiveWidth(),o=this.effectiveHeight(),c=this.margins(),l=window.devicePixelRatio||1;return this._canvas=this.root().append("canvas").attr("x",0).attr("y",0).attr("width",r*l).attr("height",o*l).style("width",`${r}px`).style("height",`${o}px`).style("position","absolute").style("top",`${c.top+n}px`).style("left",`${c.left+e}px`).style("z-index",-1).style("pointer-events","none"),this._context=this._canvas.node().getContext("2d"),this._context.scale(l,l),this._context.rect(0,0,r,o),this._context.clip(),this._context.imageSmoothingQuality="high",this.svg()}return super.resetSvg()}_resizeCanvas(){const t=this.effectiveWidth(),e=this.effectiveHeight(),n=window.devicePixelRatio||1;this._canvas.attr("width",t*n).attr("height",e*n).style("width",`${t}px`).style("height",`${e}px`),this._context.scale(n,n)}useCanvas(t){return arguments.length?(this._useCanvas=t,this):this._useCanvas}canvas(t){return arguments.length?(this._canvas=t,this):this._canvas}context(){return this._context}_plotOnCanvas(t){this._resizeCanvas();const e=this.context();e.clearRect(0,0,1*(e.canvas.width+2),1*(e.canvas.height+2)),this.data().forEach(((n,i)=>{const r=!this.filter()||this.filter().isFiltered([n.key[0],n.key[1]]);let o=1;o=this._existenceAccessor(n)?r?this._nonemptyOpacity:this.excludedOpacity():this._emptyOpacity;let c=null;c=this._emptyColor&&!this._existenceAccessor(n)?this._emptyColor:this.excludedColor()&&!r?this.excludedColor():this.getColor(n);let l=this._canvasElementSize(n,r);if(t){const e=c===t.color,n=.1;e||(o=n),e&&(l=this._highlightedSize/Math.sqrt(Math.PI))}e.save(),e.globalAlpha=o,e.beginPath(),e.arc(this.x()(this.keyAccessor()(n)),this.y()(this.valueAccessor()(n)),l,0,2*Math.PI,!0),e.fillStyle=c,e.fill(),e.restore()}))}_plotOnSVG(){const data=this.data();this._keyboardAccessible&&data.sort(((a,b)=>l.ascending(this.keyAccessor()(a),this.keyAccessor()(b))));let t=this.chartBodyG().selectAll("path.symbol").data(data);V(t.exit(),this.transitionDuration(),this.transitionDelay()).attr("opacity",0).remove(),t=t.enter().append("path").attr("class","symbol").classed("dc-tabbable",this._keyboardAccessible).attr("opacity",0).attr("fill",this.getColor).attr("transform",(t=>this._locator(t))).merge(t),this._keyboardAccessible&&(this._makeKeyboardAccessible(),t.order()),t.call((s=>this._renderTitles(s,data))),t.each(((t,i)=>{this._filtered[i]=!this.filter()||this.filter().isFiltered([this.keyAccessor()(t),this.valueAccessor()(t)])})),V(t,this.transitionDuration(),this.transitionDelay()).attr("opacity",((t,i)=>this._existenceAccessor(t)?this._filtered[i]?this._nonemptyOpacity:this.excludedOpacity():this._emptyOpacity)).attr("fill",((t,i)=>this._emptyColor&&!this._existenceAccessor(t)?this._emptyColor:this.excludedColor()&&!this._filtered[i]?this.excludedColor():this.getColor(t))).attr("transform",(t=>this._locator(t))).attr("d",this._symbol)}plotData(){this._useCanvas?this._plotOnCanvas():this._plotOnSVG()}_renderTitles(t,e){this.renderTitle()&&(t.selectAll("title").remove(),t.append("title").text((t=>this.title()(t))))}existenceAccessor(t){return arguments.length?(this._existenceAccessor=t,this):this._existenceAccessor}symbol(t){return arguments.length?(this._symbol.type(t),this):this._symbol.type()}customSymbol(t){return arguments.length?(this._symbol=t,this._symbol.size(((t,i)=>this._elementSize(t,i))),this):this._symbol}symbolSize(t){return arguments.length?(this._symbolSize=t,this):this._symbolSize}highlightedSize(t){return arguments.length?(this._highlightedSize=t,this):this._highlightedSize}excludedSize(t){return arguments.length?(this._excludedSize=t,this):this._excludedSize}excludedColor(t){return arguments.length?(this._excludedColor=t,this):this._excludedColor}excludedOpacity(t){return arguments.length?(this._excludedOpacity=t,this):this._excludedOpacity}emptySize(t){return arguments.length?(this._emptySize=t,this):this._emptySize}hiddenSize(t){return arguments.length?this.emptySize(t):this.emptySize()}emptyColor(t){return arguments.length?(this._emptyColor=t,this):this._emptyColor}emptyOpacity(t){return arguments.length?(this._emptyOpacity=t,this):this._emptyOpacity}nonemptyOpacity(t){return arguments.length?(this._nonemptyOpacity=t,this):this._emptyOpacity}legendables(){return[{chart:this,name:this._groupName,color:this.getColor()}]}legendHighlight(t){this._useCanvas?this._plotOnCanvas(t):(this._resizeSymbolsWhere((s=>s.attr("fill")===t.color),this._highlightedSize),this.chartBodyG().selectAll(".chart-body path.symbol").filter((function(){return o.select(this).attr("fill")!==t.color})).classed("fadeout",!0))}legendReset(t){this._useCanvas?this._plotOnCanvas(t):(this._resizeSymbolsWhere((s=>s.attr("fill")===t.color),this._symbolSize),this.chartBodyG().selectAll(".chart-body path.symbol").filter((function(){return o.select(this).attr("fill")!==t.color})).classed("fadeout",!1))}_resizeSymbolsWhere(t,e){const n=this.chartBodyG().selectAll(".chart-body path.symbol").filter((function(){return t(o.select(this))})),r=this._symbol.size();this._symbol.size(Math.pow(e,2)),V(n,this.transitionDuration(),this.transitionDelay()).attr("d",this._symbol),this._symbol.size(r)}createBrushHandlePaths(){}extendBrush(t){return this.round()&&(t[0]=t[0].map(this.round()),t[1]=t[1].map(this.round())),t}brushIsEmpty(t){return!t||t[0][0]>=t[1][0]||t[0][1]>=t[1][1]}_brushing(t){if(this._ignoreBrushEvents)return;let e=t.selection,n=this.brushIsEmpty(e);e&&(e=e.map((t=>t.map(((t,i)=>(0===i?this.x():this.y()).invert(t))))),e=this.extendBrush(e),n=n&&this.brushIsEmpty(e)),this.redrawBrush(e,!1);const r=n?null:J.RangedTwoDimensionalFilter(e);K.trigger((()=>{this.replaceFilter(r),this.redrawGroup()}),E.EVENT_DELAY)}redrawBrush(t,e){if(this._gBrush=this.gBrush(),this.brushOn()&&this._gBrush)if(this.resizing()&&this.setBrushExtents(e),t){t=t.map((t=>t.map(((t,i)=>(0===i?this.x():this.y())(t)))));const n=X(e,this.transitionDuration(),this.transitionDelay())(this._gBrush);this._withoutBrushEvents((()=>{n.call(this.brush().move,t)}))}else this._withoutBrushEvents((()=>{this._gBrush.call(this.brush().move,t)}));this.fadeDeselectedArea(t)}}const Ie=(t,e)=>new Ye(t,e),Ge="dc-select-menu",Ue="dc-select-option";class qe extends ft{constructor(t,e){super(),this._select=void 0,this._promptText="Select all",this._multiple=!1,this._promptValue=null,this._numberVisible=null,this.data((t=>t.all().filter(this._filterDisplayed))),this._filterDisplayed=t=>this.valueAccessor()(t)>0,this._order=(a,b)=>this.keyAccessor()(a)>this.keyAccessor()(b)?1:this.keyAccessor()(a)<this.keyAccessor()(b)?-1:0,this.anchor(t,e)}_doRender(){return this.select("select").remove(),this._select=this.root().append("select").classed(Ge,!0),this._select.append("option").text(this._promptText).attr("value",""),this._doRedraw(),this}_doRedraw(){return this._setAttributes(),this._renderOptions(),this.hasFilter()&&this._multiple?this._select.selectAll("option").property("selected",(t=>void 0!==t&&this.filters().indexOf(String(this.keyAccessor()(t)))>=0)):this.hasFilter()?this._select.property("value",this.filter()):this._select.property("value",""),this}_renderOptions(){const t=this._select.selectAll(`option.${Ue}`).data(this.data(),(t=>this.keyAccessor()(t)));t.exit().remove(),t.enter().append("option").classed(Ue,!0).attr("value",(t=>this.keyAccessor()(t))).merge(t).text(this.title()),this._select.selectAll(`option.${Ue}`).sort(this._order),this._select.on("change",P.eventHandler(((t,e)=>this._onChange(t,e))))}_onChange(t,e){let n;const r=e.target;n=r.selectedOptions?Array.prototype.slice.call(r.selectedOptions).map((t=>t.value)):[].slice.call(e.target.options).filter((option=>option.selected)).map((option=>option.value)),1===n.length&&""===n[0]?n=this._promptValue||null:this._multiple||1!==n.length||(n=n[0]),this.onChange(n)}onChange(t){t&&this._multiple?this.replaceFilter([t]):t?this.replaceFilter(t):this.filterAll(),K.trigger((()=>{this.redrawGroup()}))}_setAttributes(){this._multiple?this._select.attr("multiple",!0):this._select.attr("multiple",null),null!==this._numberVisible?this._select.attr("size",this._numberVisible):this._select.attr("size",null)}order(t){return arguments.length?(this._order=t,this):this._order}promptText(t){return arguments.length?(this._promptText=t,this):this._promptText}filterDisplayed(t){return arguments.length?(this._filterDisplayed=t,this):this._filterDisplayed}multiple(t){return arguments.length?(this._multiple=t,this):this._multiple}promptValue(t){return arguments.length?(this._promptValue=t,this):this._promptValue}numberVisible(t){return arguments.length?(this._numberVisible=t,this):this._numberVisible}size(t){return D.warnOnce("selectMenu.size is ambiguous - use selectMenu.numberVisible instead"),arguments.length?this.numberVisible(t):this.numberVisible()}}const Ve=(t,e)=>new qe(t,e);class Xe extends Jt{constructor(t,e){super(t,e),this._keySort=(a,b)=>l.ascending(this.keyAccessor()(a),this.keyAccessor()(b)),this._charts={},this._chartFunction=Le,this._chartGroup=e,this._seriesAccessor=void 0,this._seriesSort=l.ascending,this._valueSort=this._keySort,this._mandatoryAttributes().push("seriesAccessor","chart"),this.shareColors(!0)}_compose(t){super.compose(t)}compose(t){throw new Error("Not supported for this chart type")}_preprocessData(){const t=[];let e;const n=P.nester({key:this._seriesAccessor,sortKeys:this._seriesSort,sortValues:this._valueSort,entries:this.data()}).map(((sub,i)=>{const n=this._charts[sub.key]||this._chartFunction(this,this._chartGroup,sub.key,i);return this._charts[sub.key]||(e=!0),this._charts[sub.key]=n,t.push(sub.key),n.dimension(this.dimension()).group({all:"function"==typeof sub.values?sub.values:et.constant(sub.values)},sub.key).keyAccessor(this.keyAccessor()).valueAccessor(this.valueAccessor()).brushOn(!1)}));Object.keys(this._charts).filter((e=>-1===t.indexOf(e))).forEach((t=>{this._clearChart(t),e=!0})),this._compose(n),e&&this.legend()&&this.legend().render()}_clearChart(t){this._charts[t].g()&&this._charts[t].g().remove(),delete this._charts[t]}_resetChildren(){Object.keys(this._charts).map(this._clearChart.bind(this)),this._charts={}}chart(t){return arguments.length?(this._chartFunction=t,this._resetChildren(),this):this._chartFunction}seriesAccessor(t){return arguments.length?(this._seriesAccessor=t,this._resetChildren(),this):this._seriesAccessor}seriesSort(t){return arguments.length?(this._seriesSort=t,this._resetChildren(),this):this._seriesSort}valueSort(t){return arguments.length?(this._valueSort=t,this._resetChildren(),this):this._valueSort}}const je=(t,e)=>new Xe(t,e),We=.5;class Ze extends(gt(ft)){constructor(t,e){super(),this._sliceCssClass="pie-slice",this._emptyCssClass="empty-chart",this._emptyTitle="empty",this._radius=void 0,this._givenRadius=void 0,this._innerRadius=0,this._ringSizes=null,this._g=void 0,this._cx=void 0,this._cy=void 0,this._minAngleForLabel=We,this._externalLabelRadius=void 0,this.colorAccessor((t=>this.keyAccessor()(t))),this.ordering(tt("key")),this.title((t=>`${this.keyAccessor()(t)}: ${this._extendedValueAccessor(t)}`)),this.label((t=>this.keyAccessor()(t))),this.renderLabel(!0),this.transitionDuration(350),this.anchor(t,e)}_extendedValueAccessor(t){return t.path?t.value:this.valueAccessor()(t)}_scaleRadius(t,e){if(0===t)return this._innerRadius;{const n=l.sum(this.ringSizes().relativeRingSizes.slice(0,t)),r=t*(1/this.ringSizes().relativeRingSizes.length)/n,o=(e-this.ringSizes().rootOffset)/(1-this.ringSizes().rootOffset)*(this._radius-this._innerRadius);return this._innerRadius+o/r}}_doRender(){return this.resetSvg(),this._g=this.svg().append("g").attr("transform",`translate(${this.cx()},${this.cy()})`),this._drawChart(),this}_drawChart(){const t=l.min([this.width(),this.height()])/2;this._radius=this._givenRadius&&this._givenRadius<t?this._givenRadius:t;const e=this._buildArcs();let n,r;if(l.sum(this.data(),this.valueAccessor())?(r=et.toHierarchy(this.data(),this.valueAccessor()),n=this._partitionNodes(r),n.nodes.shift(),this._g.classed(this._emptyCssClass,!1)):(r=et.toHierarchy([],(t=>t.value)),n=this._partitionNodes(r),this._g.classed(this._emptyCssClass,!0)),this.ringSizes().rootOffset=n.rootOffset,this.ringSizes().relativeRingSizes=n.relativeRingSizes,this._g){const t=this._g.selectAll(`g.${this._sliceCssClass}`).data(n.nodes);this._createElements(t,e,n.nodes),this._updateElements(n.nodes,e),this._removeElements(t),this._highlightFilter(),V(this._g,this.transitionDuration(),this.transitionDelay()).attr("transform",`translate(${this.cx()},${this.cy()})`)}}_createElements(t,e,n){const r=this._createSliceNodes(t);this._createSlicePath(r,e),this._createTitles(r),this._createLabels(n,e)}_createSliceNodes(t){return t.enter().append("g").attr("class",((t,i)=>`${this._sliceCssClass} _${i} ${this._sliceCssClass}-level-${t.depth}`))}_createSlicePath(t,e){const n=t.append("path").attr("fill",((t,i)=>this._fill(t,i))).on("click",P.eventHandler((t=>this.onClick(t)))).classed("dc-tabbable",this._keyboardAccessible).attr("d",(t=>this._safeArc(e,t)));this._keyboardAccessible&&this._makeKeyboardAccessible(this.onClick);const r=V(n,this.transitionDuration());if(r.attrTween){const t=this;r.attrTween("d",(function(e){return t._tweenSlice(e,this)}))}}_createTitles(t){this.renderTitle()&&t.append("title").text((t=>this.title()(t)))}_positionLabels(t,e){V(t,this.transitionDuration()).attr("transform",(t=>this._labelPosition(t,e))).attr("text-anchor","middle").text((t=>this._sliceHasNoData(t)||this._sliceTooSmall(t)?"":this.label()(t)))}_createLabels(t,e){if(this.renderLabel()){const n=this._g.selectAll(`text.${this._sliceCssClass}`).data(t);n.exit().remove();const r=n.enter().append("text").attr("class",((t,i)=>{let e=`${this._sliceCssClass} _${i}`;return this._externalLabelRadius&&(e+=" external"),e})).on("click",P.eventHandler((t=>this.onClick(t))));this._positionLabels(r,e)}}_updateElements(t,e){this._updateSlicePaths(t,e),this._updateLabels(t,e),this._updateTitles(t)}_updateSlicePaths(t,e){const n=this._g.selectAll(`g.${this._sliceCssClass}`).data(t).select("path").attr("d",((t,i)=>this._safeArc(e,t))),r=V(n,this.transitionDuration());if(r.attrTween){const t=this;r.attrTween("d",(function(e){return t._tweenSlice(e,this)}))}r.attr("fill",((t,i)=>this._fill(t,i)))}_updateLabels(t,e){if(this.renderLabel()){const n=this._g.selectAll(`text.${this._sliceCssClass}`).data(t);this._positionLabels(n,e)}}_updateTitles(t){this.renderTitle()&&this._g.selectAll(`g.${this._sliceCssClass}`).data(t).select("title").text((t=>this.title()(t)))}_removeElements(t){t.exit().remove()}_highlightFilter(){const t=this;t.hasFilter()?t.selectAll(`g.${t._sliceCssClass}`).each((function(e){t._isSelectedSlice(e)?t.highlightSelected(this):t.fadeDeselected(this)})):t.selectAll(`g.${t._sliceCssClass}`).each((function(e){t.resetHighlight(this)}))}innerRadius(t){return arguments.length?(this._innerRadius=t,this):this._innerRadius}radius(t){return arguments.length?(this._givenRadius=t,this):this._givenRadius}cx(t){return arguments.length?(this._cx=t,this):this._cx||this.width()/2}cy(t){return arguments.length?(this._cy=t,this):this._cy||this.height()/2}minAngleForLabel(t){return arguments.length?(this._minAngleForLabel=t,this):this._minAngleForLabel}emptyTitle(title){return 0===arguments.length?this._emptyTitle:(this._emptyTitle=title,this)}externalLabels(t){return 0===arguments.length?this._externalLabelRadius:(this._externalLabelRadius=t||void 0,this)}defaultRingSizes(){return{partitionDy:()=>this._radius*this._radius,scaleInnerRadius:t=>t.data.path&&1===t.data.path.length?this._innerRadius:Math.sqrt(t.y0),scaleOuterRadius:t=>Math.sqrt(t.y1),relativeRingSizesFunction:()=>[]}}equalRingSizes(){return this.relativeRingSizes((t=>{const e=[];for(let i=0;i<t;i++)e.push(1/t);return e}))}relativeRingSizes(t){function e(t,e){if(!Array.isArray(t))throw new T("relativeRingSizes function must return an array");const n=l.sum(t);if(Math.abs(n-1)>E.NEGLIGIBLE_NUMBER)throw new T(`relativeRingSizes : portions must add up to 1, but sum was ${n}`);if(t.length!==e)throw new T(`relativeRingSizes : number of values must match number of rings (${e}) but was ${t.length}`)}return{partitionDy:()=>1,scaleInnerRadius:t=>this._scaleRadius(t.data.path.length-1,t.y0),scaleOuterRadius:t=>this._scaleRadius(t.data.path.length,t.y1),relativeRingSizesFunction:n=>{const r=t(n);return e(r,n),r}}}ringSizes(t){return arguments.length?(this._ringSizes=t,this):(this._ringSizes||(this._ringSizes=this.defaultRingSizes()),this._ringSizes)}_buildArcs(){return x.arc().startAngle((t=>t.x0)).endAngle((t=>t.x1)).innerRadius((t=>this.ringSizes().scaleInnerRadius(t))).outerRadius((t=>this.ringSizes().scaleOuterRadius(t)))}_isSelectedSlice(t){return this._isPathFiltered(t.path)}_isPathFiltered(path){for(let i=0;i<this.filters().length;i++)if(this.filters()[i].isFiltered(path))return!0;return!1}_filtersForPath(path){const t=J.HierarchyFilter(path),e=[];for(let i=0;i<this.filters().length;i++){const n=this.filters()[i];(n.isFiltered(path)||t.isFiltered(n))&&e.push(n)}return e}_doRedraw(){return this._drawChart(),this}_partitionNodes(data){const t=function(t){return{key:t.data.key,value:t.value}},e=M.hierarchy(data).sum((t=>t.children?0:this._extendedValueAccessor(t))).sort(((a,b)=>l.ascending(this.ordering()(t(a)),this.ordering()(t(b)))));M.partition().size([2*Math.PI,this.ringSizes().partitionDy()])(e);const n=e.descendants().map((t=>(t.key=t.data.key,t.path=t.data.path,t))),r=this.ringSizes().relativeRingSizesFunction(e.height);return{nodes:n,rootOffset:e.y1,relativeRingSizes:r}}_sliceTooSmall(t){const e=t.x1-t.x0;return isNaN(e)||e<this._minAngleForLabel}_sliceHasNoData(t){return 0===this._extendedValueAccessor(t)}_isOffCanvas(t){return!t||isNaN(t.x0)||isNaN(t.y0)}_fill(t,i){return this.getColor(t.data,i)}onClick(t){if(this._g.attr("class")===this._emptyCssClass)return;const path=t.path||t.key,filter=J.HierarchyFilter(path),e=this._filtersForPath(path);let n=!1;for(let t=e.length-1;t>=0;t--){const r=e[t];et.arraysIdentical(r,path)&&(n=!0),this.filter(e[t])}K.trigger((()=>{n||this.filter(filter),this.redrawGroup()}))}_safeArc(t,e){let path=t(e);return path.indexOf("NaN")>=0&&(path="M0,0"),path}_labelPosition(t,e){let n;return n=this._externalLabelRadius?x.arc().outerRadius(this._radius+this._externalLabelRadius).innerRadius(this._radius+this._externalLabelRadius).centroid(t):e.centroid(t),isNaN(n[0])||isNaN(n[1])?"translate(0,0)":`translate(${n})`}legendables(){return this.data().map(((t,i)=>{const e={name:t.key,data:t.value,others:t.others,chart:this};return e.color=this.getColor(t,i),e}))}legendHighlight(t){this._highlightSliceFromLegendable(t,!0)}legendReset(t){this._highlightSliceFromLegendable(t,!1)}legendToggle(t){this.onClick({key:t.name,others:t.others})}_highlightSliceFromLegendable(t,e){this.selectAll("g.pie-slice").each((function(n){t.name===n.key&&o.select(this).classed("highlight",e)}))}_tweenSlice(t,element){let e=element._current;this._isOffCanvas(e)&&(e={x0:0,x1:0,y0:0,y1:0});const n={x0:t.x0,x1:t.x1,y0:t.y0,y1:t.y1},i=f.interpolate(e,n);return element._current=i(0),e=>this._safeArc(this._buildArcs(),Object.assign({},t,i(e)))}}const Ke=(t,e)=>new Ze(t,e),Je="dc-text-filter-input";class Qe extends ft{constructor(t,e){super(),this._normalize=s=>s.toLowerCase(),this._filterFunctionFactory=t=>(t=this._normalize(t),e=>-1!==this._normalize(e).indexOf(t)),this._placeHolder="search",this.group((()=>{throw"the group function on textFilterWidget should never be called, please report the issue"})),this.anchor(t,e)}_doRender(){this.select("input").remove(),this._input=this.root().append("input").classed(Je,!0);const t=this;return this._input.on("input",(function(){t.dimension().filterFunction(t._filterFunctionFactory(this.value)),K.trigger((()=>{t.redrawGroup()}),E.EVENT_DELAY)})),this._doRedraw(),this}_doRedraw(){return this.root().selectAll("input").attr("placeholder",this._placeHolder),this}normalize(t){return arguments.length?(this._normalize=t,this):this._normalize}placeHolder(t){return arguments.length?(this._placeHolder=t,this):this._placeHolder}filterFunctionFactory(t){return arguments.length?(this._filterFunctionFactory=t,this):this._filterFunctionFactory}}const tn=(t,e)=>new Qe(t,e);+C.version[0]<6&&Object.assign(P,{eventHandler:t=>function(e,n){t.call(this,e,o.event)},callHandler:function(t,e,n,r){t.call(e,r)},nester:({key:t,sortKeys:e,sortValues:n,entries:r})=>{const o=S.nest().key(t);return e&&o.sortKeys(e),n&&o.sortValues(n),o.entries(r)},pointer:(t,e)=>o.mouse(e)}),+C.version[0]>5&&Object.assign(P,{eventHandler:t=>function(e,n){t.call(this,n,e)},callHandler:function(t,e,n,r){t.call(e,n,r)},nester:({key:t,sortKeys:e,sortValues:n,entries:r})=>{n&&(r=[...r].sort(n));let o=l.groups(r,t);return e&&(o=o.sort(e)),o.map((t=>({key:`${t[0]}`,values:t[1]})))},pointer:o.pointer}),t.BadArgumentException=T,t.BarChart=Pt,t.BaseMixin=ft,t.BoxPlot=Bt,t.BubbleChart=Ht,t.BubbleMixin=pt,t.BubbleOverlay=Ut,t.CapMixin=yt,t.CboxMenu=jt,t.ColorMixin=gt,t.CompositeChart=Jt,t.Config=L,t.CoordinateGridMixin=St,t.DataCount=te,t.DataGrid=ae,t.DataTable=de,t.GeoChoroplethChart=ge,t.HeatMap=me,t.HtmlLegend=ve,t.InvalidStateException=Q,t.Legend=Ae,t.LineChart=De,t.Logger=R,t.MarginMixin=mt,t.NumberDisplay=Pe,t.PieChart=Be,t.RowChart=He,t.ScatterPlot=Ye,t.SelectMenu=qe,t.SeriesChart=Xe,t.StackMixin=Rt,t.SunburstChart=Ze,t.TextFilterWidget=Qe,t.afterTransition=j,t.barChart=Ot,t.baseMixin=_t,t.boxPlot=Ft,t.bubbleChart=$t,t.bubbleOverlay=qt,t.cboxMenu=Wt,t.chartRegistry=z,t.compositeChart=Qt,t.config=N,t.constants=E,t.d3Box=kt,t.d3compat=P,t.dataCount=ee,t.dataGrid=oe,t.dataTable=_e,t.deregisterAllCharts=$,t.deregisterChart=F,t.events=K,t.filterAll=Y,t.filters=J,t.geoChoroplethChart=pe,t.hasChart=H,t.heatMap=be,t.htmlLegend=xe,t.instanceOfChart=Z,t.legend=legend,t.lineChart=Le,t.logger=D,t.numberDisplay=Oe,t.optionalTransition=X,t.pieChart=Fe,t.pluck=tt,t.printers=st,t.redrawAll=U,t.refocusAll=I,t.registerChart=B,t.renderAll=G,t.renderlet=W,t.rowChart=$e,t.scatterPlot=Ie,t.selectMenu=Ve,t.seriesChart=je,t.sunburstChart=Ke,t.textFilterWidget=tn,t.transition=V,t.units=at,t.utils=et,t.version=k,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(34553),n(34553),n(34553),n(34553),n(34553),n(34553),n(34553),n(34553),n(34553),n(34553),n(34553),n(34553),n(34553),n(34553),n(34553),n(34553),n(34553),n(34553),n(34553))},34553:function(t,e,n){"use strict";n.r(e),n.d(e,{Adder:function(){return E},Delaunay:function(){return Eo},FormatSpecifier:function(){return Nc},InternMap:function(){return L},InternSet:function(){return N},Voronoi:function(){return Ao},active:function(){return rs},arc:function(){return tA},area:function(){return uA},areaRadial:function(){return yA},ascending:function(){return o},autoType:function(){return au},axisBottom:function(){return oe},axisLeft:function(){return ue},axisRight:function(){return ae},axisTop:function(){return se},bin:function(){return ct},bisect:function(){return y},bisectCenter:function(){return _},bisectLeft:function(){return d},bisectRight:function(){return f},bisector:function(){return c},blob:function(){return Yu},brush:function(){return Os},brushSelection:function(){return Ls},brushX:function(){return Ns},brushY:function(){return Ps},buffer:function(){return Gu},chord:function(){return Xs},chordDirected:function(){return Ws},chordTranspose:function(){return js},cluster:function(){return K_},color:function(){return ti},contourDensity:function(){return ao},contours:function(){return to},count:function(){return m},create:function(){return kw},creator:function(){return pn},cross:function(){return A},csv:function(){return ju},csvFormat:function(){return Xo},csvFormatBody:function(){return jo},csvFormatRow:function(){return Zo},csvFormatRows:function(){return Wo},csvFormatValue:function(){return Ko},csvParse:function(){return qo},csvParseRows:function(){return Vo},cubehelix:function(){return Ua},cumsum:function(){return M},curveBasis:function(){return jA},curveBasisClosed:function(){return ZA},curveBasisOpen:function(){return JA},curveBumpX:function(){return tM},curveBumpY:function(){return eM},curveBundle:function(){return iM},curveCardinal:function(){return aM},curveCardinalClosed:function(){return uM},curveCardinalOpen:function(){return lM},curveCatmullRom:function(){return dM},curveCatmullRomClosed:function(){return gM},curveCatmullRomOpen:function(){return yM},curveLinear:function(){return rA},curveLinearClosed:function(){return bM},curveMonotoneX:function(){return kM},curveMonotoneY:function(){return TM},curveNatural:function(){return DM},curveStep:function(){return NM},curveStepAfter:function(){return OM},curveStepBefore:function(){return PM},descending:function(){return C},deviation:function(){return k},difference:function(){return Gt},disjoint:function(){return Ut},dispatch:function(){return ge},drag:function(){return zo},dragDisable:function(){return Pn},dragEnable:function(){return On},dsv:function(){return Xu},dsvFormat:function(){return Go},easeBack:function(){return Ou},easeBackIn:function(){return Nu},easeBackInOut:function(){return Ou},easeBackOut:function(){return Pu},easeBounce:function(){return Ru},easeBounceIn:function(){return Eu},easeBounceInOut:function(){return Du},easeBounceOut:function(){return Ru},easeCircle:function(){return Su},easeCircleIn:function(){return Mu},easeCircleInOut:function(){return Su},easeCircleOut:function(){return Cu},easeCubic:function(){return ts},easeCubicIn:function(){return Jr},easeCubicInOut:function(){return ts},easeCubicOut:function(){return Qr},easeElastic:function(){return Fu},easeElasticIn:function(){return Bu},easeElasticInOut:function(){return Hu},easeElasticOut:function(){return Fu},easeExp:function(){return Au},easeExpIn:function(){return xu},easeExpInOut:function(){return Au},easeExpOut:function(){return wu},easeLinear:function(){return uu},easePoly:function(){return _u},easePolyIn:function(){return fu},easePolyInOut:function(){return _u},easePolyOut:function(){return du},easeQuad:function(){return hu},easeQuadIn:function(){return cu},easeQuadInOut:function(){return hu},easeQuadOut:function(){return lu},easeSin:function(){return bu},easeSinIn:function(){return yu},easeSinInOut:function(){return bu},easeSinOut:function(){return mu},every:function(){return Ft},extent:function(){return T},fcumsum:function(){return D},filter:function(){return filter},forceCenter:function(){return nc},forceCollide:function(){return gc},forceLink:function(){return mc},forceManyBody:function(){return Mc},forceRadial:function(){return Cc},forceSimulation:function(){return Ac},forceX:function(){return Sc},forceY:function(){return kc},format:function(){return Fc},formatDefaultLocale:function(){return Gc},formatLocale:function(){return Ic},formatPrefix:function(){return Hc},formatSpecifier:function(){return Lc},fsum:function(){return R},geoAlbers:function(){return f_},geoAlbersUsa:function(){return d_},geoArea:function(){return Zl},geoAzimuthalEqualArea:function(){return y_},geoAzimuthalEqualAreaRaw:function(){return p_},geoAzimuthalEquidistant:function(){return b_},geoAzimuthalEquidistantRaw:function(){return m_},geoBounds:function(){return Lh},geoCentroid:function(){return Uh},geoCircle:function(){return circle},geoClipAntimeridian:function(){return ff},geoClipCircle:function(){return df},geoClipExtent:function(){return xf},geoClipRectangle:function(){return vf},geoConicConformal:function(){return C_},geoConicConformalRaw:function(){return M_},geoConicEqualArea:function(){return h_},geoConicEqualAreaRaw:function(){return l_},geoConicEquidistant:function(){return E_},geoConicEquidistantRaw:function(){return T_},geoContains:function(){return Ff},geoDistance:function(){return Ef},geoEqualEarth:function(){return z_},geoEqualEarthRaw:function(){return O_},geoEquirectangular:function(){return k_},geoEquirectangularRaw:function(){return S_},geoGnomonic:function(){return F_},geoGnomonicRaw:function(){return B_},geoGraticule:function(){return Yf},geoGraticule10:function(){return If},geoIdentity:function(){return H_},geoInterpolate:function(){return Gf},geoLength:function(){return Sf},geoMercator:function(){return x_},geoMercatorRaw:function(){return v_},geoNaturalEarth1:function(){return Y_},geoNaturalEarth1Raw:function(){return $_},geoOrthographic:function(){return G_},geoOrthographicRaw:function(){return I_},geoPath:function(){return jd},geoProjection:function(){return o_},geoProjectionMutator:function(){return u_},geoRotation:function(){return Jh},geoStereographic:function(){return q_},geoStereographicRaw:function(){return U_},geoStream:function(){return Sl},geoTransform:function(){return Wd},geoTransverseMercator:function(){return X_},geoTransverseMercatorRaw:function(){return V_},gray:function(){return Aa},greatest:function(){return Et},greatestIndex:function(){return Rt},group:function(){return H},groupSort:function(){return Z},groups:function(){return $},hcl:function(){return La},hierarchy:function(){return Q_},histogram:function(){return ct},hsl:function(){return fi},html:function(){return ec},image:function(){return Zu},index:function(){return G},indexes:function(){return U},interpolate:function(){return zi},interpolateArray:function(){return Ei},interpolateBasis:function(){return pi},interpolateBasisClosed:function(){return yi},interpolateBlues:function(){return tw},interpolateBrBG:function(){return fx},interpolateBuGn:function(){return Rx},interpolateBuPu:function(){return Lx},interpolateCividis:function(){return hw},interpolateCool:function(){return _w},interpolateCubehelix:function(){return hp},interpolateCubehelixDefault:function(){return fw},interpolateCubehelixLong:function(){return fp},interpolateDate:function(){return Di},interpolateDiscrete:function(){return Kg},interpolateGnBu:function(){return Px},interpolateGreens:function(){return nw},interpolateGreys:function(){return rw},interpolateHcl:function(){return up},interpolateHclLong:function(){return cp},interpolateHsl:function(){return ip},interpolateHslLong:function(){return sp},interpolateHue:function(){return Jg},interpolateInferno:function(){return Cw},interpolateLab:function(){return ap},interpolateMagma:function(){return Mw},interpolateNumber:function(){return Li},interpolateNumberArray:function(){return ki},interpolateObject:function(){return object},interpolateOrRd:function(){return zx},interpolateOranges:function(){return lw},interpolatePRGn:function(){return _x},interpolatePiYG:function(){return px},interpolatePlasma:function(){return Sw},interpolatePuBu:function(){return $x},interpolatePuBuGn:function(){return Fx},interpolatePuOr:function(){return mx},interpolatePuRd:function(){return Ix},interpolatePurples:function(){return aw},interpolateRainbow:function(){return pw},interpolateRdBu:function(){return vx},interpolateRdGy:function(){return wx},interpolateRdPu:function(){return Ux},interpolateRdYlBu:function(){return Mx},interpolateRdYlGn:function(){return Sx},interpolateReds:function(){return uw},interpolateRgb:function(){return Ai},interpolateRgbBasis:function(){return Ci},interpolateRgbBasisClosed:function(){return Si},interpolateRound:function(){return Qg},interpolateSinebow:function(){return vw},interpolateSpectral:function(){return Tx},interpolateString:function(){return Oi},interpolateTransformCss:function(){return mr},interpolateTransformSvg:function(){return vr},interpolateTurbo:function(){return xw},interpolateViridis:function(){return Aw},interpolateWarm:function(){return dw},interpolateYlGn:function(){return jx},interpolateYlGnBu:function(){return Vx},interpolateYlOrBr:function(){return Zx},interpolateYlOrRd:function(){return Jx},interpolateZoom:function(){return ep},interrupt:function(){return fr},intersection:function(){return Vt},interval:function(){return iC},isoFormat:function(){return tC},isoParse:function(){return nC},json:function(){return Ju},lab:function(){return Ma},lch:function(){return Da},least:function(){return kt},leastIndex:function(){return Tt},line:function(){return oA},lineRadial:function(){return pA},linkHorizontal:function(){return CA},linkRadial:function(){return kA},linkVertical:function(){return SA},local:function(){return Ew},map:function(){return $t},matcher:function(){return xe},max:function(){return lt},maxIndex:function(){return bt},mean:function(){return vt},median:function(){return xt},merge:function(){return wt},min:function(){return ht},minIndex:function(){return At},namespace:function(){return ze},namespaces:function(){return Oe},nice:function(){return ot},now:function(){return Wi},pack:function(){return Mg},packEnclose:function(){return sg},packSiblings:function(){return mg},pairs:function(){return Mt},partition:function(){return Rg},path:function(){return na},permute:function(){return j},pie:function(){return hA},piecewise:function(){return dp},pointRadial:function(){return mA},pointer:function(){return Fi},pointers:function(){return Dw},polygonArea:function(){return gp},polygonCentroid:function(){return pp},polygonContains:function(){return xp},polygonHull:function(){return vp},polygonLength:function(){return wp},precisionFixed:function(){return Uc},precisionPrefix:function(){return qc},precisionRound:function(){return Vc},quadtree:function(){return oc},quantile:function(){return gt},quantileSorted:function(){return pt},quantize:function(){return _p},quickselect:function(){return ft},radialArea:function(){return yA},radialLine:function(){return pA},randomBates:function(){return Ep},randomBernoulli:function(){return Lp},randomBeta:function(){return Op},randomBinomial:function(){return zp},randomCauchy:function(){return Fp},randomExponential:function(){return Rp},randomGamma:function(){return Pp},randomGeometric:function(){return Np},randomInt:function(){return Cp},randomIrwinHall:function(){return Tp},randomLcg:function(){return Ip},randomLogNormal:function(){return kp},randomLogistic:function(){return Hp},randomNormal:function(){return Sp},randomPareto:function(){return Dp},randomPoisson:function(){return $p},randomUniform:function(){return Mp},randomWeibull:function(){return Bp},range:function(){return St},reduce:function(){return Yt},reverse:function(){return It},rgb:function(){return ri},ribbon:function(){return da},ribbonArrow:function(){return _a},rollup:function(){return Y},rollups:function(){return I},scaleBand:function(){return Xp},scaleDiverging:function(){return jv},scaleDivergingLog:function(){return Wv},scaleDivergingPow:function(){return Kv},scaleDivergingSqrt:function(){return Jv},scaleDivergingSymlog:function(){return Zv},scaleIdentity:function(){return uy},scaleImplicit:function(){return qp},scaleLinear:function(){return oy},scaleLog:function(){return yy},scaleOrdinal:function(){return Vp},scalePoint:function(){return Wp},scalePow:function(){return Sy},scaleQuantile:function(){return Dy},scaleQuantize:function(){return Ly},scaleRadial:function(){return Ry},scaleSequential:function(){return Yv},scaleSequentialLog:function(){return Iv},scaleSequentialPow:function(){return Uv},scaleSequentialQuantile:function(){return Vv},scaleSequentialSqrt:function(){return qv},scaleSequentialSymlog:function(){return Gv},scaleSqrt:function(){return ky},scaleSymlog:function(){return xy},scaleThreshold:function(){return Ny},scaleTime:function(){return time},scaleUtc:function(){return Fv},scan:function(){return Dt},schemeAccent:function(){return ex},schemeBlues:function(){return Qx},schemeBrBG:function(){return hx},schemeBuGn:function(){return Ex},schemeBuPu:function(){return Dx},schemeCategory10:function(){return tx},schemeDark2:function(){return nx},schemeGnBu:function(){return Nx},schemeGreens:function(){return ew},schemeGreys:function(){return iw},schemeOrRd:function(){return Ox},schemeOranges:function(){return cw},schemePRGn:function(){return dx},schemePaired:function(){return ix},schemePastel1:function(){return rx},schemePastel2:function(){return sx},schemePiYG:function(){return gx},schemePuBu:function(){return Hx},schemePuBuGn:function(){return Bx},schemePuOr:function(){return yx},schemePuRd:function(){return Yx},schemePurples:function(){return sw},schemeRdBu:function(){return bx},schemeRdGy:function(){return xx},schemeRdPu:function(){return Gx},schemeRdYlBu:function(){return Ax},schemeRdYlGn:function(){return Cx},schemeReds:function(){return ow},schemeSet1:function(){return ax},schemeSet2:function(){return ox},schemeSet3:function(){return ux},schemeSpectral:function(){return kx},schemeTableau10:function(){return cx},schemeYlGn:function(){return Xx},schemeYlGnBu:function(){return qx},schemeYlOrBr:function(){return Wx},schemeYlOrRd:function(){return Kx},select:function(){return Dn},selectAll:function(){return Lw},selection:function(){return Rn},selector:function(){return ye},selectorAll:function(){return ve},shuffle:function(){return Lt},shuffler:function(){return Nt},some:function(){return Ht},sort:function(){return W},stack:function(){return $M},stackOffsetDiverging:function(){return IM},stackOffsetExpand:function(){return YM},stackOffsetNone:function(){return zM},stackOffsetSilhouette:function(){return GM},stackOffsetWiggle:function(){return UM},stackOrderAppearance:function(){return qM},stackOrderAscending:function(){return XM},stackOrderDescending:function(){return WM},stackOrderInsideOut:function(){return ZM},stackOrderNone:function(){return BM},stackOrderReverse:function(){return KM},stratify:function(){return Og},style:function(){return Xe},subset:function(){return jt},sum:function(){return Pt},superset:function(){return Xt},svg:function(){return svg},symbol:function(){return symbol},symbolCircle:function(){return TA},symbolCross:function(){return EA},symbolDiamond:function(){return LA},symbolSquare:function(){return BA},symbolStar:function(){return zA},symbolTriangle:function(){return HA},symbolWye:function(){return GA},symbols:function(){return UA},text:function(){return qu},thresholdFreedmanDiaconis:function(){return yt},thresholdScott:function(){return mt},thresholdSturges:function(){return ut},tickFormat:function(){return sy},tickIncrement:function(){return st},tickStep:function(){return at},ticks:function(){return it},timeDay:function(){return rm},timeDays:function(){return sm},timeFormat:function(){return db},timeFormatDefaultLocale:function(){return Pv},timeFormatLocale:function(){return hb},timeFriday:function(){return fm},timeFridays:function(){return bm},timeHour:function(){return tm},timeHours:function(){return nm},timeInterval:function(){return Gy},timeMillisecond:function(){return qy},timeMilliseconds:function(){return Vy},timeMinute:function(){return Ky},timeMinutes:function(){return Jy},timeMonday:function(){return um},timeMondays:function(){return gm},timeMonth:function(){return wm},timeMonths:function(){return Am},timeParse:function(){return _b},timeSaturday:function(){return dm},timeSaturdays:function(){return vm},timeSecond:function(){return jy},timeSeconds:function(){return Wy},timeSunday:function(){return om},timeSundays:function(){return _m},timeThursday:function(){return hm},timeThursdays:function(){return mm},timeTickInterval:function(){return ob},timeTicks:function(){return ab},timeTuesday:function(){return cm},timeTuesdays:function(){return pm},timeWednesday:function(){return lm},timeWednesdays:function(){return ym},timeWeek:function(){return om},timeWeeks:function(){return _m},timeYear:function(){return Cm},timeYears:function(){return Sm},timeout:function(){return rr},timer:function(){return Ji},timerFlush:function(){return Qi},transition:function(){return Wr},transpose:function(){return Ot},tree:function(){return Ig},treemap:function(){return Xg},treemapBinary:function(){return jg},treemapDice:function(){return Eg},treemapResquarify:function(){return Zg},treemapSlice:function(){return Gg},treemapSliceDice:function(){return Wg},treemapSquarify:function(){return Vg},tsv:function(){return Wu},tsvFormat:function(){return eu},tsvFormatBody:function(){return nu},tsvFormatRow:function(){return ru},tsvFormatRows:function(){return iu},tsvFormatValue:function(){return su},tsvParse:function(){return Qo},tsvParseRows:function(){return tu},union:function(){return Wt},utcDay:function(){return Pm},utcDays:function(){return Om},utcFormat:function(){return gb},utcFriday:function(){return Im},utcFridays:function(){return Wm},utcHour:function(){return Dm},utcHours:function(){return Lm},utcMillisecond:function(){return qy},utcMilliseconds:function(){return Vy},utcMinute:function(){return Tm},utcMinutes:function(){return Em},utcMonday:function(){return Fm},utcMondays:function(){return qm},utcMonth:function(){return Jm},utcMonths:function(){return Qm},utcParse:function(){return pb},utcSaturday:function(){return Gm},utcSaturdays:function(){return Zm},utcSecond:function(){return jy},utcSeconds:function(){return Wy},utcSunday:function(){return Bm},utcSundays:function(){return Um},utcThursday:function(){return Ym},utcThursdays:function(){return jm},utcTickInterval:function(){return sb},utcTicks:function(){return rb},utcTuesday:function(){return Hm},utcTuesdays:function(){return Vm},utcWednesday:function(){return $m},utcWednesdays:function(){return Xm},utcWeek:function(){return Bm},utcWeeks:function(){return Um},utcYear:function(){return eb},utcYears:function(){return nb},variance:function(){return S},version:function(){return r},window:function(){return Ge},xml:function(){return tc},zip:function(){return Bt},zoom:function(){return yC},zoomIdentity:function(){return oC},zoomTransform:function(){return uC}});var r="6.7.0";function o(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function c(t){let e=t,n=t;function r(a,t,e,r){for(null==e&&(e=0),null==r&&(r=a.length);e<r;){const o=e+r>>>1;n(a[o],t)<0?e=o+1:r=o}return e}return 1===t.length&&(e=(e,n)=>t(e)-n,n=function(t){return(e,n)=>o(t(e),n)}(t)),{left:r,center:function(a,t,n,o){null==n&&(n=0),null==o&&(o=a.length);const i=r(a,t,n,o-1);return i>n&&e(a[i-1],t)>-e(a[i],t)?i-1:i},right:function(a,t,e,r){for(null==e&&(e=0),null==r&&(r=a.length);e<r;){const o=e+r>>>1;n(a[o],t)>0?r=o:e=o+1}return e}}}function l(t){return null===t?NaN:+t}const h=c(o),f=h.right,d=h.left,_=c(l).center;var y=f;function m(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(o=+o)>=o&&++n}return n}function v(t){return 0|t.length}function x(t){return!(t>0)}function w(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function A(...t){const e="function"==typeof t[t.length-1]&&function(t){return e=>t(...e)}(t.pop()),n=(t=t.map(w)).map(v),r=t.length-1,o=new Array(r+1).fill(0),c=[];if(r<0||n.some(x))return c;for(;;){c.push(o.map(((e,i)=>t[i][e])));let i=r;for(;++o[i]===n[i];){if(0===i)return e?c.map(e):c;o[i--]=0}}}function M(t,e){var n=0,r=0;return Float64Array.from(t,void 0===e?t=>n+=+t||0:o=>n+=+e(o,r++,t)||0)}function C(a,b){return b<a?-1:b>a?1:b>=a?0:NaN}function S(t,e){let n,r=0,o=0,c=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-o,o+=n/++r,c+=n*(e-o));else{let l=-1;for(let h of t)null!=(h=e(h,++l,t))&&(h=+h)>=h&&(n=h-o,o+=n/++r,c+=n*(h-o))}if(r>1)return c/(r-1)}function k(t,e){const n=S(t,e);return n?Math.sqrt(n):n}function T(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let o=-1;for(let c of t)null!=(c=e(c,++o,t))&&(void 0===n?c>=c&&(n=r=c):(n>c&&(n=c),r<c&&(r=c)))}return[n,r]}class E{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const p=this._partials;let i=0;for(let e=0;e<this._n&&e<32;e++){const n=p[e],r=t+n,o=Math.abs(t)<Math.abs(n)?t-(r-n):n-(r-t);o&&(p[i++]=o),t=r}return p[i]=t,this._n=i+1,this}valueOf(){const p=this._partials;let t,e,n,r=this._n,o=0;if(r>0){for(o=p[--r];r>0&&(t=o,e=p[--r],o=t+e,n=e-(o-t),!n););r>0&&(n<0&&p[r-1]<0||n>0&&p[r-1]>0)&&(e=2*n,t=o+e,e==t-o&&(o=t))}return o}}function R(t,e){const n=new E;if(void 0===e)for(let e of t)(e=+e)&&n.add(e);else{let r=-1;for(let o of t)(o=+e(o,++r,t))&&n.add(o)}return+n}function D(t,e){const n=new E;let r=-1;return Float64Array.from(t,void 0===e?t=>n.add(+t||0):o=>n.add(+e(o,++r,t)||0))}class L extends Map{constructor(t,e=B){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(P(this,t))}has(t){return super.has(P(this,t))}set(t,e){return super.set(O(this,t),e)}delete(t){return super.delete(z(this,t))}}class N extends Set{constructor(t,e=B){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(P(this,t))}add(t){return super.add(O(this,t))}delete(t){return super.delete(z(this,t))}}function P({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function O({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function z({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(n),t.delete(r)),n}function B(t){return null!==t&&"object"==typeof t?t.valueOf():t}function F(t){return t}function H(t,...e){return X(t,F,F,e)}function $(t,...e){return X(t,Array.from,F,e)}function Y(t,e,...n){return X(t,F,e,n)}function I(t,e,...n){return X(t,Array.from,e,n)}function G(t,...e){return X(t,F,V,e)}function U(t,...e){return X(t,Array.from,V,e)}function V(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function X(t,map,e,n){return function t(r,i){if(i>=n.length)return e(r);const o=new L,c=n[i++];let l=-1;for(const t of r){const e=c(t,++l,r),n=o.get(e);n?n.push(t):o.set(e,[t])}for(const[e,n]of o)o.set(e,t(n,i));return map(o)}(t,0)}function j(source,t){return Array.from(t,(t=>source[t]))}function W(t,...e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[n=o]=e;if(1===n.length||e.length>1){const r=Uint32Array.from(t,((t,i)=>i));return e.length>1?(e=e.map((e=>t.map(e))),r.sort(((i,t)=>{for(const n of e){const e=o(n[i],n[t]);if(e)return e}}))):(n=t.map(n),r.sort(((i,t)=>o(n[i],n[t])))),j(t,r)}return t.sort(n)}function Z(t,e,n){return(1===e.length?W(Y(t,e,n),(([t,e],[n,r])=>o(e,r)||o(t,n))):W(H(t,n),(([t,n],[r,c])=>e(n,c)||o(t,r)))).map((([t])=>t))}var K=Array.prototype,J=K.slice;K.map;function Q(t){return function(){return t}}var tt=Math.sqrt(50),et=Math.sqrt(10),nt=Math.sqrt(2);function it(t,e,n){var r,o,c,l,i=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),0===(l=st(t,e,n))||!isFinite(l))return[];if(l>0){let n=Math.round(t/l),r=Math.round(e/l);for(n*l<t&&++n,r*l>e&&--r,c=new Array(o=r-n+1);++i<o;)c[i]=(n+i)*l}else{l=-l;let n=Math.round(t*l),r=Math.round(e*l);for(n/l<t&&++n,r/l>e&&--r,c=new Array(o=r-n+1);++i<o;)c[i]=(n+i)/l}return r&&c.reverse(),c}function st(t,e,n){var r=(e-t)/Math.max(0,n),o=Math.floor(Math.log(r)/Math.LN10),c=r/Math.pow(10,o);return o>=0?(c>=tt?10:c>=et?5:c>=nt?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(c>=tt?10:c>=et?5:c>=nt?2:1)}function at(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),c=r/o;return c>=tt?o*=10:c>=et?o*=5:c>=nt&&(o*=2),e<t?-o:o}function ot(t,e,n){let r;for(;;){const o=st(t,e,n);if(o===r||0===o||!isFinite(o))return[t,e];o>0?(t=Math.floor(t/o)*o,e=Math.ceil(e/o)*o):o<0&&(t=Math.ceil(t*o)/o,e=Math.floor(e*o)/o),r=o}}function ut(t){return Math.ceil(Math.log(m(t))/Math.LN2)+1}function ct(){var t=F,e=T,n=ut;function r(data){Array.isArray(data)||(data=Array.from(data));var i,r,o=data.length,c=new Array(o);for(i=0;i<o;++i)c[i]=t(data[i],i,data);var l=e(c),h=l[0],f=l[1],d=n(c,h,f);if(!Array.isArray(d)){const t=f,n=+d;if(e===T&&([h,f]=ot(h,f,n)),(d=it(h,f,n))[d.length-1]>=f)if(t>=f&&e===T){const t=st(h,f,n);isFinite(t)&&(t>0?f=(Math.floor(f/t)+1)*t:t<0&&(f=(Math.ceil(f*-t)+1)/-t))}else d.pop()}for(var _=d.length;d[0]<=h;)d.shift(),--_;for(;d[_-1]>f;)d.pop(),--_;var m,v=new Array(_+1);for(i=0;i<=_;++i)(m=v[i]=[]).x0=i>0?d[i-1]:h,m.x1=i<_?d[i]:f;for(i=0;i<o;++i)h<=(r=c[i])&&r<=f&&v[y(d,r,0,_)].push(data[i]);return v}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:Q(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:Q([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?Q(J.call(t)):Q(t),r):n},r}function lt(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n<o||void 0===n&&o>=o)&&(n=o)}return n}function ht(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n>o||void 0===n&&o>=o)&&(n=o)}return n}function ft(t,e,n=0,r=t.length-1,c=o){for(;r>n;){if(r-n>600){const o=r-n+1,l=e-n+1,h=Math.log(o),s=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*s*(o-s)/o)*(l-o/2<0?-1:1);ft(t,e,Math.max(n,Math.floor(e-l*s/o+f)),Math.min(r,Math.floor(e+(o-l)*s/o+f)),c)}const o=t[e];let i=n,l=r;for(_t(t,n,e),c(t[r],o)>0&&_t(t,n,r);i<l;){for(_t(t,i,l),++i,--l;c(t[i],o)<0;)++i;for(;c(t[l],o)>0;)--l}0===c(t[n],o)?_t(t,n,l):(++l,_t(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function _t(t,i,e){const n=t[i];t[i]=t[e],t[e]=n}function gt(t,p,e){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,e)),n=t.length){if((p=+p)<=0||n<2)return ht(t);if(p>=1)return lt(t);var n,i=(n-1)*p,r=Math.floor(i),o=lt(ft(t,r).subarray(0,r+1));return o+(ht(t.subarray(r+1))-o)*(i-r)}}function pt(t,p,e=l){if(n=t.length){if((p=+p)<=0||n<2)return+e(t[0],0,t);if(p>=1)return+e(t[n-1],n-1,t);var n,i=(n-1)*p,r=Math.floor(i),o=+e(t[r],r,t);return o+(+e(t[r+1],r+1,t)-o)*(i-r)}}function yt(t,e,n){return Math.ceil((n-e)/(2*(gt(t,.75)-gt(t,.25))*Math.pow(m(t),-1/3)))}function mt(t,e,n){return Math.ceil((n-e)/(3.5*k(t)*Math.pow(m(t),-1/3)))}function bt(t,e){let n,r=-1,o=-1;if(void 0===e)for(const e of t)++o,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,r=o);else for(let c of t)null!=(c=e(c,++o,t))&&(n<c||void 0===n&&c>=c)&&(n=c,r=o);return r}function vt(t,e){let n=0,r=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,r+=e);else{let o=-1;for(let c of t)null!=(c=e(c,++o,t))&&(c=+c)>=c&&(++n,r+=c)}if(n)return r/n}function xt(t,e){return gt(t,.5,e)}function wt(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function At(t,e){let n,r=-1,o=-1;if(void 0===e)for(const e of t)++o,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,r=o);else for(let c of t)null!=(c=e(c,++o,t))&&(n>c||void 0===n&&c>=c)&&(n=c,r=o);return r}function Mt(t,e=Ct){const n=[];let r,o=!1;for(const c of t)o&&n.push(e(r,c)),r=c,o=!0;return n}function Ct(a,b){return[a,b]}function St(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(r);++i<r;)o[i]=t+i*n;return o}function kt(t,e=o){let n,r=!1;if(1===e.length){let c;for(const element of t){const t=e(element);(r?o(t,c)<0:0===o(t,t))&&(n=element,c=t,r=!0)}}else for(const o of t)(r?e(o,n)<0:0===e(o,o))&&(n=o,r=!0);return n}function Tt(t,e=o){if(1===e.length)return At(t,e);let n,r=-1,c=-1;for(const o of t)++c,(r<0?0===e(o,o):e(o,n)<0)&&(n=o,r=c);return r}function Et(t,e=o){let n,r=!1;if(1===e.length){let c;for(const element of t){const t=e(element);(r?o(t,c)>0:0===o(t,t))&&(n=element,c=t,r=!0)}}else for(const o of t)(r?e(o,n)>0:0===e(o,o))&&(n=o,r=!0);return n}function Rt(t,e=o){if(1===e.length)return bt(t,e);let n,r=-1,c=-1;for(const o of t)++c,(r<0?0===e(o,o):e(o,n)>0)&&(n=o,r=c);return r}function Dt(t,e){const n=Tt(t,e);return n<0?void 0:n}var Lt=Nt(Math.random);function Nt(t){return function(e,n=0,r=e.length){let o=r-(n=+n);for(;o;){const i=t()*o--|0,r=e[o+n];e[o+n]=e[i+n],e[i+n]=r}return e}}function Pt(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let o of t)(o=+e(o,++r,t))&&(n+=o)}return n}function Ot(t){if(!(r=t.length))return[];for(var i=-1,e=ht(t,zt),n=new Array(e);++i<e;)for(var r,o=-1,c=n[i]=new Array(r);++o<r;)c[o]=t[o][i];return n}function zt(t){return t.length}function Bt(){return Ot(arguments)}function Ft(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(!e(r,++n,t))return!1;return!0}function Ht(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(e(r,++n,t))return!0;return!1}function filter(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");const n=[];let r=-1;for(const o of t)e(o,++r,t)&&n.push(o);return n}function $t(t,e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof e)throw new TypeError("mapper is not a function");return Array.from(t,((n,r)=>e(n,r,t)))}function Yt(t,e,n){if("function"!=typeof e)throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let o,c,l=-1;if(arguments.length<3){if(({done:o,value:n}=r.next()),o)return;++l}for(;({done:o,value:c}=r.next()),!o;)n=e(n,c,++l,t);return n}function It(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()}function Gt(t,...e){t=new Set(t);for(const n of e)for(const e of n)t.delete(e);return t}function Ut(t,e){const n=e[Symbol.iterator](),r=new Set;for(const e of t){if(r.has(e))return!1;let t,o;for(;({value:t,done:o}=n.next())&&!o;){if(Object.is(e,t))return!1;r.add(t)}}return!0}function qt(t){return t instanceof Set?t:new Set(t)}function Vt(t,...e){t=new Set(t),e=e.map(qt);t:for(const n of t)for(const r of e)if(!r.has(n)){t.delete(n);continue t}return t}function Xt(t,e){const n=t[Symbol.iterator](),r=new Set;for(const t of e){if(r.has(t))continue;let e,o;for(;({value:e,done:o}=n.next());){if(o)return!1;if(r.add(e),Object.is(t,e))break}}return!0}function jt(t,e){return Xt(e,t)}function Wt(...t){const e=new Set;for(const n of t)for(const t of n)e.add(t);return e}var Zt=Array.prototype.slice;function Kt(t){return t}var Jt=1e-6;function Qt(t){return"translate("+t+",0)"}function te(t){return"translate(0,"+t+")"}function ee(t){return e=>+t(e)}function ne(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function ie(){return!this.__axis}function re(t,e){var n=[],r=null,o=null,c=6,l=6,h=3,f="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,d=1===t||4===t?-1:1,_=4===t||2===t?"x":"y",y=1===t||3===t?Qt:te;function m(m){var v=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,x=null==o?e.tickFormat?e.tickFormat.apply(e,n):Kt:o,w=Math.max(c,0)+h,A=e.range(),M=+A[0]+f,C=+A[A.length-1]+f,S=(e.bandwidth?ne:ee)(e.copy(),f),k=m.selection?m.selection():m,path=k.selectAll(".domain").data([null]),T=k.selectAll(".tick").data(v,e).order(),E=T.exit(),R=T.enter().append("g").attr("class","tick"),line=T.select("line"),text=T.select("text");path=path.merge(path.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(R),line=line.merge(R.append("line").attr("stroke","currentColor").attr(_+"2",d*c)),text=text.merge(R.append("text").attr("fill","currentColor").attr(_,d*w).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),m!==k&&(path=path.transition(m),T=T.transition(m),line=line.transition(m),text=text.transition(m),E=E.transition(m).attr("opacity",Jt).attr("transform",(function(t){return isFinite(t=S(t))?y(t+f):this.getAttribute("transform")})),R.attr("opacity",Jt).attr("transform",(function(t){var p=this.parentNode.__axis;return y((p&&isFinite(p=p(t))?p:S(t))+f)}))),E.remove(),path.attr("d",4===t||2===t?l?"M"+d*l+","+M+"H"+f+"V"+C+"H"+d*l:"M"+f+","+M+"V"+C:l?"M"+M+","+d*l+"V"+f+"H"+C+"V"+d*l:"M"+M+","+f+"H"+C),T.attr("opacity",1).attr("transform",(function(t){return y(S(t)+f)})),line.attr(_+"2",d*c),text.attr(_,d*w).text(x),k.filter(ie).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),k.each((function(){this.__axis=S}))}return m.scale=function(t){return arguments.length?(e=t,m):e},m.ticks=function(){return n=Zt.call(arguments),m},m.tickArguments=function(t){return arguments.length?(n=null==t?[]:Zt.call(t),m):n.slice()},m.tickValues=function(t){return arguments.length?(r=null==t?null:Zt.call(t),m):r&&r.slice()},m.tickFormat=function(t){return arguments.length?(o=t,m):o},m.tickSize=function(t){return arguments.length?(c=l=+t,m):c},m.tickSizeInner=function(t){return arguments.length?(c=+t,m):c},m.tickSizeOuter=function(t){return arguments.length?(l=+t,m):l},m.tickPadding=function(t){return arguments.length?(h=+t,m):h},m.offset=function(t){return arguments.length?(f=+t,m):f},m}function se(t){return re(1,t)}function ae(t){return re(2,t)}function oe(t){return re(3,t)}function ue(t){return re(4,t)}var ce={value:()=>{}};function le(){for(var t,i=0,e=arguments.length,n={};i<e;++i){if(!(t=arguments[i]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new he(n)}function he(t){this._=t}function fe(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function de(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function _e(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=ce,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}he.prototype=le.prototype={constructor:he,on:function(t,e){var n,r=this._,o=fe(t+"",r),i=-1,c=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<c;)if(n=(t=o[i]).type)r[n]=_e(r[n],t.name,e);else if(null==e)for(n in r)r[n]=_e(r[n],t.name,null);return this}for(;++i<c;)if((n=(t=o[i]).type)&&(n=de(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new he(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var ge=le;function pe(){}function ye(t){return null==t?pe:function(){return this.querySelector(t)}}function me(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function be(){return[]}function ve(t){return null==t?be:function(){return this.querySelectorAll(t)}}function xe(t){return function(){return this.matches(t)}}function we(t){return function(e){return e.matches(t)}}var Ae=Array.prototype.find;function Me(){return this.firstElementChild}var Ce=Array.prototype.filter;function Se(){return this.children}function ke(t){return new Array(t.length)}function Te(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Ee(t){return function(){return t}}function Re(t,e,n,r,o,data){for(var c,i=0,l=e.length,h=data.length;i<h;++i)(c=e[i])?(c.__data__=data[i],r[i]=c):n[i]=new Te(t,data[i]);for(;i<l;++i)(c=e[i])&&(o[i]=c)}function De(t,e,n,r,o,data,c){var i,l,h,f=new Map,d=e.length,_=data.length,y=new Array(d);for(i=0;i<d;++i)(l=e[i])&&(y[i]=h=c.call(l,l.__data__,i,e)+"",f.has(h)?o[i]=l:f.set(h,l));for(i=0;i<_;++i)h=c.call(t,data[i],i,data)+"",(l=f.get(h))?(r[i]=l,l.__data__=data[i],f.delete(h)):n[i]=new Te(t,data[i]);for(i=0;i<d;++i)(l=e[i])&&f.get(y[i])===l&&(o[i]=l)}function Le(t){return t.__data__}function Ne(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}Te.prototype={constructor:Te,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Pe="http://www.w3.org/1999/xhtml",Oe={svg:"http://www.w3.org/2000/svg",xhtml:Pe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ze(t){var e=t+="",i=e.indexOf(":");return i>=0&&"xmlns"!==(e=t.slice(0,i))&&(t=t.slice(i+1)),Oe.hasOwnProperty(e)?{space:Oe[e],local:t}:t}function Be(t){return function(){this.removeAttribute(t)}}function Fe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function He(t,e){return function(){this.setAttribute(t,e)}}function $e(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ye(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Ie(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ge(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ue(t){return function(){this.style.removeProperty(t)}}function qe(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ve(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Xe(t,e){return t.style.getPropertyValue(e)||Ge(t).getComputedStyle(t,null).getPropertyValue(e)}function je(t){return function(){delete this[t]}}function We(t,e){return function(){this[t]=e}}function Ze(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Ke(t){return t.trim().split(/^|\s+/)}function Je(t){return t.classList||new Qe(t)}function Qe(t){this._node=t,this._names=Ke(t.getAttribute("class")||"")}function tn(t,e){for(var n=Je(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function en(t,e){for(var n=Je(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function nn(t){return function(){tn(this,t)}}function rn(t){return function(){en(this,t)}}function sn(t,e){return function(){(e.apply(this,arguments)?tn:en)(this,t)}}function an(){this.textContent=""}function on(t){return function(){this.textContent=t}}function un(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function cn(){this.innerHTML=""}function ln(t){return function(){this.innerHTML=t}}function hn(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function fn(){this.nextSibling&&this.parentNode.appendChild(this)}function dn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _n(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Pe&&e.documentElement.namespaceURI===Pe?e.createElement(t):e.createElementNS(n,t)}}function gn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function pn(t){var e=ze(t);return(e.local?gn:_n)(e)}function yn(){return null}function mn(){var t=this.parentNode;t&&t.removeChild(this)}function bn(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function vn(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function xn(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}}))}function wn(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function An(t,e,n){return function(){var r,o=this.__on,c=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(o)for(var l=0,h=o.length;l<h;++l)if((r=o[l]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=c,r.options=n),void(r.value=e);this.addEventListener(t.type,c,n),r={type:t.type,name:t.name,value:e,listener:c,options:n},o?o.push(r):this.__on=[r]}}function Mn(t,e,n){var r=Ge(t),o=r.CustomEvent;"function"==typeof o?o=new o(e,n):(o=r.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function Cn(t,e){return function(){return Mn(this,t,e)}}function Sn(t,e){return function(){return Mn(this,t,e.apply(this,arguments))}}Qe.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var kn=[null];function Tn(t,e){this._groups=t,this._parents=e}function En(){return new Tn([[document.documentElement]],kn)}Tn.prototype=En.prototype={constructor:Tn,select:function(select){"function"!=typeof select&&(select=ye(select));for(var t=this._groups,e=t.length,n=new Array(e),r=0;r<e;++r)for(var o,c,l=t[r],h=l.length,f=n[r]=new Array(h),i=0;i<h;++i)(o=l[i])&&(c=select.call(o,o.__data__,i,l))&&("__data__"in o&&(c.__data__=o.__data__),f[i]=c);return new Tn(n,this._parents)},selectAll:function(select){select="function"==typeof select?function(select){return function(){var t=select.apply(this,arguments);return null==t?[]:me(t)}}(select):ve(select);for(var t=this._groups,e=t.length,n=[],r=[],o=0;o<e;++o)for(var c,l=t[o],h=l.length,i=0;i<h;++i)(c=l[i])&&(n.push(select.call(c,c.__data__,i,l)),r.push(c));return new Tn(n,r)},selectChild:function(t){return this.select(null==t?Me:function(t){return function(){return Ae.call(this.children,t)}}("function"==typeof t?t:we(t)))},selectChildren:function(t){return this.selectAll(null==t?Se:function(t){return function(){return Ce.call(this.children,t)}}("function"==typeof t?t:we(t)))},filter:function(t){"function"!=typeof t&&(t=xe(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var c,l=e[o],h=l.length,f=r[o]=[],i=0;i<h;++i)(c=l[i])&&t.call(c,c.__data__,i,l)&&f.push(c);return new Tn(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Le);var n=e?De:Re,r=this._parents,o=this._groups;"function"!=typeof t&&(t=Ee(t));for(var c=o.length,l=new Array(c),h=new Array(c),f=new Array(c),d=0;d<c;++d){var _=r[d],y=o[d],m=y.length,data=me(t.call(_,_&&_.__data__,d,r)),v=data.length,x=h[d]=new Array(v),w=l[d]=new Array(v),A=f[d]=new Array(m);n(_,y,x,w,A,data,e);for(var M,C,S=0,k=0;S<v;++S)if(M=x[S]){for(S>=k&&(k=S+1);!(C=w[k])&&++k<v;);M._next=C||null}}return(l=new Tn(l,r))._enter=h,l._exit=f,l},enter:function(){return new Tn(this._enter||this._groups.map(ke),this._parents)},exit:function(){return new Tn(this._exit||this._groups.map(ke),this._parents)},join:function(t,e,n){var r=this.enter(),o=this,c=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(o=e(o)),null==n?c.remove():n(c),r&&o?r.merge(o).order():o},merge:function(t){if(!(t instanceof Tn))throw new Error("invalid merge");for(var e=this._groups,n=t._groups,r=e.length,o=n.length,c=Math.min(r,o),l=new Array(r),h=0;h<c;++h)for(var f,d=e[h],_=n[h],y=d.length,m=l[h]=new Array(y),i=0;i<y;++i)(f=d[i]||_[i])&&(m[i]=f);for(;h<r;++h)l[h]=e[h];return new Tn(l,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,o=t[e],i=o.length-1,c=o[i];--i>=0;)(r=o[i])&&(c&&4^r.compareDocumentPosition(c)&&c.parentNode.insertBefore(r,c),c=r);return this},sort:function(t){function e(a,b){return a&&b?t(a.__data__,b.__data__):!a-!b}t||(t=Ne);for(var n=this._groups,r=n.length,o=new Array(r),c=0;c<r;++c){for(var l,h=n[c],f=h.length,d=o[c]=new Array(f),i=0;i<f;++i)(l=h[i])&&(d[i]=l);d.sort(e)}return new Tn(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var c=r[i];if(c)return c}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o,c=e[n],i=0,l=c.length;i<l;++i)(o=c[i])&&t.call(o,o.__data__,i,c);return this},attr:function(t,e){var n=ze(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Fe:Be:"function"==typeof e?n.local?Ie:Ye:n.local?$e:He)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Ue:"function"==typeof e?Ve:qe)(t,e,null==n?"":n)):Xe(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?je:"function"==typeof e?Ze:We)(t,e)):this.node()[t]},classed:function(t,e){var n=Ke(t+"");if(arguments.length<2){for(var r=Je(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?sn:e?nn:rn)(n,e))},text:function(t){return arguments.length?this.each(null==t?an:("function"==typeof t?un:on)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?cn:("function"==typeof t?hn:ln)(t)):this.node().innerHTML},raise:function(){return this.each(fn)},lower:function(){return this.each(dn)},append:function(t){var e="function"==typeof t?t:pn(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:pn(t),select=null==e?yn:"function"==typeof e?e:ye(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),select.apply(this,arguments)||null)}))},remove:function(){return this.each(mn)},clone:function(t){return this.select(t?vn:bn)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=xn(t+""),c=o.length;if(!(arguments.length<2)){for(l=e?An:wn,i=0;i<c;++i)this.each(l(o[i],e,n));return this}var l=this.node().__on;if(l)for(var h,f=0,d=l.length;f<d;++f)for(i=0,h=l[f];i<c;++i)if((r=o[i]).type===h.type&&r.name===h.name)return h.value},dispatch:function(t,e){return this.each(("function"==typeof e?Sn:Cn)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,o=t[e],i=0,c=o.length;i<c;++i)(r=o[i])&&(yield r)}};var Rn=En;function Dn(t){return"string"==typeof t?new Tn([[document.querySelector(t)]],[document.documentElement]):new Tn([[t]],kn)}function Ln(t){t.stopImmediatePropagation()}function Nn(t){t.preventDefault(),t.stopImmediatePropagation()}function Pn(view){var t=view.document.documentElement,e=Dn(view).on("dragstart.drag",Nn,!0);"onselectstart"in t?e.on("selectstart.drag",Nn,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function On(view,t){var e=view.document.documentElement,n=Dn(view).on("dragstart.drag",null);t&&(n.on("click.drag",Nn,!0),setTimeout((function(){n.on("click.drag",null)}),0)),"onselectstart"in e?n.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function zn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Bn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Fn(){}var Hn=.7,$n=1/Hn,Yn="\\s*([+-]?\\d+)\\s*",In="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Un=/^#([0-9a-f]{3,8})$/,qn=new RegExp("^rgb\\("+[Yn,Yn,Yn]+"\\)$"),Vn=new RegExp("^rgb\\("+[Gn,Gn,Gn]+"\\)$"),Xn=new RegExp("^rgba\\("+[Yn,Yn,Yn,In]+"\\)$"),jn=new RegExp("^rgba\\("+[Gn,Gn,Gn,In]+"\\)$"),Wn=new RegExp("^hsl\\("+[In,Gn,Gn]+"\\)$"),Zn=new RegExp("^hsla\\("+[In,Gn,Gn,In]+"\\)$"),Kn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Jn(){return this.rgb().formatHex()}function Qn(){return this.rgb().formatRgb()}function ti(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Un.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ei(e):3===n?new si(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ni(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ni(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=qn.exec(t))?new si(e[1],e[2],e[3],1):(e=Vn.exec(t))?new si(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Xn.exec(t))?ni(e[1],e[2],e[3],e[4]):(e=jn.exec(t))?ni(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Wn.exec(t))?ci(e[1],e[2]/100,e[3]/100,1):(e=Zn.exec(t))?ci(e[1],e[2]/100,e[3]/100,e[4]):Kn.hasOwnProperty(t)?ei(Kn[t]):"transparent"===t?new si(NaN,NaN,NaN,0):null}function ei(t){return new si(t>>16&255,t>>8&255,255&t,1)}function ni(t,g,b,a){return a<=0&&(t=g=b=NaN),new si(t,g,b,a)}function ii(t){return t instanceof Fn||(t=ti(t)),t?new si((t=t.rgb()).r,t.g,t.b,t.opacity):new si}function ri(t,g,b,e){return 1===arguments.length?ii(t):new si(t,g,b,null==e?1:e)}function si(t,g,b,e){this.r=+t,this.g=+g,this.b=+b,this.opacity=+e}function ai(){return"#"+ui(this.r)+ui(this.g)+ui(this.b)}function oi(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}function ui(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ci(t,s,e,a){return a<=0?t=s=e=NaN:e<=0||e>=1?t=s=NaN:s<=0&&(t=NaN),new di(t,s,e,a)}function hi(t){if(t instanceof di)return new di(t.h,t.s,t.l,t.opacity);if(t instanceof Fn||(t=ti(t)),!t)return new di;if(t instanceof di)return t;var e=(t=t.rgb()).r/255,g=t.g/255,b=t.b/255,n=Math.min(e,g,b),r=Math.max(e,g,b),o=NaN,s=r-n,c=(r+n)/2;return s?(o=e===r?(g-b)/s+6*(g<b):g===r?(b-e)/s+2:(e-g)/s+4,s/=c<.5?r+n:2-r-n,o*=60):s=c>0&&c<1?0:o,new di(o,s,c,t.opacity)}function fi(t,s,e,n){return 1===arguments.length?hi(t):new di(t,s,e,null==n?1:n)}function di(t,s,e,n){this.h=+t,this.s=+s,this.l=+e,this.opacity=+n}function _i(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function gi(t,e,n,r,o){var c=t*t,l=c*t;return((1-3*t+3*c-l)*e+(4-6*c+3*l)*n+(1+3*t+3*c-3*l)*r+l*o)/6}function pi(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],c=i>0?t[i-1]:2*r-o,l=i<e-1?t[i+2]:2*o-r;return gi((n-i/e)*e,c,r,o,l)}}function yi(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],o=t[i%e],c=t[(i+1)%e],l=t[(i+2)%e];return gi((n-i/e)*e,r,o,c,l)}}zn(Fn,ti,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Jn,formatHex:Jn,formatHsl:function(){return hi(this).formatHsl()},formatRgb:Qn,toString:Qn}),zn(si,ri,Bn(Fn,{brighter:function(t){return t=null==t?$n:Math.pow($n,t),new si(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Hn:Math.pow(Hn,t),new si(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ai,formatHex:ai,formatRgb:oi,toString:oi})),zn(di,fi,Bn(Fn,{brighter:function(t){return t=null==t?$n:Math.pow($n,t),new di(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Hn:Math.pow(Hn,t),new di(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),s=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*s,r=2*e-n;return new si(_i(t>=240?t-240:t+120,r,n),_i(t,r,n),_i(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===a?")":", "+a+")")}}));var mi=t=>()=>t;function bi(a,t){return function(e){return a+e*t}}function vi(a,b){var t=b-a;return t?bi(a,t>180||t<-180?t-360*Math.round(t/360):t):mi(isNaN(a)?b:a)}function xi(t){return 1==(t=+t)?wi:function(a,b){return b-a?function(a,b,t){return a=Math.pow(a,t),b=Math.pow(b,t)-a,t=1/t,function(e){return Math.pow(a+e*b,t)}}(a,b,t):mi(isNaN(a)?b:a)}}function wi(a,b){var t=b-a;return t?bi(a,t):mi(isNaN(a)?b:a)}var Ai=function t(e){var n=xi(e);function r(t,e){var r=n((t=ri(t)).r,(e=ri(e)).r),g=n(t.g,e.g),b=n(t.b,e.b),o=wi(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=g(e),t.b=b(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function Mi(t){return function(e){var i,n,r=e.length,o=new Array(r),g=new Array(r),b=new Array(r);for(i=0;i<r;++i)n=ri(e[i]),o[i]=n.r||0,g[i]=n.g||0,b[i]=n.b||0;return o=t(o),g=t(g),b=t(b),n.opacity=1,function(t){return n.r=o(t),n.g=g(t),n.b=b(t),n+""}}}var Ci=Mi(pi),Si=Mi(yi);function ki(a,b){b||(b=[]);var i,t=a?Math.min(b.length,a.length):0,e=b.slice();return function(n){for(i=0;i<t;++i)e[i]=a[i]*(1-n)+b[i]*n;return e}}function Ti(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ei(a,b){return(Ti(b)?ki:Ri)(a,b)}function Ri(a,b){var i,t=b?b.length:0,e=a?Math.min(t,a.length):0,n=new Array(e),r=new Array(t);for(i=0;i<e;++i)n[i]=zi(a[i],b[i]);for(;i<t;++i)r[i]=b[i];return function(t){for(i=0;i<e;++i)r[i]=n[i](t);return r}}function Di(a,b){var t=new Date;return a=+a,b=+b,function(e){return t.setTime(a*(1-e)+b*e),t}}function Li(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}function object(a,b){var t,i={},e={};for(t in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)t in a?i[t]=zi(a[t],b[t]):e[t]=b[t];return function(n){for(t in i)e[t]=i[t](n);return e}}var Ni=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pi=new RegExp(Ni.source,"g");function Oi(a,b){var t,e,n,r=Ni.lastIndex=Pi.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(t=Ni.exec(a))&&(e=Pi.exec(b));)(n=e.index)>r&&(n=b.slice(r,n),s[i]?s[i]+=n:s[++i]=n),(t=t[0])===(e=e[0])?s[i]?s[i]+=e:s[++i]=e:(s[++i]=null,q.push({i:i,x:Li(t,e)})),r=Pi.lastIndex;return r<b.length&&(n=b.slice(r),s[i]?s[i]+=n:s[++i]=n),s.length<2?q[0]?function(b){return function(t){return b(t)+""}}(q[0].x):function(b){return function(){return b}}(b):(b=q.length,function(t){for(var e,i=0;i<b;++i)s[(e=q[i]).i]=e.x(t);return s.join("")})}function zi(a,b){var t,e=typeof b;return null==b||"boolean"===e?mi(b):("number"===e?Li:"string"===e?(t=ti(b))?(b=t,Ai):Oi:b instanceof ti?Ai:b instanceof Date?Di:Ti(b)?ki:Array.isArray(b)?Ri:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?object:Li)(a,b)}function Bi(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Fi(t,e){if(t=Bi(t),void 0===e&&(e=t.currentTarget),e){var svg=e.ownerSVGElement||e;if(svg.createSVGPoint){var n=svg.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,[(n=n.matrixTransform(e.getScreenCTM().inverse())).x,n.y]}if(e.getBoundingClientRect){var rect=e.getBoundingClientRect();return[t.clientX-rect.left-e.clientLeft,t.clientY-rect.top-e.clientTop]}}return[t.pageX,t.pageY]}var Hi,$i,Yi=0,Ii=0,Gi=0,Ui=0,qi=0,Vi=0,Xi="object"==typeof performance&&performance.now?performance:Date,ji="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Wi(){return qi||(ji(Zi),qi=Xi.now()+Vi)}function Zi(){qi=0}function Ki(){this._call=this._time=this._next=null}function Ji(t,e,time){var n=new Ki;return n.restart(t,e,time),n}function Qi(){Wi(),++Yi;for(var t,e=Hi;e;)(t=qi-e._time)>=0&&e._call.call(null,t),e=e._next;--Yi}function er(){qi=(Ui=Xi.now())+Vi,Yi=Ii=0;try{Qi()}finally{Yi=0,function(){var t,e,n=Hi,time=1/0;for(;n;)n._call?(time>n._time&&(time=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Hi=e);$i=t,ir(time)}(),qi=0}}function nr(){var t=Xi.now(),e=t-Ui;e>1e3&&(Vi-=e,Ui=t)}function ir(time){Yi||(Ii&&(Ii=clearTimeout(Ii)),time-qi>24?(time<1/0&&(Ii=setTimeout(er,time-Xi.now()-Vi)),Gi&&(Gi=clearInterval(Gi))):(Gi||(Ui=Xi.now(),Gi=setInterval(nr,1e3)),Yi=1,ji(er)))}function rr(t,e,time){var n=new Ki;return e=null==e?0:+e,n.restart((r=>{n.stop(),t(r+e)}),e,time),n}Ki.prototype=Ji.prototype={constructor:Ki,restart:function(t,e,time){if("function"!=typeof t)throw new TypeError("callback is not a function");time=(null==time?Wi():+time)+(null==e?0:+e),this._next||$i===this||($i?$i._next=this:Hi=this,$i=this),this._call=t,this._time=time,ir()},stop:function(){this._call&&(this._call=null,this._time=1/0,ir())}};var sr=ge("start","end","cancel","interrupt"),ar=[];function or(t,e,n,r,o,c){var l=t.__transition;if(l){if(n in l)return}else t.__transition={};!function(t,e,n){var r,o=t.__transition;function c(t){n.state=1,n.timer.restart(l,n.delay,n.time),n.delay<=t&&l(t-n.delay)}function l(c){var i,d,_,y;if(1!==n.state)return f();for(i in o)if((y=o[i]).name===n.name){if(3===y.state)return rr(l);4===y.state?(y.state=6,y.timer.stop(),y.on.call("interrupt",t,t.__data__,y.index,y.group),delete o[i]):+i<e&&(y.state=6,y.timer.stop(),y.on.call("cancel",t,t.__data__,y.index,y.group),delete o[i])}if(rr((function(){3===n.state&&(n.state=4,n.timer.restart(h,n.delay,n.time),h(c))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(_=n.tween.length),i=0,d=-1;i<_;++i)(y=n.tween[i].value.call(t,t.__data__,n.index,n.group))&&(r[++d]=y);r.length=d+1}}function h(e){for(var o=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(f),n.state=5,1),i=-1,c=r.length;++i<c;)r[i].call(t,o);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){for(var i in n.state=6,n.timer.stop(),delete o[e],o)return;delete t.__transition}o[e]=n,n.timer=Ji(c,0,n.time)}(t,n,{name:e,index:r,group:o,on:sr,tween:ar,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:0})}function ur(t,e){var n=lr(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function cr(t,e){var n=lr(t,e);if(n.state>3)throw new Error("too late; already running");return n}function lr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function fr(t,e){var n,r,i,o=t.__transition,c=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):c=!1;c&&delete t.__transition}}var dr,_r=180/Math.PI,gr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pr(a,b,t,e,n,r){var o,c,l;return(o=Math.sqrt(a*a+b*b))&&(a/=o,b/=o),(l=a*t+b*e)&&(t-=a*l,e-=b*l),(c=Math.sqrt(t*t+e*e))&&(t/=c,e/=c,l/=c),a*e<b*t&&(a=-a,b=-b,l=-l,o=-o),{translateX:n,translateY:r,rotate:Math.atan2(b,a)*_r,skewX:Math.atan(l)*_r,scaleX:o,scaleY:c}}function yr(t,e,n,r){function o(s){return s.length?s.pop()+" ":""}return function(a,b){var s=[],q=[];return a=t(a),b=t(b),function(t,r,o,c,s,q){if(t!==o||r!==c){var i=s.push("translate(",null,e,null,n);q.push({i:i-4,x:Li(t,o)},{i:i-2,x:Li(r,c)})}else(o||c)&&s.push("translate("+o+e+c+n)}(a.translateX,a.translateY,b.translateX,b.translateY,s,q),function(a,b,s,q){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(o(s)+"rotate(",null,r)-2,x:Li(a,b)})):b&&s.push(o(s)+"rotate("+b+r)}(a.rotate,b.rotate,s,q),function(a,b,s,q){a!==b?q.push({i:s.push(o(s)+"skewX(",null,r)-2,x:Li(a,b)}):b&&s.push(o(s)+"skewX("+b+r)}(a.skewX,b.skewX,s,q),function(t,e,n,r,s,q){if(t!==n||e!==r){var i=s.push(o(s)+"scale(",null,",",null,")");q.push({i:i-4,x:Li(t,n)},{i:i-2,x:Li(e,r)})}else 1===n&&1===r||s.push(o(s)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),a=b=null,function(t){for(var e,i=-1,n=q.length;++i<n;)s[(e=q[i]).i]=e.x(t);return s.join("")}}}var mr=yr((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?gr:pr(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),vr=yr((function(t){return null==t?gr:(dr||(dr=document.createElementNS("http://www.w3.org/2000/svg","g")),dr.setAttribute("transform",t),(t=dr.transform.baseVal.consolidate())?pr((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):gr)}),", ",")",")");function xr(t,e){var n,r;return function(){var o=cr(this,t),c=o.tween;if(c!==n)for(var i=0,l=(r=n=c).length;i<l;++i)if(r[i].name===e){(r=r.slice()).splice(i,1);break}o.tween=r}}function wr(t,e,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var c=cr(this,t),l=c.tween;if(l!==r){o=(r=l).slice();for(var h={name:e,value:n},i=0,f=o.length;i<f;++i)if(o[i].name===e){o[i]=h;break}i===f&&o.push(h)}c.tween=o}}function Ar(t,e,n){var r=t._id;return t.each((function(){var t=cr(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return lr(t,r).value[e]}}function Mr(a,b){var t;return("number"==typeof b?Li:b instanceof ti?Ai:(t=ti(b))?(b=t,Ai):Oi)(a,b)}function Cr(t){return function(){this.removeAttribute(t)}}function Sr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function kr(t,e,n){var r,o,c=n+"";return function(){var l=this.getAttribute(t);return l===c?null:l===r?o:o=e(r=l,n)}}function Tr(t,e,n){var r,o,c=n+"";return function(){var l=this.getAttributeNS(t.space,t.local);return l===c?null:l===r?o:o=e(r=l,n)}}function Er(t,e,n){var r,o,c;return function(){var l,h,f=n(this);if(null!=f)return(l=this.getAttribute(t))===(h=f+"")?null:l===r&&h===o?c:(o=h,c=e(r=l,f));this.removeAttribute(t)}}function Rr(t,e,n){var r,o,c;return function(){var l,h,f=n(this);if(null!=f)return(l=this.getAttributeNS(t.space,t.local))===(h=f+"")?null:l===r&&h===o?c:(o=h,c=e(r=l,f));this.removeAttributeNS(t.space,t.local)}}function Dr(t,i){return function(e){this.setAttribute(t,i.call(this,e))}}function Lr(t,i){return function(e){this.setAttributeNS(t.space,t.local,i.call(this,e))}}function Nr(t,e){var n,r;function o(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Lr(t,i)),n}return o._value=e,o}function Pr(t,e){var n,r;function o(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Dr(t,i)),n}return o._value=e,o}function Or(t,e){return function(){ur(this,t).delay=+e.apply(this,arguments)}}function zr(t,e){return e=+e,function(){ur(this,t).delay=e}}function Br(t,e){return function(){cr(this,t).duration=+e.apply(this,arguments)}}function Fr(t,e){return e=+e,function(){cr(this,t).duration=e}}function Hr(t,e){if("function"!=typeof e)throw new Error;return function(){cr(this,t).ease=e}}function $r(t,e,n){var r,o,c=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(e)?ur:cr;return function(){var l=c(this,t),h=l.on;h!==r&&(o=(r=h).copy()).on(e,n),l.on=o}}var Yr=Rn.prototype.constructor;function Ir(t){return function(){this.style.removeProperty(t)}}function Gr(t,i,e){return function(n){this.style.setProperty(t,i.call(this,n),e)}}function Ur(t,e,n){var r,o;function c(){var i=e.apply(this,arguments);return i!==o&&(r=(o=i)&&Gr(t,i,n)),r}return c._value=e,c}function qr(i){return function(t){this.textContent=i.call(this,t)}}function Vr(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&qr(i)),e}return r._value=t,r}var Xr=0;function jr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Wr(t){return Rn().transition(t)}function Zr(){return++Xr}var Kr=Rn.prototype;function Jr(t){return t*t*t}function Qr(t){return--t*t*t+1}function ts(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}jr.prototype=Wr.prototype={constructor:jr,select:function(select){var t=this._name,e=this._id;"function"!=typeof select&&(select=ye(select));for(var n=this._groups,r=n.length,o=new Array(r),c=0;c<r;++c)for(var l,h,f=n[c],d=f.length,_=o[c]=new Array(d),i=0;i<d;++i)(l=f[i])&&(h=select.call(l,l.__data__,i,f))&&("__data__"in l&&(h.__data__=l.__data__),_[i]=h,or(_[i],t,e,i,_,lr(l,e)));return new jr(o,this._parents,t,e)},selectAll:function(select){var t=this._name,e=this._id;"function"!=typeof select&&(select=ve(select));for(var n=this._groups,r=n.length,o=[],c=[],l=0;l<r;++l)for(var h,f=n[l],d=f.length,i=0;i<d;++i)if(h=f[i]){for(var _,y=select.call(h,h.__data__,i,f),m=lr(h,e),v=0,x=y.length;v<x;++v)(_=y[v])&&or(_,t,e,v,y,m);o.push(y),c.push(h)}return new jr(o,c,t,e)},filter:function(t){"function"!=typeof t&&(t=xe(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var c,l=e[o],h=l.length,f=r[o]=[],i=0;i<h;++i)(c=l[i])&&t.call(c,c.__data__,i,l)&&f.push(c);return new jr(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,o=n.length,c=Math.min(r,o),l=new Array(r),h=0;h<c;++h)for(var f,d=e[h],_=n[h],y=d.length,m=l[h]=new Array(y),i=0;i<y;++i)(f=d[i]||_[i])&&(m[i]=f);for(;h<r;++h)l[h]=e[h];return new jr(l,this._parents,this._name,this._id)},selection:function(){return new Yr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Zr(),r=this._groups,o=r.length,c=0;c<o;++c)for(var l,h=r[c],f=h.length,i=0;i<f;++i)if(l=h[i]){var d=lr(l,e);or(l,t,n,i,h,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new jr(r,this._parents,t,n)},call:Kr.call,nodes:Kr.nodes,node:Kr.node,size:Kr.size,empty:Kr.empty,each:Kr.each,on:function(t,e){var n=this._id;return arguments.length<2?lr(this.node(),n).on.on(t):this.each($r(n,t,e))},attr:function(t,e){var n=ze(t),i="transform"===n?vr:Mr;return this.attrTween(t,"function"==typeof e?(n.local?Rr:Er)(n,i,Ar(this,"attr."+t,e)):null==e?(n.local?Sr:Cr)(n):(n.local?Tr:kr)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=ze(t);return this.tween(n,(r.local?Nr:Pr)(r,e))},style:function(t,e,n){var i="transform"==(t+="")?mr:Mr;return null==e?this.styleTween(t,function(t,e){var n,r,o;return function(){var c=Xe(this,t),l=(this.style.removeProperty(t),Xe(this,t));return c===l?null:c===n&&l===r?o:o=e(n=c,r=l)}}(t,i)).on("end.style."+t,Ir(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,o,c;return function(){var l=Xe(this,t),h=n(this),f=h+"";return null==h&&(this.style.removeProperty(t),f=h=Xe(this,t)),l===f?null:l===r&&f===o?c:(o=f,c=e(r=l,h))}}(t,i,Ar(this,"style."+t,e))).each(function(t,e){var n,r,o,c,l="style."+e,h="end."+l;return function(){var f=cr(this,t),d=f.on,_=null==f.value[l]?c||(c=Ir(e)):void 0;d===n&&o===_||(r=(n=d).copy()).on(h,o=_),f.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,o,c=n+"";return function(){var l=Xe(this,t);return l===c?null:l===r?o:o=e(r=l,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Ur(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Ar(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Vr(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,o=lr(this.node(),n).tween,i=0,c=o.length;i<c;++i)if((r=o[i]).name===t)return r.value;return null}return this.each((null==e?xr:wr)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Or:zr)(e,t)):lr(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Br:Fr)(e,t)):lr(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Hr(e,t)):lr(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;cr(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,o=n.size();return new Promise((function(c,l){var h={value:l},f={value:function(){0==--o&&c()}};n.each((function(){var n=cr(this,r),o=n.on;o!==t&&((e=(t=o).copy())._.cancel.push(h),e._.interrupt.push(h),e._.end.push(f)),n.on=e})),0===o&&c()}))},[Symbol.iterator]:Kr[Symbol.iterator]};var es={time:null,delay:0,duration:250,ease:ts};function ns(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}Rn.prototype.interrupt=function(t){return this.each((function(){fr(this,t)}))},Rn.prototype.transition=function(t){var e,n;t instanceof jr?(e=t._id,t=t._name):(e=Zr(),(n=es).time=Wi(),t=null==t?null:t+"");for(var r=this._groups,o=r.length,c=0;c<o;++c)for(var l,h=r[c],f=h.length,i=0;i<f;++i)(l=h[i])&&or(l,t,e,i,h,n||ns(l,e));return new jr(r,this._parents,t,e)};var is=[null];function rs(t,e){var n,i,r=t.__transition;if(r)for(i in e=null==e?null:e+"",r)if((n=r[i]).state>1&&n.name===e)return new jr([[t]],is,e,+i);return null}var ss=t=>()=>t;function as(t,{sourceEvent:e,target:n,selection:r,mode:o,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:o,enumerable:!0,configurable:!0},_:{value:c}})}function os(t){t.stopImmediatePropagation()}function us(t){t.preventDefault(),t.stopImmediatePropagation()}var cs={name:"drag"},ls={name:"space"},hs={name:"handle"},fs={name:"center"};const{abs:ds,max:_s,min:gs}=Math;function ps(t){return[+t[0],+t[1]]}function ys(t){return[ps(t[0]),ps(t[1])]}var ms={name:"x",handles:["w","e"].map(Ss),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},bs={name:"y",handles:["n","s"].map(Ss),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},vs={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Ss),input:function(t){return null==t?null:ys(t)},output:function(t){return t}},xs={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ws={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},As={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ms={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Cs={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ss(t){return{type:t}}function ks(t){return!t.ctrlKey&&!t.button}function Ts(){var svg=this.ownerSVGElement||this;return svg.hasAttribute("viewBox")?[[(svg=svg.viewBox.baseVal).x,svg.y],[svg.x+svg.width,svg.y+svg.height]]:[[0,0],[svg.width.baseVal.value,svg.height.baseVal.value]]}function Es(){return navigator.maxTouchPoints||"ontouchstart"in this}function Rs(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ds(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Ls(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Ns(){return zs(ms)}function Ps(){return zs(bs)}function Os(){return zs(vs)}function zs(t){var e,n=Ts,filter=ks,r=Es,o=!0,c=ge("start","brush","end"),l=6;function h(e){var n=e.property("__brush",x).selectAll(".overlay").data([Ss("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",xs.overlay).merge(n).each((function(){var t=Rs(this).extent;Dn(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([Ss("selection")]).enter().append("rect").attr("class","selection").attr("cursor",xs.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var o=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));o.exit().remove(),o.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return xs[t.type]})),e.each(f).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",y).filter(r).on("touchstart.brush",y).on("touchmove.brush",m).on("touchend.brush touchcancel.brush",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(){var t=Dn(this),e=Rs(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-l/2:e[0][0]-l/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-l/2:e[0][1]-l/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+l:l})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+l:l}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function d(t,e,n){var r=t.__brush.emitter;return!r||n&&r.clean?new _(t,e,n):r}function _(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function y(n){if((!e||n.touches)&&filter.apply(this,arguments)){var r,c,l,h,_,y,m,v,x,w,A,M=this,C=n.target.__data__.type,S="selection"===(o&&n.metaKey?C="overlay":C)?cs:o&&n.altKey?fs:hs,k=t===bs?null:Ms[C],T=t===ms?null:Cs[C],E=Rs(M),R=E.extent,D=E.selection,L=R[0][0],N=R[0][1],P=R[1][0],O=R[1][1],z=0,B=0,F=k&&T&&o&&n.shiftKey,H=Array.from(n.touches||[n],(t=>{const i=t.identifier;return(t=Fi(t,M)).point0=t.slice(),t.identifier=i,t}));if("overlay"===C){D&&(x=!0);const e=[H[0],H[1]||H[0]];E.selection=D=[[r=t===bs?L:gs(e[0][0],e[1][0]),l=t===ms?N:gs(e[0][1],e[1][1])],[_=t===bs?P:_s(e[0][0],e[1][0]),m=t===ms?O:_s(e[0][1],e[1][1])]],H.length>1&&U()}else r=D[0][0],l=D[0][1],_=D[1][0],m=D[1][1];c=r,h=l,y=_,v=m;var $=Dn(M).attr("pointer-events","none"),Y=$.selectAll(".overlay").attr("cursor",xs[C]);fr(M);var I=d(M,arguments,!0).beforestart();if(n.touches)I.moved=G,I.ended=V;else{var view=Dn(n.view).on("mousemove.brush",G,!0).on("mouseup.brush",V,!0);o&&view.on("keydown.brush",X,!0).on("keyup.brush",j,!0),Pn(n.view)}f.call(M),I.start(n,S.name)}function G(t){for(const p of t.changedTouches||[t])for(const t of H)t.identifier===p.identifier&&(t.cur=Fi(p,M));if(F&&!w&&!A&&1===H.length){const t=H[0];ds(t.cur[0]-t[0])>ds(t.cur[1]-t[1])?A=!0:w=!0}for(const t of H)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);x=!0,us(t),U(t)}function U(t){const e=H[0],n=e.point0;var o;switch(z=e[0]-n[0],B=e[1]-n[1],S){case ls:case cs:k&&(z=_s(L-r,gs(P-_,z)),c=r+z,y=_+z),T&&(B=_s(N-l,gs(O-m,B)),h=l+B,v=m+B);break;case hs:H[1]?(k&&(c=_s(L,gs(P,H[0][0])),y=_s(L,gs(P,H[1][0])),k=1),T&&(h=_s(N,gs(O,H[0][1])),v=_s(N,gs(O,H[1][1])),T=1)):(k<0?(z=_s(L-r,gs(P-r,z)),c=r+z,y=_):k>0&&(z=_s(L-_,gs(P-_,z)),c=r,y=_+z),T<0?(B=_s(N-l,gs(O-l,B)),h=l+B,v=m):T>0&&(B=_s(N-m,gs(O-m,B)),h=l,v=m+B));break;case fs:k&&(c=_s(L,gs(P,r-z*k)),y=_s(L,gs(P,_+z*k))),T&&(h=_s(N,gs(O,l-B*T)),v=_s(N,gs(O,m+B*T)))}y<c&&(k*=-1,o=r,r=_,_=o,o=c,c=y,y=o,C in ws&&Y.attr("cursor",xs[C=ws[C]])),v<h&&(T*=-1,o=l,l=m,m=o,o=h,h=v,v=o,C in As&&Y.attr("cursor",xs[C=As[C]])),E.selection&&(D=E.selection),w&&(c=D[0][0],y=D[1][0]),A&&(h=D[0][1],v=D[1][1]),D[0][0]===c&&D[0][1]===h&&D[1][0]===y&&D[1][1]===v||(E.selection=[[c,h],[y,v]],f.call(M),I.brush(t,S.name))}function V(t){if(os(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else On(t.view,x),view.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);$.attr("pointer-events","all"),Y.attr("cursor",xs.overlay),E.selection&&(D=E.selection),Ds(D)&&(E.selection=null,f.call(M)),I.end(t,S.name)}function X(t){switch(t.keyCode){case 16:F=k&&T;break;case 18:S===hs&&(k&&(_=y-z*k,r=c+z*k),T&&(m=v-B*T,l=h+B*T),S=fs,U());break;case 32:S!==hs&&S!==fs||(k<0?_=y-z:k>0&&(r=c-z),T<0?m=v-B:T>0&&(l=h-B),S=ls,Y.attr("cursor",xs.selection),U());break;default:return}us(t)}function j(t){switch(t.keyCode){case 16:F&&(w=A=F=!1,U());break;case 18:S===fs&&(k<0?_=y:k>0&&(r=c),T<0?m=v:T>0&&(l=h),S=hs,U());break;case 32:S===ls&&(t.altKey?(k&&(_=y-z*k,r=c+z*k),T&&(m=v-B*T,l=h+B*T),S=fs):(k<0?_=y:k>0&&(r=c),T<0?m=v:T>0&&(l=h),S=hs),Y.attr("cursor",xs[C]),U());break;default:return}us(t)}}function m(t){d(this,arguments).moved(t)}function v(t){d(this,arguments).ended(t)}function x(){var e=this.__brush||{selection:null};return e.extent=ys(n.apply(this,arguments)),e.dim=t,e}return h.move=function(e,n){e.tween?e.on("start.brush",(function(t){d(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){d(this,arguments).end(t)})).tween("brush",(function(){var e=this,r=e.__brush,o=d(e,arguments),c=r.selection,l=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),i=zi(c,l);function h(t){r.selection=1===t&&null===l?null:i(t),f.call(e),o.brush()}return null!==c&&null!==l?h:h(1)})):e.each((function(){var e=this,r=arguments,o=e.__brush,c=t.input("function"==typeof n?n.apply(e,r):n,o.extent),l=d(e,r).beforestart();fr(e),o.selection=null===c?null:c,f.call(e),l.start().brush().end()}))},h.clear=function(t){h.move(t,null)},_.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,n,r){var o=Dn(this.that).datum();c.call(e,this.that,new as(e,{sourceEvent:n,target:h,selection:t.output(this.state.selection),mode:r,dispatch:c}),o)}},h.extent=function(t){return arguments.length?(n="function"==typeof t?t:ss(ys(t)),h):n},h.filter=function(t){return arguments.length?(filter="function"==typeof t?t:ss(!!t),h):filter},h.touchable=function(t){return arguments.length?(r="function"==typeof t?t:ss(!!t),h):r},h.handleSize=function(t){return arguments.length?(l=+t,h):l},h.keyModifiers=function(t){return arguments.length?(o=!!t,h):o},h.on=function(){var t=c.on.apply(c,arguments);return t===c?h:t},h}var Bs=Math.abs,Fs=Math.cos,Hs=Math.sin,$s=Math.PI,Ys=$s/2,Is=2*$s,Gs=Math.max,Us=1e-12;function qs(i,t){return Array.from({length:t-i},((t,e)=>i+e))}function Vs(t){return function(a,b){return t(a.source.value+a.target.value,b.source.value+b.target.value)}}function Xs(){return Zs(!1,!1)}function js(){return Zs(!1,!0)}function Ws(){return Zs(!0,!1)}function Zs(t,e){var n=0,r=null,o=null,c=null;function l(l){var h,f=l.length,d=new Array(f),_=qs(0,f),y=new Array(f*f),m=new Array(f),v=0;l=Float64Array.from({length:f*f},e?(t,i)=>l[i%f][i/f|0]:(t,i)=>l[i/f|0][i%f]);for(let i=0;i<f;++i){let e=0;for(let n=0;n<f;++n)e+=l[i*f+n]+t*l[n*f+i];v+=d[i]=e}h=(v=Gs(0,Is-n*f)/v)?n:Is/f;{let e=0;r&&_.sort(((a,b)=>r(d[a],d[b])));for(const i of _){const n=e;if(t){const t=qs(1+~f,f).filter((t=>t<0?l[~t*f+i]:l[i*f+t]));o&&t.sort(((a,b)=>o(a<0?-l[~a*f+i]:l[i*f+a],b<0?-l[~b*f+i]:l[i*f+b])));for(const n of t)if(n<0){(y[~n*f+i]||(y[~n*f+i]={source:null,target:null})).target={index:i,startAngle:e,endAngle:e+=l[~n*f+i]*v,value:l[~n*f+i]}}else{(y[i*f+n]||(y[i*f+n]={source:null,target:null})).source={index:i,startAngle:e,endAngle:e+=l[i*f+n]*v,value:l[i*f+n]}}m[i]={index:i,startAngle:n,endAngle:e,value:d[i]}}else{const t=qs(0,f).filter((t=>l[i*f+t]||l[t*f+i]));o&&t.sort(((a,b)=>o(l[i*f+a],l[i*f+b])));for(const n of t){let t;if(i<n?(t=y[i*f+n]||(y[i*f+n]={source:null,target:null}),t.source={index:i,startAngle:e,endAngle:e+=l[i*f+n]*v,value:l[i*f+n]}):(t=y[n*f+i]||(y[n*f+i]={source:null,target:null}),t.target={index:i,startAngle:e,endAngle:e+=l[i*f+n]*v,value:l[i*f+n]},i===n&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value){const source=t.source;t.source=t.target,t.target=source}}m[i]={index:i,startAngle:n,endAngle:e,value:d[i]}}e+=h}}return(y=Object.values(y)).groups=m,c?y.sort(c):y}return l.padAngle=function(t){return arguments.length?(n=Gs(0,t),l):n},l.sortGroups=function(t){return arguments.length?(r=t,l):r},l.sortSubgroups=function(t){return arguments.length?(o=t,l):o},l.sortChords=function(t){return arguments.length?(null==t?c=null:(c=Vs(t))._=t,l):c&&c._},l}const Ks=Math.PI,Js=2*Ks,Qs=1e-6,ta=Js-Qs;function ea(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path(){return new ea}ea.prototype=path.prototype={constructor:ea,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,o,c){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+o)+","+(this._y1=+c)},arcTo:function(t,e,n,r,o){t=+t,e=+e,n=+n,r=+r,o=+o;var c=this._x1,l=this._y1,h=n-t,f=r-e,d=c-t,_=l-e,y=d*d+_*_;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(y>Qs)if(Math.abs(_*h-f*d)>Qs&&o){var m=n-c,v=r-l,x=h*h+f*f,w=m*m+v*v,A=Math.sqrt(x),M=Math.sqrt(y),C=o*Math.tan((Ks-Math.acos((x+y-w)/(2*A*M)))/2),S=C/M,k=C/A;Math.abs(S-1)>Qs&&(this._+="L"+(t+S*d)+","+(e+S*_)),this._+="A"+o+","+o+",0,0,"+ +(_*m>d*v)+","+(this._x1=t+k*h)+","+(this._y1=e+k*f)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,o,c){t=+t,e=+e,c=!!c;var l=(n=+n)*Math.cos(r),h=n*Math.sin(r),f=t+l,d=e+h,_=1^c,y=c?r-o:o-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+f+","+d:(Math.abs(this._x1-f)>Qs||Math.abs(this._y1-d)>Qs)&&(this._+="L"+f+","+d),n&&(y<0&&(y=y%Js+Js),y>ta?this._+="A"+n+","+n+",0,1,"+_+","+(t-l)+","+(e-h)+"A"+n+","+n+",0,1,"+_+","+(this._x1=f)+","+(this._y1=d):y>Qs&&(this._+="A"+n+","+n+",0,"+ +(y>=Ks)+","+_+","+(this._x1=t+n*Math.cos(o))+","+(this._y1=e+n*Math.sin(o))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var na=path,ia=Array.prototype.slice;function ra(t){return function(){return t}}function sa(t){return t.source}function aa(t){return t.target}function oa(t){return t.radius}function ua(t){return t.startAngle}function ca(t){return t.endAngle}function la(){return 0}function ha(){return 10}function fa(t){var source=sa,e=aa,n=oa,r=oa,o=ua,c=ca,l=la,h=null;function f(){var f,s=source.apply(this,arguments),d=e.apply(this,arguments),_=l.apply(this,arguments)/2,y=ia.call(arguments),m=+n.apply(this,(y[0]=s,y)),v=o.apply(this,y)-Ys,x=c.apply(this,y)-Ys,tr=+r.apply(this,(y[0]=d,y)),w=o.apply(this,y)-Ys,A=c.apply(this,y)-Ys;if(h||(h=f=na()),_>Us&&(Bs(x-v)>2*_+Us?x>v?(v+=_,x-=_):(v-=_,x+=_):v=x=(v+x)/2,Bs(A-w)>2*_+Us?A>w?(w+=_,A-=_):(w-=_,A+=_):w=A=(w+A)/2),h.moveTo(m*Fs(v),m*Hs(v)),h.arc(0,0,m,v,x),v!==w||x!==A)if(t){var hr=+t.apply(this,arguments),M=tr-hr,C=(w+A)/2;h.quadraticCurveTo(0,0,M*Fs(w),M*Hs(w)),h.lineTo(tr*Fs(C),tr*Hs(C)),h.lineTo(M*Fs(A),M*Hs(A))}else h.quadraticCurveTo(0,0,tr*Fs(w),tr*Hs(w)),h.arc(0,0,tr,w,A);if(h.quadraticCurveTo(0,0,m*Fs(v),m*Hs(v)),h.closePath(),f)return h=null,f+""||null}return t&&(f.headRadius=function(e){return arguments.length?(t="function"==typeof e?e:ra(+e),f):t}),f.radius=function(t){return arguments.length?(n=r="function"==typeof t?t:ra(+t),f):n},f.sourceRadius=function(t){return arguments.length?(n="function"==typeof t?t:ra(+t),f):n},f.targetRadius=function(t){return arguments.length?(r="function"==typeof t?t:ra(+t),f):r},f.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:ra(+t),f):o},f.endAngle=function(t){return arguments.length?(c="function"==typeof t?t:ra(+t),f):c},f.padAngle=function(t){return arguments.length?(l="function"==typeof t?t:ra(+t),f):l},f.source=function(t){return arguments.length?(source=t,f):source},f.target=function(t){return arguments.length?(e=t,f):e},f.context=function(t){return arguments.length?(h=null==t?null:t,f):h},f}function da(){return fa()}function _a(){return fa(ha)}const ga=Math.PI/180,pa=180/Math.PI,ya=.96422,ma=.82521,ba=4/29,va=6/29,xa=3*va*va;function wa(t){if(t instanceof Ca)return new Ca(t.l,t.a,t.b,t.opacity);if(t instanceof Na)return Pa(t);t instanceof si||(t=ii(t));var e,n,r=Ea(t.r),g=Ea(t.g),b=Ea(t.b),o=Sa((.2225045*r+.7168786*g+.0606169*b)/1);return r===g&&g===b?e=n=o:(e=Sa((.4360747*r+.3850649*g+.1430804*b)/ya),n=Sa((.0139322*r+.0971045*g+.7141733*b)/ma)),new Ca(116*o-16,500*(e-o),200*(o-n),t.opacity)}function Aa(t,e){return new Ca(t,0,0,null==e?1:e)}function Ma(t,a,b,e){return 1===arguments.length?wa(t):new Ca(t,a,b,null==e?1:e)}function Ca(t,a,b,e){this.l=+t,this.a=+a,this.b=+b,this.opacity=+e}function Sa(t){return t>.008856451679035631?Math.pow(t,1/3):t/xa+ba}function ka(t){return t>va?t*t*t:xa*(t-ba)}function Ta(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ea(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ra(t){if(t instanceof Na)return new Na(t.h,t.c,t.l,t.opacity);if(t instanceof Ca||(t=wa(t)),0===t.a&&0===t.b)return new Na(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*pa;return new Na(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Da(t,e,n,r){return 1===arguments.length?Ra(t):new Na(n,e,t,null==r?1:r)}function La(t,e,n,r){return 1===arguments.length?Ra(t):new Na(t,e,n,null==r?1:r)}function Na(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Pa(t){if(isNaN(t.h))return new Ca(t.l,0,0,t.opacity);var e=t.h*ga;return new Ca(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}zn(Ca,Ma,Bn(Fn,{brighter:function(t){return new Ca(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Ca(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new si(Ta(3.1338561*(e=ya*ka(e))-1.6168667*(t=1*ka(t))-.4906146*(n=ma*ka(n))),Ta(-.9787684*e+1.9161415*t+.033454*n),Ta(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),zn(Na,La,Bn(Fn,{brighter:function(t){return new Na(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Na(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Pa(this).rgb()}}));var Oa=-.14861,za=1.78277,Ba=-.29227,Fa=-.90649,Ha=1.97294,$a=Ha*Fa,Ya=Ha*za,Ia=za*Ba-Fa*Oa;function Ga(t){if(t instanceof qa)return new qa(t.h,t.s,t.l,t.opacity);t instanceof si||(t=ii(t));var e=t.r/255,g=t.g/255,b=t.b/255,n=(Ia*b+$a*e-Ya*g)/(Ia+$a-Ya),r=b-n,o=(Ha*(g-n)-Ba*r)/Fa,s=Math.sqrt(o*o+r*r)/(Ha*n*(1-n)),c=s?Math.atan2(o,r)*pa-120:NaN;return new qa(c<0?c+360:c,s,n,t.opacity)}function Ua(t,s,e,n){return 1===arguments.length?Ga(t):new qa(t,s,e,null==n?1:n)}function qa(t,s,e,n){this.h=+t,this.s=+s,this.l=+e,this.opacity=+n}zn(qa,Ua,Bn(Fn,{brighter:function(t){return t=null==t?$n:Math.pow($n,t),new qa(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Hn:Math.pow(Hn,t),new qa(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ga,e=+this.l,a=isNaN(this.s)?0:this.s*e*(1-e),n=Math.cos(t),r=Math.sin(t);return new si(255*(e+a*(Oa*n+za*r)),255*(e+a*(Ba*n+Fa*r)),255*(e+a*(Ha*n)),this.opacity)}}));var Va=Array.prototype.slice;function Xa(a,b){return a-b}var ja=t=>()=>t;function Wa(t,e){for(var n,i=-1,r=e.length;++i<r;)if(n=Za(t,e[i]))return n;return 0}function Za(t,e){for(var n=e[0],r=e[1],o=-1,i=0,c=t.length,l=c-1;i<c;l=i++){var h=t[i],f=h[0],d=h[1],_=t[l],y=_[0],m=_[1];if(Ka(h,_,e))return 0;d>r!=m>r&&n<(y-f)*(r-d)/(m-d)+f&&(o=-o)}return o}function Ka(a,b,t){var i,p,q,e;return function(a,b,t){return(b[0]-a[0])*(t[1]-a[1])==(t[0]-a[0])*(b[1]-a[1])}(a,b,t)&&(p=a[i=+(a[0]===b[0])],q=t[i],e=b[i],p<=q&&q<=e||e<=q&&q<=p)}function Ja(){}var Qa=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function to(){var t=1,e=1,n=ut,r=h;function o(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(Xa);else{var r=T(t),o=r[0],l=r[1];e=at(o,l,e),e=St(Math.floor(o/e)*e,Math.floor(l/e)*e,e)}return e.map((function(e){return c(t,e)}))}function c(n,o){var c=[],h=[];return function(n,r,o){var c,h,f,d,_,y,m=new Array,v=new Array;c=h=-1,d=n[0]>=r,Qa[d<<1].forEach(x);for(;++c<t-1;)f=d,d=n[c+1]>=r,Qa[f|d<<1].forEach(x);Qa[d<<0].forEach(x);for(;++h<e-1;){for(c=-1,d=n[h*t+t]>=r,_=n[h*t]>=r,Qa[d<<1|_<<2].forEach(x);++c<t-1;)f=d,d=n[h*t+t+c+1]>=r,y=_,_=n[h*t+c+1]>=r,Qa[f|d<<1|_<<2|y<<3].forEach(x);Qa[d|_<<3].forEach(x)}c=-1,_=n[h*t]>=r,Qa[_<<2].forEach(x);for(;++c<t-1;)y=_,_=n[h*t+c+1]>=r,Qa[_<<2|y<<3].forEach(x);function x(line){var t,g,e=[line[0][0]+c,line[0][1]+h],n=[line[1][0]+c,line[1][1]+h],r=l(e),f=l(n);(t=v[r])?(g=m[f])?(delete v[t.end],delete m[g.start],t===g?(t.ring.push(n),o(t.ring)):m[t.start]=v[g.end]={start:t.start,end:g.end,ring:t.ring.concat(g.ring)}):(delete v[t.end],t.ring.push(n),v[t.end=f]=t):(t=m[f])?(g=v[r])?(delete m[t.start],delete v[g.end],t===g?(t.ring.push(n),o(t.ring)):m[g.start]=v[t.end]={start:g.start,end:t.end,ring:g.ring.concat(t.ring)}):(delete m[t.start],t.ring.unshift(e),m[t.start=r]=t):m[r]=v[f]={start:r,end:f,ring:[e,n]}}Qa[_<<3].forEach(x)}(n,o,(function(t){r(t,n,o),function(t){for(var i=0,e=t.length,area=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++i<e;)area+=t[i-1][1]*t[i][0]-t[i-1][0]*t[i][1];return area}(t)>0?c.push([t]):h.push(t)})),h.forEach((function(t){for(var polygon,i=0,e=c.length;i<e;++i)if(-1!==Wa((polygon=c[i])[0],t))return void polygon.push(t)})),{type:"MultiPolygon",value:o,coordinates:c}}function l(e){return 2*e[0]+e[1]*(t+1)*4}function h(n,r,o){n.forEach((function(n){var c,l=n[0],h=n[1],f=0|l,d=0|h,_=r[d*t+f];l>0&&l<t&&f===l&&(c=r[d*t+f-1],n[0]=l+(o-c)/(_-c)-.5),h>0&&h<e&&d===h&&(c=r[(d-1)*t+f],n[1]=h+(o-c)/(_-c)-.5)}))}return o.contour=c,o.size=function(n){if(!arguments.length)return[t,e];var r=Math.floor(n[0]),c=Math.floor(n[1]);if(!(r>=0&&c>=0))throw new Error("invalid size");return t=r,e=c,o},o.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?ja(Va.call(t)):ja(t),o):n},o.smooth=function(t){return arguments.length?(r=t?h:Ja,o):r===h},o}function eo(source,t,e){for(var n=source.width,r=source.height,o=1+(e<<1),c=0;c<r;++c)for(var i=0,l=0;i<n+e;++i)i<n&&(l+=source.data[i+c*n]),i>=e&&(i>=o&&(l-=source.data[i-o+c*n]),t.data[i-e+c*n]=l/Math.min(i+1,n-1+o-i,o))}function no(source,t,e){for(var n=source.width,r=source.height,o=1+(e<<1),i=0;i<n;++i)for(var c=0,l=0;c<r+e;++c)c<r&&(l+=source.data[i+c*n]),c>=e&&(c>=o&&(l-=source.data[i+(c-o)*n]),t.data[i+(c-e)*n]=l/Math.min(c+1,r-1+o-c,o))}function io(t){return t[0]}function ro(t){return t[1]}function so(){return 1}function ao(){var t=io,e=ro,n=so,r=960,o=500,c=20,l=2,h=3*c,f=r+2*h>>l,d=o+2*h>>l,_=ja(20);function y(data){var r=new Float32Array(f*d),o=new Float32Array(f*d);data.forEach((function(o,i,data){var c=+t(o,i,data)+h>>l,_=+e(o,i,data)+h>>l,y=+n(o,i,data);c>=0&&c<f&&_>=0&&_<d&&(r[c+_*f]+=y)})),eo({width:f,height:d,data:r},{width:f,height:d,data:o},c>>l),no({width:f,height:d,data:o},{width:f,height:d,data:r},c>>l),eo({width:f,height:d,data:r},{width:f,height:d,data:o},c>>l),no({width:f,height:d,data:o},{width:f,height:d,data:r},c>>l),eo({width:f,height:d,data:r},{width:f,height:d,data:o},c>>l),no({width:f,height:d,data:o},{width:f,height:d,data:r},c>>l);var y=_(r);if(!Array.isArray(y)){var v=lt(r);y=at(0,v,y),(y=St(0,Math.floor(v/y)*y,y)).shift()}return to().thresholds(y).size([f,d])(r).map(m)}function m(t){return t.value*=Math.pow(2,-2*l),t.coordinates.forEach(v),t}function v(t){t.forEach(x)}function x(t){t.forEach(w)}function w(t){t[0]=t[0]*Math.pow(2,l)-h,t[1]=t[1]*Math.pow(2,l)-h}function A(){return f=r+2*(h=3*c)>>l,d=o+2*h>>l,y}return y.x=function(e){return arguments.length?(t="function"==typeof e?e:ja(+e),y):t},y.y=function(t){return arguments.length?(e="function"==typeof t?t:ja(+t),y):e},y.weight=function(t){return arguments.length?(n="function"==typeof t?t:ja(+t),y):n},y.size=function(t){if(!arguments.length)return[r,o];var e=+t[0],n=+t[1];if(!(e>=0&&n>=0))throw new Error("invalid size");return r=e,o=n,A()},y.cellSize=function(t){if(!arguments.length)return 1<<l;if(!((t=+t)>=1))throw new Error("invalid cell size");return l=Math.floor(Math.log(t)/Math.LN2),A()},y.thresholds=function(t){return arguments.length?(_="function"==typeof t?t:Array.isArray(t)?ja(Va.call(t)):ja(t),y):_},y.bandwidth=function(t){if(!arguments.length)return Math.sqrt(c*(c+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return c=Math.round((Math.sqrt(4*t*t+1)-1)/2),A()},y}const oo=Math.pow(2,-52),uo=new Uint32Array(512);class co{static from(t,e=mo,n=bo){const r=t.length,o=new Float64Array(2*r);for(let i=0;i<r;i++){const p=t[i];o[2*i]=e(p),o[2*i+1]=n(p)}return new co(o)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:r,_hullHash:o}=this,c=t.length>>1;let l=1/0,h=1/0,f=-1/0,d=-1/0;for(let i=0;i<c;i++){const e=t[2*i],n=t[2*i+1];e<l&&(l=e),n<h&&(h=n),e>f&&(f=e),n>d&&(d=n),this._ids[i]=i}const _=(l+f)/2,y=(h+d)/2;let m,v,x,w=1/0;for(let i=0;i<c;i++){const e=lo(_,y,t[2*i],t[2*i+1]);e<w&&(m=i,w=e)}const A=t[2*m],M=t[2*m+1];w=1/0;for(let i=0;i<c;i++){if(i===m)continue;const e=lo(A,M,t[2*i],t[2*i+1]);e<w&&e>0&&(v=i,w=e)}let C=t[2*v],S=t[2*v+1],k=1/0;for(let i=0;i<c;i++){if(i===m||i===v)continue;const e=go(A,M,C,S,t[2*i],t[2*i+1]);e<k&&(x=i,k=e)}let T=t[2*x],E=t[2*x+1];if(k===1/0){for(let i=0;i<c;i++)this._dists[i]=t[2*i]-t[0]||t[2*i+1]-t[1];po(this._ids,this._dists,0,c-1);const e=new Uint32Array(c);let n=0;for(let i=0,t=-1/0;i<c;i++){const r=this._ids[i];this._dists[r]>t&&(e[n++]=r,t=this._dists[r])}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(fo(A,M,C,S,T,E)){const i=v,t=C,e=S;v=x,C=T,S=E,x=i,T=t,E=e}const R=function(t,e,n,r,o,c){const l=n-t,h=r-e,f=o-t,d=c-e,_=l*l+h*h,y=f*f+d*d,m=.5/(l*d-h*f);return{x:t+(d*_-h*y)*m,y:e+(l*y-f*_)*m}}(A,M,C,S,T,E);this._cx=R.x,this._cy=R.y;for(let i=0;i<c;i++)this._dists[i]=lo(t[2*i],t[2*i+1],R.x,R.y);po(this._ids,this._dists,0,c-1),this._hullStart=m;let D=3;n[m]=e[x]=v,n[v]=e[m]=x,n[x]=e[v]=m,r[m]=0,r[v]=1,r[x]=2,o.fill(-1),o[this._hashKey(A,M)]=m,o[this._hashKey(C,S)]=v,o[this._hashKey(T,E)]=x,this.trianglesLen=0,this._addTriangle(m,v,x,-1,-1,-1);for(let c,l,h=0;h<this._ids.length;h++){const i=this._ids[h],f=t[2*i],d=t[2*i+1];if(h>0&&Math.abs(f-c)<=oo&&Math.abs(d-l)<=oo)continue;if(c=f,l=d,i===m||i===v||i===x)continue;let _=0;for(let t=0,e=this._hashKey(f,d);t<this._hashSize&&(_=o[(e+t)%this._hashSize],-1===_||_===n[_]);t++);_=e[_];let q,y=_;for(;q=n[y],!fo(f,d,t[2*y],t[2*y+1],t[2*q],t[2*q+1]);)if(y=q,y===_){y=-1;break}if(-1===y)continue;let w=this._addTriangle(y,i,n[y],-1,-1,r[y]);r[i]=this._legalize(w+2),r[y]=w,D++;let A=n[y];for(;q=n[A],fo(f,d,t[2*A],t[2*A+1],t[2*q],t[2*q+1]);)w=this._addTriangle(A,i,q,r[i],-1,r[A]),r[i]=this._legalize(w+2),n[A]=A,D--,A=q;if(y===_)for(;q=e[y],fo(f,d,t[2*q],t[2*q+1],t[2*y],t[2*y+1]);)w=this._addTriangle(q,i,y,-1,r[y],r[q]),this._legalize(w+2),r[q]=w,n[y]=y,D--,y=q;this._hullStart=e[i]=y,n[y]=e[A]=i,n[i]=A,o[this._hashKey(f,d)]=i,o[this._hashKey(t[2*y],t[2*y+1])]=y}this.hull=new Uint32Array(D);for(let i=0,t=this._hullStart;i<D;i++)this.hull[i]=t,t=n[t];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const p=t/(Math.abs(t)+Math.abs(e));return(e>0?3-p:1+p)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(a){const{_triangles:t,_halfedges:e,coords:n}=this;let i=0,r=0;for(;;){const b=e[a],o=a-a%3;if(r=o+(a+2)%3,-1===b){if(0===i)break;a=uo[--i];continue}const c=b-b%3,l=o+(a+1)%3,h=c+(b+2)%3,f=t[r],d=t[a],_=t[l],y=t[h];if(_o(n[2*f],n[2*f+1],n[2*d],n[2*d+1],n[2*_],n[2*_+1],n[2*y],n[2*y+1])){t[a]=y,t[b]=f;const n=e[h];if(-1===n){let t=this._hullStart;do{if(this._hullTri[t]===h){this._hullTri[t]=a;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(a,n),this._link(b,e[r]),this._link(r,h);const br=c+(b+1)%3;i<uo.length&&(uo[i++]=br)}else{if(0===i)break;a=uo[--i]}}return r}_link(a,b){this._halfedges[a]=b,-1!==b&&(this._halfedges[b]=a)}_addTriangle(t,e,n,a,b,r){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=e,this._triangles[o+2]=n,this._link(o,a),this._link(o+1,b),this._link(o+2,r),this.trianglesLen+=3,o}}function lo(t,e,n,r){const o=t-n,c=e-r;return o*o+c*c}function ho(t,e,n,r,o,c){const l=(r-e)*(o-t),h=(n-t)*(c-e);return Math.abs(l-h)>=33306690738754716e-32*Math.abs(l+h)?l-h:0}function fo(t,e,n,r,o,c){return(ho(o,c,t,e,n,r)||ho(t,e,n,r,o,c)||ho(n,r,o,c,t,e))<0}function _o(t,e,n,r,o,c,l,h){const f=t-l,d=e-h,_=n-l,y=r-h,m=o-l,v=c-h,x=_*_+y*y,w=m*m+v*v;return f*(y*w-x*v)-d*(_*w-x*m)+(f*f+d*d)*(_*v-y*m)<0}function go(t,e,n,r,o,c){const l=n-t,h=r-e,f=o-t,d=c-e,_=l*l+h*h,y=f*f+d*d,m=.5/(l*d-h*f),v=(d*_-h*y)*m,x=(l*y-f*_)*m;return v*v+x*x}function po(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=t[i],o=e[r];let c=i-1;for(;c>=n&&e[t[c]]>o;)t[c+1]=t[c--];t[c+1]=r}else{let i=n+1,o=r;yo(t,n+r>>1,i),e[t[n]]>e[t[r]]&&yo(t,n,r),e[t[i]]>e[t[r]]&&yo(t,i,r),e[t[n]]>e[t[i]]&&yo(t,n,i);const c=t[i],l=e[c];for(;;){do{i++}while(e[t[i]]<l);do{o--}while(e[t[o]]>l);if(o<i)break;yo(t,i,o)}t[n+1]=t[o],t[o]=c,r-i+1>=o-n?(po(t,e,i,r),po(t,e,n,o-1)):(po(t,e,n,o-1),po(t,e,i,r))}}function yo(t,i,e){const n=t[i];t[i]=t[e],t[e]=n}function mo(p){return p[0]}function bo(p){return p[1]}const vo=1e-6;class xo{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){const r=(t=+t)+(n=+n),o=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${o}`:(Math.abs(this._x1-r)>vo||Math.abs(this._y1-o)>vo)&&(this._+="L"+r+","+o),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=r},${this._y1=o}`)}rect(t,e,n,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class wo{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class Ao{constructor(t,[e,n,r,o]=[0,0,960,500]){if(!((r=+r)>=(e=+e)&&(o=+o)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=e,this.ymax=o,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:r}=this,o=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let e,r,i=0,c=0,l=n.length;i<l;i+=3,c+=2){const l=2*n[i],h=2*n[i+1],f=2*n[i+2],d=t[l],_=t[l+1],y=t[h],m=t[h+1],v=t[f],x=t[f+1],w=y-d,A=m-_,M=v-d,C=x-_,S=w*w+A*A,k=M*M+C*C,T=2*(w*C-A*M);if(T)if(Math.abs(T)<1e-8)e=(d+v)/2,r=(_+x)/2;else{const t=1/T;e=d+(C*S-A*k)*t,r=_+(w*k-M*S)*t}else e=(d+v)/2-1e8*C,r=(_+x)/2+1e8*M;o[c]=e,o[c+1]=r}let c,l,h,f=e[e.length-1],d=4*f,_=t[2*f],y=t[2*f+1];r.fill(0);for(let i=0;i<e.length;++i)f=e[i],c=d,l=_,h=y,d=4*f,_=t[2*f],y=t[2*f+1],r[c+2]=r[d]=h-y,r[c+3]=r[d+1]=_-l}render(t){const e=null==t?t=new xo:void 0,{delaunay:{halfedges:n,inedges:r,hull:o},circumcenters:c,vectors:l}=this;if(o.length<=1)return null;for(let i=0,e=n.length;i<e;++i){const e=n[i];if(e<i)continue;const r=2*Math.floor(i/3),o=2*Math.floor(e/3),l=c[r],h=c[r+1],f=c[o],d=c[o+1];this._renderSegment(l,h,f,d,t)}let h,h1=o[o.length-1];for(let i=0;i<o.length;++i){h=h1,h1=o[i];const e=2*Math.floor(r[h1]/3),n=c[e],f=c[e+1],d=4*h,p=this._project(n,f,l[d+2],l[d+3]);p&&this._renderSegment(n,f,p[0],p[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new xo:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(i,t){const e=null==t?t=new xo:void 0,n=this._clip(i);if(null===n||!n.length)return;t.moveTo(n[0],n[1]);let r=n.length;for(;n[0]===n[r-2]&&n[1]===n[r-1]&&r>1;)r-=2;for(let i=2;i<r;i+=2)n[i]===n[i-2]&&n[i+1]===n[i-1]||t.lineTo(n[i],n[i+1]);return t.closePath(),e&&e.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let i=0,e=t.length/2;i<e;++i){const t=this.cellPolygon(i);t&&(t.index=i,yield t)}}cellPolygon(i){const polygon=new wo;return this.renderCell(i,polygon),polygon.value()}_renderSegment(t,e,n,r,o){let c;const l=this._regioncode(t,e),h=this._regioncode(n,r);0===l&&0===h?(o.moveTo(t,e),o.lineTo(n,r)):(c=this._clipSegment(t,e,n,r,l,h))&&(o.moveTo(c[0],c[1]),o.lineTo(c[2],c[3]))}contains(i,t,e){return(t=+t)==t&&(e=+e)==e&&this.delaunay._step(i,t,e)===i}*neighbors(i){const t=this._clip(i);if(t)for(const e of this.delaunay.neighbors(i)){const n=this._clip(e);if(n)t:for(let r=0,li=t.length;r<li;r+=2)for(let o=0,c=n.length;o<c;o+=2)if(t[r]==n[o]&&t[r+1]==n[o+1]&&t[(r+2)%li]==n[(o+c-2)%c]&&t[(r+3)%li]==n[(o+c-1)%c]){yield e;break t}}}_cell(i){const{circumcenters:t,delaunay:{inedges:e,halfedges:n,triangles:r}}=this,o=e[i];if(-1===o)return null;const c=[];let l=o;do{const e=Math.floor(l/3);if(c.push(t[2*e],t[2*e+1]),l=l%3==2?l-2:l+1,r[l]!==i)break;l=n[l]}while(l!==o&&-1!==l);return c}_clip(i){if(0===i&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(i);if(null===t)return null;const{vectors:e}=this,n=4*i;return e[n]||e[n+1]?this._clipInfinite(i,t,e[n],e[n+1],e[n+2],e[n+3]):this._clipFinite(i,t)}_clipFinite(i,t){const e=t.length;let n,r,o,c,l,h=null,f=t[e-2],d=t[e-1],_=this._regioncode(f,d);for(let y=0;y<e;y+=2)if(n=f,r=d,f=t[y],d=t[y+1],o=_,_=this._regioncode(f,d),0===o&&0===_)c=l,l=0,h?h.push(f,d):h=[f,d];else{let t,e,y,m,v;if(0===o){if(null===(t=this._clipSegment(n,r,f,d,o,_)))continue;[e,y,m,v]=t}else{if(null===(t=this._clipSegment(f,d,n,r,_,o)))continue;[m,v,e,y]=t,c=l,l=this._edgecode(e,y),c&&l&&this._edge(i,c,l,h,h.length),h?h.push(e,y):h=[e,y]}c=l,l=this._edgecode(m,v),c&&l&&this._edge(i,c,l,h,h.length),h?h.push(m,v):h=[m,v]}if(h)c=l,l=this._edgecode(h[0],h[1]),c&&l&&this._edge(i,c,l,h,h.length);else if(this.contains(i,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return h}_clipSegment(t,e,n,r,o,c){for(;;){if(0===o&&0===c)return[t,e,n,r];if(o&c)return null;let l,h,f=o||c;8&f?(l=t+(n-t)*(this.ymax-e)/(r-e),h=this.ymax):4&f?(l=t+(n-t)*(this.ymin-e)/(r-e),h=this.ymin):2&f?(h=e+(r-e)*(this.xmax-t)/(n-t),l=this.xmax):(h=e+(r-e)*(this.xmin-t)/(n-t),l=this.xmin),o?(t=l,e=h,o=this._regioncode(t,e)):(n=l,r=h,c=this._regioncode(n,r))}}_clipInfinite(i,t,e,n,r,o){let p,c=Array.from(t);if((p=this._project(c[0],c[1],e,n))&&c.unshift(p[0],p[1]),(p=this._project(c[c.length-2],c[c.length-1],r,o))&&c.push(p[0],p[1]),c=this._clipFinite(i,c))for(let t,e=0,n=c.length,r=this._edgecode(c[n-2],c[n-1]);e<n;e+=2)t=r,r=this._edgecode(c[e],c[e+1]),t&&r&&(e=this._edge(i,t,r,c,e),n=c.length);else this.contains(i,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(c=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return c}_edge(i,t,e,n,r){for(;t!==e;){let e,o;switch(t){case 5:t=4;continue;case 4:t=6,e=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,e=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,e=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,e=this.xmin,o=this.ymin}n[r]===e&&n[r+1]===o||!this.contains(i,e,o)||(n.splice(r,0,e,o),r+=2)}if(n.length>4)for(let i=0;i<n.length;i+=2){const t=(i+2)%n.length,e=(i+4)%n.length;(n[i]===n[t]&&n[t]===n[e]||n[i+1]===n[t+1]&&n[t+1]===n[e+1])&&(n.splice(t,2),i-=2)}return r}_project(t,e,n,r){let o,c,l,h=1/0;if(r<0){if(e<=this.ymin)return null;(o=(this.ymin-e)/r)<h&&(l=this.ymin,c=t+(h=o)*n)}else if(r>0){if(e>=this.ymax)return null;(o=(this.ymax-e)/r)<h&&(l=this.ymax,c=t+(h=o)*n)}if(n>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/n)<h&&(c=this.xmax,l=e+(h=o)*r)}else if(n<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/n)<h&&(c=this.xmin,l=e+(h=o)*r)}return[c,l]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}const Mo=2*Math.PI,Co=Math.pow;function So(p){return p[0]}function ko(p){return p[1]}function To(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class Eo{static from(t,e=So,n=ko,r){return new Eo("length"in t?function(t,e,n,r){const o=t.length,c=new Float64Array(2*o);for(let i=0;i<o;++i){const p=t[i];c[2*i]=e.call(r,p,i,t),c[2*i+1]=n.call(r,p,i,t)}return c}(t,e,n,r):Float64Array.from(function*(t,e,n,r){let i=0;for(const p of t)yield e.call(r,p,i,t),yield n.call(r,p,i,t),++i}(t,e,n,r)))}constructor(t){this._delaunator=new co(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:e,coords:n}=t;for(let i=0;i<e.length;i+=3){const a=2*e[i],b=2*e[i+1],t=2*e[i+2];if((n[t]-n[a])*(n[b+1]-n[a+1])-(n[b]-n[a])*(n[t+1]-n[a+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},((t,i)=>i)).sort(((i,t)=>e[2*i]-e[2*t]||e[2*i+1]-e[2*t+1]));const t=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[e[2*t],e[2*t+1],e[2*n],e[2*n+1]],o=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let i=0,t=e.length/2;i<t;++i){const p=To(e[2*i],e[2*i+1],o);e[2*i]=p[0],e[2*i+1]=p[1]}this._delaunator=new co(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,c=this.inedges.fill(-1),l=this._hullIndex.fill(-1);for(let t=0,e=n.length;t<e;++t){const p=o[t%3==2?t-2:t+1];-1!==n[t]&&-1!==c[p]||(c[p]=t)}for(let i=0,t=r.length;i<t;++i)l[r[i]]=i;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],c[r[0]]=1,2===r.length&&(c[r[1]]=0))}voronoi(t){return new Ao(this,t)}*neighbors(i){const{inedges:t,hull:e,_hullIndex:n,halfedges:r,triangles:o,collinear:c}=this;if(c){const t=c.indexOf(i);return t>0&&(yield c[t-1]),void(t<c.length-1&&(yield c[t+1]))}const l=t[i];if(-1===l)return;let h=l,f=-1;do{if(yield f=o[h],h=h%3==2?h-2:h+1,o[h]!==i)return;if(h=r[h],-1===h){const p=e[(n[i]+1)%e.length];return void(p!==f&&(yield p))}}while(h!==l)}find(t,e,i=0){if((t=+t)!=t||(e=+e)!=e)return-1;const n=i;let r;for(;(r=this._step(i,t,e))>=0&&r!==i&&r!==n;)i=r;return r}_step(i,t,e){const{inedges:n,hull:r,_hullIndex:o,halfedges:c,triangles:l,points:h}=this;if(-1===n[i]||!h.length)return(i+1)%(h.length>>1);let f=i,d=Co(t-h[2*i],2)+Co(e-h[2*i+1],2);const _=n[i];let y=_;do{let n=l[y];const dt=Co(t-h[2*n],2)+Co(e-h[2*n+1],2);if(dt<d&&(d=dt,f=n),y=y%3==2?y-2:y+1,l[y]!==i)break;if(y=c[y],-1===y){if(y=r[(o[i]+1)%r.length],y!==n&&Co(t-h[2*y],2)+Co(e-h[2*y+1],2)<d)return y;break}}while(y!==_);return f}render(t){const e=null==t?t=new xo:void 0,{points:n,halfedges:r,triangles:o}=this;for(let i=0,e=r.length;i<e;++i){const e=r[i];if(e<i)continue;const c=2*o[i],l=2*o[e];t.moveTo(n[c],n[c+1]),t.lineTo(n[l],n[l+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e=2){const n=null==t?t=new xo:void 0,{points:r}=this;for(let i=0,n=r.length;i<n;i+=2){const n=r[i],o=r[i+1];t.moveTo(n+e,o),t.arc(n,o,e,0,Mo)}return n&&n.value()}renderHull(t){const e=null==t?t=new xo:void 0,{hull:n,points:r}=this,o=2*n[0],c=n.length;t.moveTo(r[o],r[o+1]);for(let i=1;i<c;++i){const e=2*n[i];t.lineTo(r[e],r[e+1])}return t.closePath(),e&&e.value()}hullPolygon(){const polygon=new wo;return this.renderHull(polygon),polygon.value()}renderTriangle(i,t){const e=null==t?t=new xo:void 0,{points:n,triangles:r}=this,o=2*r[i*=3],c=2*r[i+1],l=2*r[i+2];return t.moveTo(n[o],n[o+1]),t.lineTo(n[c],n[c+1]),t.lineTo(n[l],n[l+1]),t.closePath(),e&&e.value()}*trianglePolygons(){const{triangles:t}=this;for(let i=0,e=t.length/3;i<e;++i)yield this.trianglePolygon(i)}trianglePolygon(i){const polygon=new wo;return this.renderTriangle(i,polygon),polygon.value()}}var Ro=t=>()=>t;function Do(t,{sourceEvent:e,subject:n,target:r,identifier:o,active:c,x:l,y:h,dx:f,dy:d,dispatch:_}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:h,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:_}})}function Lo(t){return!t.ctrlKey&&!t.button}function No(){return this.parentNode}function Po(t,e){return null==e?{x:t.x,y:t.y}:e}function Oo(){return navigator.maxTouchPoints||"ontouchstart"in this}function zo(){var t,e,n,r,filter=Lo,o=No,c=Po,l=Oo,h={},f=ge("start","drag","end"),d=0,_=0;function y(t){t.on("mousedown.drag",m).filter(l).on("touchstart.drag",w).on("touchmove.drag",A).on("touchend.drag touchcancel.drag",M).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(c,l){if(!r&&filter.call(this,c,l)){var h=C(this,o.call(this,c,l),c,l,"mouse");h&&(Dn(c.view).on("mousemove.drag",v,!0).on("mouseup.drag",x,!0),Pn(c.view),Ln(c),n=!1,t=c.clientX,e=c.clientY,h("start",c))}}function v(r){if(Nn(r),!n){var o=r.clientX-t,c=r.clientY-e;n=o*o+c*c>_}h.mouse("drag",r)}function x(t){Dn(t.view).on("mousemove.drag mouseup.drag",null),On(t.view,n),Nn(t),h.mouse("end",t)}function w(t,e){if(filter.call(this,t,e)){var i,n,r=t.changedTouches,c=o.call(this,t,e),l=r.length;for(i=0;i<l;++i)(n=C(this,c,t,e,r[i].identifier,r[i]))&&(Ln(t),n("start",t,r[i]))}}function A(t){var i,e,n=t.changedTouches,r=n.length;for(i=0;i<r;++i)(e=h[n[i].identifier])&&(Nn(t),e("drag",t,n[i]))}function M(t){var i,e,n=t.changedTouches,o=n.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),i=0;i<o;++i)(e=h[n[i].identifier])&&(Ln(t),e("end",t,n[i]))}function C(t,e,n,r,o,l){var _,m,s,v=f.copy(),p=Fi(l||n,e);if(null!=(s=c.call(t,new Do("beforestart",{sourceEvent:n,target:y,identifier:o,active:d,x:p[0],y:p[1],dx:0,dy:0,dispatch:v}),r)))return _=s.x-p[0]||0,m=s.y-p[1]||0,function n(c,l,f){var x,w=p;switch(c){case"start":h[o]=n,x=d++;break;case"end":delete h[o],--d;case"drag":p=Fi(f||l,e),x=d}v.call(c,t,new Do(c,{sourceEvent:l,subject:s,target:y,identifier:o,active:x,x:p[0]+_,y:p[1]+m,dx:p[0]-w[0],dy:p[1]-w[1],dispatch:v}),r)}}return y.filter=function(t){return arguments.length?(filter="function"==typeof t?t:Ro(!!t),y):filter},y.container=function(t){return arguments.length?(o="function"==typeof t?t:Ro(t),y):o},y.subject=function(t){return arguments.length?(c="function"==typeof t?t:Ro(t),y):c},y.touchable=function(t){return arguments.length?(l="function"==typeof t?t:Ro(!!t),y):l},y.on=function(){var t=f.on.apply(f,arguments);return t===f?y:t},y.clickDistance=function(t){return arguments.length?(_=(t=+t)*t,y):Math.sqrt(_)},y}Do.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Bo={},Fo={};function Ho(t){return new Function("d","return {"+t.map((function(t,i){return JSON.stringify(t)+": d["+i+'] || ""'})).join(",")+"}")}function $o(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function Yo(t,e){var s=t+"",n=s.length;return n<e?new Array(e-n+1).join(0)+s:s}function Io(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+Yo(-t,6):t>9999?"+"+Yo(t,6):Yo(t,4)}(t.getUTCFullYear())+"-"+Yo(t.getUTCMonth()+1,2)+"-"+Yo(t.getUTCDate(),2)+(o?"T"+Yo(e,2)+":"+Yo(n,2)+":"+Yo(r,2)+"."+Yo(o,3)+"Z":r?"T"+Yo(e,2)+":"+Yo(n,2)+":"+Yo(r,2)+"Z":n||e?"T"+Yo(e,2)+":"+Yo(n,2)+"Z":"")}function Go(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(text,t){var e,r=[],o=text.length,c=0,l=0,h=o<=0,f=!1;function d(){if(h)return Fo;if(f)return f=!1,Bo;var i,t,e=c;if(34===text.charCodeAt(e)){for(;c++<o&&34!==text.charCodeAt(c)||34===text.charCodeAt(++c););return(i=c)>=o?h=!0:10===(t=text.charCodeAt(c++))?f=!0:13===t&&(f=!0,10===text.charCodeAt(c)&&++c),text.slice(e+1,i-1).replace(/""/g,'"')}for(;c<o;){if(10===(t=text.charCodeAt(i=c++)))f=!0;else if(13===t)f=!0,10===text.charCodeAt(c)&&++c;else if(t!==n)continue;return text.slice(e,i)}return h=!0,text.slice(e,o)}for(10===text.charCodeAt(o-1)&&--o,13===text.charCodeAt(o-1)&&--o;(e=d())!==Fo;){for(var _=[];e!==Bo&&e!==Fo;)_.push(e),e=d();t&&null==(_=t(_,l++))||r.push(_)}return r}function o(e,n){return e.map((function(e){return n.map((function(t){return l(e[t])})).join(t)}))}function c(e){return e.map(l).join(t)}function l(t){return null==t?"":t instanceof Date?Io(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(text,t){var e,n,o=r(text,(function(r,i){if(e)return e(r,i-1);n=r,e=t?function(t,e){var object=Ho(t);return function(n,i){return e(object(n),i,t)}}(r,t):Ho(r)}));return o.columns=n||[],o},parseRows:r,format:function(e,n){return null==n&&(n=$o(e)),[n.map(l).join(t)].concat(o(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=$o(t)),o(t,e).join("\n")},formatRows:function(t){return t.map(c).join("\n")},formatRow:c,formatValue:l}}var Uo=Go(","),qo=Uo.parse,Vo=Uo.parseRows,Xo=Uo.format,jo=Uo.formatBody,Wo=Uo.formatRows,Zo=Uo.formatRow,Ko=Uo.formatValue,Jo=Go("\t"),Qo=Jo.parse,tu=Jo.parseRows,eu=Jo.format,nu=Jo.formatBody,iu=Jo.formatRows,ru=Jo.formatRow,su=Jo.formatValue;function au(object){for(var t in object){var e,n,r=object[t].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(e=+r)){if(!(n=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;ou&&n[4]&&!n[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r)}else r=e;else r=null;object[t]=r}return object}const ou=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),uu=t=>+t;function cu(t){return t*t}function lu(t){return t*(2-t)}function hu(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}var fu=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),du=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),_u=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),gu=Math.PI,pu=gu/2;function yu(t){return 1==+t?1:1-Math.cos(t*pu)}function mu(t){return Math.sin(t*pu)}function bu(t){return(1-Math.cos(gu*t))/2}function vu(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function xu(t){return vu(1-+t)}function wu(t){return 1-vu(t)}function Au(t){return((t*=2)<=1?vu(1-t):2-vu(t-1))/2}function Mu(t){return 1-Math.sqrt(1-t*t)}function Cu(t){return Math.sqrt(1- --t*t)}function Su(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var ku=4/11,Tu=7.5625;function Eu(t){return 1-Ru(1-t)}function Ru(t){return(t=+t)<ku?Tu*t*t:t<.7272727272727273?Tu*(t-=.5454545454545454)*t+.75:t<.9090909090909091?Tu*(t-=.8181818181818182)*t+.9375:Tu*(t-=.9545454545454546)*t+.984375}function Du(t){return((t*=2)<=1?1-Ru(1-t):Ru(t-1)+1)/2}var Lu=1.70158,Nu=function t(s){function e(t){return(t=+t)*t*(s*(t-1)+t)}return s=+s,e.overshoot=t,e}(Lu),Pu=function t(s){function e(t){return--t*t*((t+1)*s+t)+1}return s=+s,e.overshoot=t,e}(Lu),Ou=function t(s){function e(t){return((t*=2)<1?t*t*((s+1)*t-s):(t-=2)*t*((s+1)*t+s)+2)/2}return s=+s,e.overshoot=t,e}(Lu),zu=2*Math.PI,Bu=function t(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=zu);function e(t){return a*vu(- --t)*Math.sin((s-t)/p)}return e.amplitude=function(a){return t(a,p*zu)},e.period=function(p){return t(a,p)},e}(1,.3),Fu=function t(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=zu);function e(t){return 1-a*vu(t=+t)*Math.sin((t+s)/p)}return e.amplitude=function(a){return t(a,p*zu)},e.period=function(p){return t(a,p)},e}(1,.3),Hu=function t(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=zu);function e(t){return((t=2*t-1)<0?a*vu(-t)*Math.sin((s-t)/p):2-a*vu(t)*Math.sin((s+t)/p))/2}return e.amplitude=function(a){return t(a,p*zu)},e.period=function(p){return t(a,p)},e}(1,.3);function $u(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function Yu(input,t){return fetch(input,t).then($u)}function Iu(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function Gu(input,t){return fetch(input,t).then(Iu)}function Uu(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function qu(input,t){return fetch(input,t).then(Uu)}function Vu(t){return function(input,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=void 0),qu(input,e).then((function(e){return t(e,n)}))}}function Xu(t,input,e,n){3===arguments.length&&"function"==typeof e&&(n=e,e=void 0);var r=Go(t);return qu(input,e).then((function(t){return r.parse(t,n)}))}var ju=Vu(qo),Wu=Vu(Qo);function Zu(input,t){return new Promise((function(e,n){var image=new Image;for(var r in t)image[r]=t[r];image.onerror=n,image.onload=function(){e(image)},image.src=input}))}function Ku(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function Ju(input,t){return fetch(input,t).then(Ku)}function Qu(t){return(input,e)=>qu(input,e).then((text=>(new DOMParser).parseFromString(text,t)))}var tc=Qu("application/xml"),ec=Qu("text/html"),svg=Qu("image/svg+xml");function nc(t,e){var n,r=1;function o(){var i,o,c=n.length,l=0,h=0;for(i=0;i<c;++i)l+=(o=n[i]).x,h+=o.y;for(l=(l/c-t)*r,h=(h/c-e)*r,i=0;i<c;++i)(o=n[i]).x-=l,o.y-=h}return null==t&&(t=0),null==e&&(e=0),o.initialize=function(t){n=t},o.x=function(e){return arguments.length?(t=+e,o):t},o.y=function(t){return arguments.length?(e=+t,o):e},o.strength=function(t){return arguments.length?(r=+t,o):r},o}function ic(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var o,c,l,h,f,d,_,i,y,m=t._root,v={data:r},x=t._x0,w=t._y0,A=t._x1,M=t._y1;if(!m)return t._root=v,t;for(;m.length;)if((d=e>=(c=(x+A)/2))?x=c:A=c,(_=n>=(l=(w+M)/2))?w=l:M=l,o=m,!(m=m[i=_<<1|d]))return o[i]=v,t;if(h=+t._x.call(null,m.data),f=+t._y.call(null,m.data),e===h&&n===f)return v.next=m,o?o[i]=v:t._root=v,t;do{o=o?o[i]=new Array(4):t._root=new Array(4),(d=e>=(c=(x+A)/2))?x=c:A=c,(_=n>=(l=(w+M)/2))?w=l:M=l}while((i=_<<1|d)==(y=(f>=l)<<1|h>=c));return o[y]=m,o[i]=v,t}function rc(t,e,n,r,o){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=o}function sc(t){return t[0]}function ac(t){return t[1]}function oc(t,e,n){var r=new uc(null==e?sc:e,null==n?ac:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function uc(t,e,n,r,o,c){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=o,this._y1=c,this._root=void 0}function cc(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var lc=oc.prototype=uc.prototype;function hc(t){return function(){return t}}function fc(t){return 1e-6*(t()-.5)}function dc(t){return t.x+t.vx}function _c(t){return t.y+t.vy}function gc(t){var e,n,r,o=1,c=1;function l(){for(var i,t,l,f,d,_,y,m=e.length,v=0;v<c;++v)for(t=oc(e,dc,_c).visitAfter(h),i=0;i<m;++i)l=e[i],_=n[l.index],y=_*_,f=l.x+l.vx,d=l.y+l.vy,t.visit(x);function x(t,e,n,c,h){var data=t.data,m=t.r,v=_+m;if(!data)return e>f+v||c<f-v||n>d+v||h<d-v;if(data.index>l.index){var x=f-data.x-data.vx,w=d-data.y-data.vy,A=x*x+w*w;A<v*v&&(0===x&&(A+=(x=fc(r))*x),0===w&&(A+=(w=fc(r))*w),A=(v-(A=Math.sqrt(A)))/A*o,l.vx+=(x*=A)*(v=(m*=m)/(y+m)),l.vy+=(w*=A)*v,data.vx-=x*(v=1-v),data.vy-=w*v)}}}function h(t){if(t.data)return t.r=n[t.data.index];for(var i=t.r=0;i<4;++i)t[i]&&t[i].r>t.r&&(t.r=t[i].r)}function f(){if(e){var i,r,o=e.length;for(n=new Array(o),i=0;i<o;++i)r=e[i],n[r.index]=+t(r,i,e)}}return"function"!=typeof t&&(t=hc(null==t?1:+t)),l.initialize=function(t,n){e=t,r=n,f()},l.iterations=function(t){return arguments.length?(c=+t,l):c},l.strength=function(t){return arguments.length?(o=+t,l):o},l.radius=function(e){return arguments.length?(t="function"==typeof e?e:hc(+e),f(),l):t},l}function pc(t){return t.index}function yc(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function mc(t){var e,n,r,o,c,l,h=pc,f=function(link){return 1/Math.min(o[link.source.index],o[link.target.index])},d=hc(30),_=1;function y(r){for(var o=0,h=t.length;o<_;++o)for(var link,source,f,d,y,m,b,i=0;i<h;++i)source=(link=t[i]).source,d=(f=link.target).x+f.vx-source.x-source.vx||fc(l),y=f.y+f.vy-source.y-source.vy||fc(l),d*=m=((m=Math.sqrt(d*d+y*y))-n[i])/m*r*e[i],y*=m,f.vx-=d*(b=c[i]),f.vy-=y*b,source.vx+=d*(b=1-b),source.vy+=y*b}function m(){if(r){var i,link,l=r.length,f=t.length,d=new Map(r.map(((t,i)=>[h(t,i,r),t])));for(i=0,o=new Array(l);i<f;++i)(link=t[i]).index=i,"object"!=typeof link.source&&(link.source=yc(d,link.source)),"object"!=typeof link.target&&(link.target=yc(d,link.target)),o[link.source.index]=(o[link.source.index]||0)+1,o[link.target.index]=(o[link.target.index]||0)+1;for(i=0,c=new Array(f);i<f;++i)link=t[i],c[i]=o[link.source.index]/(o[link.source.index]+o[link.target.index]);e=new Array(f),v(),n=new Array(f),x()}}function v(){if(r)for(var i=0,n=t.length;i<n;++i)e[i]=+f(t[i],i,t)}function x(){if(r)for(var i=0,e=t.length;i<e;++i)n[i]=+d(t[i],i,t)}return null==t&&(t=[]),y.initialize=function(t,e){r=t,l=e,m()},y.links=function(e){return arguments.length?(t=e,m(),y):t},y.id=function(t){return arguments.length?(h=t,y):h},y.iterations=function(t){return arguments.length?(_=+t,y):_},y.strength=function(t){return arguments.length?(f="function"==typeof t?t:hc(+t),v(),y):f},y.distance=function(t){return arguments.length?(d="function"==typeof t?t:hc(+t),x(),y):d},y}lc.copy=function(){var t,e,n=new uc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=cc(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=cc(e));return n},lc.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return ic(this.cover(e,n),e,n,t)},lc.addAll=function(data){var t,i,e,n,r=data.length,o=new Array(r),c=new Array(r),l=1/0,h=1/0,f=-1/0,d=-1/0;for(i=0;i<r;++i)isNaN(e=+this._x.call(null,t=data[i]))||isNaN(n=+this._y.call(null,t))||(o[i]=e,c[i]=n,e<l&&(l=e),e>f&&(f=e),n<h&&(h=n),n>d&&(d=n));if(l>f||h>d)return this;for(this.cover(l,h).cover(f,d),i=0;i<r;++i)ic(this,o[i],c[i],data[i]);return this},lc.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,o=this._x1,c=this._y1;if(isNaN(n))o=(n=Math.floor(t))+1,c=(r=Math.floor(e))+1;else{for(var l,i,h=o-n||1,f=this._root;n>t||t>=o||r>e||e>=c;)switch(i=(e<r)<<1|t<n,(l=new Array(4))[i]=f,f=l,h*=2,i){case 0:o=n+h,c=r+h;break;case 1:n=o-h,c=r+h;break;case 2:o=n+h,r=c-h;break;case 3:n=o-h,r=c-h}this._root&&this._root.length&&(this._root=f)}return this._x0=n,this._y0=r,this._x1=o,this._y1=c,this},lc.data=function(){var data=[];return this.visit((function(t){if(!t.length)do{data.push(t.data)}while(t=t.next)})),data},lc.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},lc.find=function(t,e,n){var data,r,o,c,l,q,i,h=this._x0,f=this._y0,d=this._x1,_=this._y1,y=[],m=this._root;for(m&&y.push(new rc(m,h,f,d,_)),null==n?n=1/0:(h=t-n,f=e-n,d=t+n,_=e+n,n*=n);q=y.pop();)if(!(!(m=q.node)||(r=q.x0)>d||(o=q.y0)>_||(c=q.x1)<h||(l=q.y1)<f))if(m.length){var v=(r+c)/2,x=(o+l)/2;y.push(new rc(m[3],v,x,c,l),new rc(m[2],r,x,v,l),new rc(m[1],v,o,c,x),new rc(m[0],r,o,v,x)),(i=(e>=x)<<1|t>=v)&&(q=y[y.length-1],y[y.length-1]=y[y.length-1-i],y[y.length-1-i]=q)}else{var w=t-+this._x.call(null,m.data),A=e-+this._y.call(null,m.data),M=w*w+A*A;if(M<n){var C=Math.sqrt(n=M);h=t-C,f=e-C,d=t+C,_=e+C,data=m.data}}return data},lc.remove=function(t){if(isNaN(c=+this._x.call(null,t))||isNaN(l=+this._y.call(null,t)))return this;var e,n,r,o,c,l,h,f,d,_,i,y,m=this._root,v=this._x0,x=this._y0,w=this._x1,A=this._y1;if(!m)return this;if(m.length)for(;;){if((d=c>=(h=(v+w)/2))?v=h:w=h,(_=l>=(f=(x+A)/2))?x=f:A=f,e=m,!(m=m[i=_<<1|d]))return this;if(!m.length)break;(e[i+1&3]||e[i+2&3]||e[i+3&3])&&(n=e,y=i)}for(;m.data!==t;)if(r=m,!(m=m.next))return this;return(o=m.next)&&delete m.next,r?(o?r.next=o:delete r.next,this):e?(o?e[i]=o:delete e[i],(m=e[0]||e[1]||e[2]||e[3])&&m===(e[3]||e[2]||e[1]||e[0])&&!m.length&&(n?n[y]=m:this._root=m),this):(this._root=o,this)},lc.removeAll=function(data){for(var i=0,t=data.length;i<t;++i)this.remove(data[i]);return this},lc.root=function(){return this._root},lc.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},lc.visit=function(t){var q,e,n,r,o,c,l=[],h=this._root;for(h&&l.push(new rc(h,this._x0,this._y0,this._x1,this._y1));q=l.pop();)if(!t(h=q.node,n=q.x0,r=q.y0,o=q.x1,c=q.y1)&&h.length){var f=(n+o)/2,d=(r+c)/2;(e=h[3])&&l.push(new rc(e,f,d,o,c)),(e=h[2])&&l.push(new rc(e,n,d,f,c)),(e=h[1])&&l.push(new rc(e,f,r,o,d)),(e=h[0])&&l.push(new rc(e,n,r,f,d))}return this},lc.visitAfter=function(t){var q,e=[],n=[];for(this._root&&e.push(new rc(this._root,this._x0,this._y0,this._x1,this._y1));q=e.pop();){var r=q.node;if(r.length){var o,c=q.x0,l=q.y0,h=q.x1,f=q.y1,d=(c+h)/2,_=(l+f)/2;(o=r[0])&&e.push(new rc(o,c,l,d,_)),(o=r[1])&&e.push(new rc(o,d,l,h,_)),(o=r[2])&&e.push(new rc(o,c,_,d,f)),(o=r[3])&&e.push(new rc(o,d,_,h,f))}n.push(q)}for(;q=n.pop();)t(q.node,q.x0,q.y0,q.x1,q.y1);return this},lc.x=function(t){return arguments.length?(this._x=t,this):this._x},lc.y=function(t){return arguments.length?(this._y=t,this):this._y};const bc=4294967296;function vc(t){return t.x}function xc(t){return t.y}var wc=Math.PI*(3-Math.sqrt(5));function Ac(t){var e,n=1,r=.001,o=1-Math.pow(r,1/300),c=0,l=.6,h=new Map,f=Ji(y),d=ge("tick","end"),_=function(){let s=1;return()=>(s=(1664525*s+1013904223)%bc)/bc}();function y(){m(),d.call("tick",e),n<r&&(f.stop(),d.call("end",e))}function m(r){var i,f,d=t.length;void 0===r&&(r=1);for(var _=0;_<r;++_)for(n+=(c-n)*o,h.forEach((function(t){t(n)})),i=0;i<d;++i)null==(f=t[i]).fx?f.x+=f.vx*=l:(f.x=f.fx,f.vx=0),null==f.fy?f.y+=f.vy*=l:(f.y=f.fy,f.vy=0);return e}function v(){for(var e,i=0,n=t.length;i<n;++i){if((e=t[i]).index=i,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var r=10*Math.sqrt(.5+i),o=i*wc;e.x=r*Math.cos(o),e.y=r*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function x(e){return e.initialize&&e.initialize(t,_),e}return null==t&&(t=[]),v(),e={tick:m,restart:function(){return f.restart(y),e},stop:function(){return f.stop(),e},nodes:function(n){return arguments.length?(t=n,v(),h.forEach(x),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(o=+t,e):+o},alphaTarget:function(t){return arguments.length?(c=+t,e):c},velocityDecay:function(t){return arguments.length?(l=1-t,e):1-l},randomSource:function(t){return arguments.length?(_=t,h.forEach(x),e):_},force:function(t,n){return arguments.length>1?(null==n?h.delete(t):h.set(t,x(n)),e):h.get(t)},find:function(e,n,r){var o,c,l,h,f,i=0,d=t.length;for(null==r?r=1/0:r*=r,i=0;i<d;++i)(l=(o=e-(h=t[i]).x)*o+(c=n-h.y)*c)<r&&(f=h,r=l);return f},on:function(t,n){return arguments.length>1?(d.on(t,n),e):d.on(t)}}}function Mc(){var t,e,n,r,o,c=hc(-30),l=1,h=1/0,f=.81;function d(n){var i,o=t.length,c=oc(t,vc,xc).visitAfter(y);for(r=n,i=0;i<o;++i)e=t[i],c.visit(m)}function _(){if(t){var i,e,n=t.length;for(o=new Array(n),i=0;i<n;++i)e=t[i],o[e.index]=+c(e,i,t)}}function y(t){var q,e,n,r,i,c=0,l=0;if(t.length){for(n=r=i=0;i<4;++i)(q=t[i])&&(e=Math.abs(q.value))&&(c+=q.value,l+=e,n+=e*q.x,r+=e*q.y);t.x=n/l,t.y=r/l}else{(q=t).x=q.data.x,q.y=q.data.y;do{c+=o[q.data.index]}while(q=q.next)}t.value=c}function m(t,c,d,_){if(!t.value)return!0;var y=t.x-e.x,m=t.y-e.y,v=_-c,x=y*y+m*m;if(v*v/f<x)return x<h&&(0===y&&(x+=(y=fc(n))*y),0===m&&(x+=(m=fc(n))*m),x<l&&(x=Math.sqrt(l*x)),e.vx+=y*t.value*r/x,e.vy+=m*t.value*r/x),!0;if(!(t.length||x>=h)){(t.data!==e||t.next)&&(0===y&&(x+=(y=fc(n))*y),0===m&&(x+=(m=fc(n))*m),x<l&&(x=Math.sqrt(l*x)));do{t.data!==e&&(v=o[t.data.index]*r/x,e.vx+=y*v,e.vy+=m*v)}while(t=t.next)}}return d.initialize=function(e,r){t=e,n=r,_()},d.strength=function(t){return arguments.length?(c="function"==typeof t?t:hc(+t),_(),d):c},d.distanceMin=function(t){return arguments.length?(l=t*t,d):Math.sqrt(l)},d.distanceMax=function(t){return arguments.length?(h=t*t,d):Math.sqrt(h)},d.theta=function(t){return arguments.length?(f=t*t,d):Math.sqrt(f)},d}function Cc(t,e,n){var r,o,c,l=hc(.1);function h(t){for(var i=0,l=r.length;i<l;++i){var h=r[i],f=h.x-e||1e-6,d=h.y-n||1e-6,_=Math.sqrt(f*f+d*d),y=(c[i]-_)*o[i]*t/_;h.vx+=f*y,h.vy+=d*y}}function f(){if(r){var i,e=r.length;for(o=new Array(e),c=new Array(e),i=0;i<e;++i)c[i]=+t(r[i],i,r),o[i]=isNaN(c[i])?0:+l(r[i],i,r)}}return"function"!=typeof t&&(t=hc(+t)),null==e&&(e=0),null==n&&(n=0),h.initialize=function(t){r=t,f()},h.strength=function(t){return arguments.length?(l="function"==typeof t?t:hc(+t),f(),h):l},h.radius=function(e){return arguments.length?(t="function"==typeof e?e:hc(+e),f(),h):t},h.x=function(t){return arguments.length?(e=+t,h):e},h.y=function(t){return arguments.length?(n=+t,h):n},h}function Sc(t){var e,n,r,o=hc(.1);function c(t){for(var o,i=0,c=e.length;i<c;++i)(o=e[i]).vx+=(r[i]-o.x)*n[i]*t}function l(){if(e){var i,c=e.length;for(n=new Array(c),r=new Array(c),i=0;i<c;++i)n[i]=isNaN(r[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=hc(null==t?0:+t)),c.initialize=function(t){e=t,l()},c.strength=function(t){return arguments.length?(o="function"==typeof t?t:hc(+t),l(),c):o},c.x=function(e){return arguments.length?(t="function"==typeof e?e:hc(+e),l(),c):t},c}function kc(t){var e,n,r,o=hc(.1);function c(t){for(var o,i=0,c=e.length;i<c;++i)(o=e[i]).vy+=(r[i]-o.y)*n[i]*t}function l(){if(e){var i,c=e.length;for(n=new Array(c),r=new Array(c),i=0;i<c;++i)n[i]=isNaN(r[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=hc(null==t?0:+t)),c.initialize=function(t){e=t,l()},c.strength=function(t){return arguments.length?(o="function"==typeof t?t:hc(+t),l(),c):o},c.y=function(e){return arguments.length?(t="function"==typeof e?e:hc(+e),l(),c):t},c}function Tc(t,p){if((i=(t=p?t.toExponential(p-1):t.toExponential()).indexOf("e"))<0)return null;var i,e=t.slice(0,i);return[e.length>1?e[0]+e.slice(2):e,+t.slice(i+1)]}function Ec(t){return(t=Tc(Math.abs(t)))?t[1]:NaN}var Rc,Dc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Lc(t){if(!(e=Dc.exec(t)))throw new Error("invalid format: "+t);var e;return new Nc({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Nc(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Pc(t,p){var e=Tc(t,p);if(!e)return t+"";var n=e[0],r=e[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}Lc.prototype=Nc.prototype,Nc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Oc={"%":(t,p)=>(100*t).toFixed(p),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,p)=>t.toExponential(p),f:(t,p)=>t.toFixed(p),g:(t,p)=>t.toPrecision(p),o:t=>Math.round(t).toString(8),p:(t,p)=>Pc(100*t,p),r:Pc,s:function(t,p){var e=Tc(t,p);if(!e)return t+"";var n=e[0],r=e[1],i=r-(Rc=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Tc(t,Math.max(0,p+i-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function zc(t){return t}var Bc,Fc,Hc,$c=Array.prototype.map,Yc=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ic(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?zc:(e=$c.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],c=0,g=e[0],l=0;i>0&&g>0&&(l+g+1>r&&(g=Math.max(1,r-l)),o.push(t.substring(i-=g,i+g)),!((l+=g+1)>r));)g=e[c=(c+1)%e.length];return o.reverse().join(n)}),o=void 0===t.currency?"":t.currency[0]+"",c=void 0===t.currency?"":t.currency[1]+"",l=void 0===t.decimal?".":t.decimal+"",h=void 0===t.numerals?zc:function(t){return function(e){return e.replace(/[0-9]/g,(function(i){return t[+i]}))}}($c.call(t.numerals,String)),f=void 0===t.percent?"%":t.percent+"",d=void 0===t.minus?"":t.minus+"",_=void 0===t.nan?"NaN":t.nan+"";function y(t){var e=(t=Lc(t)).fill,n=t.align,y=t.sign,symbol=t.symbol,m=t.zero,v=t.width,x=t.comma,w=t.precision,A=t.trim,M=t.type;"n"===M?(x=!0,M="g"):Oc[M]||(void 0===w&&(w=12),A=!0,M="g"),(m||"0"===e&&"="===n)&&(m=!0,e="0",n="=");var C="$"===symbol?o:"#"===symbol&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",S="$"===symbol?c:/[%p]/.test(M)?f:"",k=Oc[M],T=/[defgprs%]/.test(M);function E(t){var i,o,c,f=C,E=S;if("c"===M)E=k(t)+E,t="";else{var R=(t=+t)<0||1/t<0;if(t=isNaN(t)?_:k(Math.abs(t),w),A&&(t=function(s){t:for(var t,e=s.length,i=1,n=-1;i<e;++i)switch(s[i]){case".":n=t=i;break;case"0":0===n&&(n=i),t=i;break;default:if(!+s[i])break t;n>0&&(n=0)}return n>0?s.slice(0,n)+s.slice(t+1):s}(t)),R&&0==+t&&"+"!==y&&(R=!1),f=(R?"("===y?y:d:"-"===y||"("===y?"":y)+f,E=("s"===M?Yc[8+Rc/3]:"")+E+(R&&"("===y?")":""),T)for(i=-1,o=t.length;++i<o;)if(48>(c=t.charCodeAt(i))||c>57){E=(46===c?l+t.slice(i+1):t.slice(i))+E,t=t.slice(0,i);break}}x&&!m&&(t=r(t,1/0));var D=f.length+t.length+E.length,L=D<v?new Array(v-D+1).join(e):"";switch(x&&m&&(t=r(L+t,L.length?v-E.length:1/0),L=""),n){case"<":t=f+t+E+L;break;case"=":t=f+L+t+E;break;case"^":t=L.slice(0,D=L.length>>1)+f+t+E+L.slice(D);break;default:t=L+f+t+E}return h(t)}return w=void 0===w?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w)),E.toString=function(){return t+""},E}return{format:y,formatPrefix:function(t,e){var n=y(((t=Lc(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Ec(e)/3))),o=Math.pow(10,-r),c=Yc[8+r/3];return function(t){return n(o*t)+c}}}}function Gc(t){return Bc=Ic(t),Fc=Bc.format,Hc=Bc.formatPrefix,Bc}function Uc(t){return Math.max(0,-Ec(Math.abs(t)))}function qc(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ec(e)/3)))-Ec(Math.abs(t)))}function Vc(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ec(e)-Ec(t))+1}Gc({thousands:",",grouping:[3],currency:["$",""]});var Xc=1e-6,jc=1e-12,Wc=Math.PI,Zc=Wc/2,Kc=Wc/4,Jc=2*Wc,Qc=180/Wc,tl=Wc/180,el=Math.abs,nl=Math.atan,il=Math.atan2,rl=Math.cos,sl=Math.ceil,al=Math.exp,cl=(Math.floor,Math.hypot),ll=Math.log,hl=Math.pow,fl=Math.sin,_l=Math.sign||function(t){return t>0?1:t<0?-1:0},gl=Math.sqrt,pl=Math.tan;function yl(t){return t>1?0:t<-1?Wc:Math.acos(t)}function ml(t){return t>1?Zc:t<-1?-Zc:Math.asin(t)}function bl(t){return(t=fl(t/2))*t}function vl(){}function xl(t,e){t&&Al.hasOwnProperty(t.type)&&Al[t.type](t,e)}var wl={Feature:function(object,t){xl(object.geometry,t)},FeatureCollection:function(object,t){for(var e=object.features,i=-1,n=e.length;++i<n;)xl(e[i].geometry,t)}},Al={Sphere:function(object,t){t.sphere()},Point:function(object,t){object=object.coordinates,t.point(object[0],object[1],object[2])},MultiPoint:function(object,t){for(var e=object.coordinates,i=-1,n=e.length;++i<n;)object=e[i],t.point(object[0],object[1],object[2])},LineString:function(object,t){Ml(object.coordinates,t,0)},MultiLineString:function(object,t){for(var e=object.coordinates,i=-1,n=e.length;++i<n;)Ml(e[i],t,0)},Polygon:function(object,t){Cl(object.coordinates,t)},MultiPolygon:function(object,t){for(var e=object.coordinates,i=-1,n=e.length;++i<n;)Cl(e[i],t)},GeometryCollection:function(object,t){for(var e=object.geometries,i=-1,n=e.length;++i<n;)xl(e[i],t)}};function Ml(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Cl(t,e){var i=-1,n=t.length;for(e.polygonStart();++i<n;)Ml(t[i],e,1);e.polygonEnd()}function Sl(object,t){object&&wl.hasOwnProperty(object.type)?wl[object.type](object,t):xl(object,t)}var kl,Tl,El,Rl,Dl,Ll,Nl,Pl,Ol,zl,Bl,Fl,Hl,$l,Yl,Il,Gl=new E,Ul=new E,ql={point:vl,lineStart:vl,lineEnd:vl,polygonStart:function(){Gl=new E,ql.lineStart=Vl,ql.lineEnd=Xl},polygonEnd:function(){var t=+Gl;Ul.add(t<0?Jc+t:t),this.lineStart=this.lineEnd=this.point=vl},sphere:function(){Ul.add(Jc)}};function Vl(){ql.point=jl}function Xl(){Wl(kl,Tl)}function jl(t,e){ql.point=Wl,kl=t,Tl=e,El=t*=tl,Rl=rl(e=(e*=tl)/2+Kc),Dl=fl(e)}function Wl(t,e){var n=(t*=tl)-El,r=n>=0?1:-1,o=r*n,c=rl(e=(e*=tl)/2+Kc),l=fl(e),h=Dl*l,u=Rl*c+h*rl(o),f=h*r*fl(o);Gl.add(il(f,u)),El=t,Rl=c,Dl=l}function Zl(object){return Ul=new E,Sl(object,ql),2*Ul}function Kl(t){return[il(t[1],t[0]),ml(t[2])]}function Jl(t){var e=t[0],n=t[1],r=rl(n);return[r*rl(e),r*fl(e),fl(n)]}function Ql(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function eh(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function nh(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function ih(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function rh(t){var e=gl(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var sh,ah,oh,uh,ch,lh,hh,fh,dh,_h,gh,ph,yh,mh,bh,vh,xh={point:wh,lineStart:Mh,lineEnd:Ch,polygonStart:function(){xh.point=Sh,xh.lineStart=kh,xh.lineEnd=Th,$l=new E,ql.polygonStart()},polygonEnd:function(){ql.polygonEnd(),xh.point=wh,xh.lineStart=Mh,xh.lineEnd=Ch,Gl<0?(Ll=-(Pl=180),Nl=-(Ol=90)):$l>Xc?Ol=90:$l<-1e-6&&(Nl=-90),Il[0]=Ll,Il[1]=Pl},sphere:function(){Ll=-(Pl=180),Nl=-(Ol=90)}};function wh(t,e){Yl.push(Il=[Ll=t,Pl=t]),e<Nl&&(Nl=e),e>Ol&&(Ol=e)}function Ah(t,e){var p=Jl([t*tl,e*tl]);if(Hl){var n=eh(Hl,p),r=eh([n[1],-n[0],0],n);rh(r),r=Kl(r);var o,c=t-zl,l=c>0?1:-1,h=r[0]*Qc*l,f=el(c)>180;f^(l*zl<h&&h<l*t)?(o=r[1]*Qc)>Ol&&(Ol=o):f^(l*zl<(h=(h+360)%360-180)&&h<l*t)?(o=-r[1]*Qc)<Nl&&(Nl=o):(e<Nl&&(Nl=e),e>Ol&&(Ol=e)),f?t<zl?Eh(Ll,t)>Eh(Ll,Pl)&&(Pl=t):Eh(t,Pl)>Eh(Ll,Pl)&&(Ll=t):Pl>=Ll?(t<Ll&&(Ll=t),t>Pl&&(Pl=t)):t>zl?Eh(Ll,t)>Eh(Ll,Pl)&&(Pl=t):Eh(t,Pl)>Eh(Ll,Pl)&&(Ll=t)}else Yl.push(Il=[Ll=t,Pl=t]);e<Nl&&(Nl=e),e>Ol&&(Ol=e),Hl=p,zl=t}function Mh(){xh.point=Ah}function Ch(){Il[0]=Ll,Il[1]=Pl,xh.point=wh,Hl=null}function Sh(t,e){if(Hl){var n=t-zl;$l.add(el(n)>180?n+(n>0?360:-360):n)}else Bl=t,Fl=e;ql.point(t,e),Ah(t,e)}function kh(){ql.lineStart()}function Th(){Sh(Bl,Fl),ql.lineEnd(),el($l)>Xc&&(Ll=-(Pl=180)),Il[0]=Ll,Il[1]=Pl,Hl=null}function Eh(t,e){return(e-=t)<0?e+360:e}function Rh(a,b){return a[0]-b[0]}function Dh(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Lh(t){var i,e,a,b,n,r,o;if(Ol=Pl=-(Ll=Nl=1/0),Yl=[],Sl(t,xh),e=Yl.length){for(Yl.sort(Rh),i=1,n=[a=Yl[0]];i<e;++i)Dh(a,(b=Yl[i])[0])||Dh(a,b[1])?(Eh(a[0],b[1])>Eh(a[0],a[1])&&(a[1]=b[1]),Eh(b[0],a[1])>Eh(a[0],a[1])&&(a[0]=b[0])):n.push(a=b);for(r=-1/0,i=0,a=n[e=n.length-1];i<=e;a=b,++i)b=n[i],(o=Eh(a[1],b[0]))>r&&(r=o,Ll=b[0],Pl=a[1])}return Yl=Il=null,Ll===1/0||Nl===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ll,Nl],[Pl,Ol]]}var Nh={sphere:vl,point:Ph,lineStart:zh,lineEnd:Hh,polygonStart:function(){Nh.lineStart=$h,Nh.lineEnd=Yh},polygonEnd:function(){Nh.lineStart=zh,Nh.lineEnd=Hh}};function Ph(t,e){t*=tl;var n=rl(e*=tl);Oh(n*rl(t),n*fl(t),fl(e))}function Oh(t,e,n){++sh,oh+=(t-oh)/sh,uh+=(e-uh)/sh,ch+=(n-ch)/sh}function zh(){Nh.point=Bh}function Bh(t,e){t*=tl;var n=rl(e*=tl);mh=n*rl(t),bh=n*fl(t),vh=fl(e),Nh.point=Fh,Oh(mh,bh,vh)}function Fh(t,e){t*=tl;var n=rl(e*=tl),r=n*rl(t),o=n*fl(t),c=fl(e),l=il(gl((l=bh*c-vh*o)*l+(l=vh*r-mh*c)*l+(l=mh*o-bh*r)*l),mh*r+bh*o+vh*c);ah+=l,lh+=l*(mh+(mh=r)),hh+=l*(bh+(bh=o)),fh+=l*(vh+(vh=c)),Oh(mh,bh,vh)}function Hh(){Nh.point=Ph}function $h(){Nh.point=Ih}function Yh(){Gh(ph,yh),Nh.point=Ph}function Ih(t,e){ph=t,yh=e,t*=tl,e*=tl,Nh.point=Gh;var n=rl(e);mh=n*rl(t),bh=n*fl(t),vh=fl(e),Oh(mh,bh,vh)}function Gh(t,e){t*=tl;var n=rl(e*=tl),r=n*rl(t),o=n*fl(t),c=fl(e),l=bh*c-vh*o,h=vh*r-mh*c,f=mh*o-bh*r,d=cl(l,h,f),_=ml(d),y=d&&-_/d;dh.add(y*l),_h.add(y*h),gh.add(y*f),ah+=_,lh+=_*(mh+(mh=r)),hh+=_*(bh+(bh=o)),fh+=_*(vh+(vh=c)),Oh(mh,bh,vh)}function Uh(object){sh=ah=oh=uh=ch=lh=hh=fh=0,dh=new E,_h=new E,gh=new E,Sl(object,Nh);var t=+dh,e=+_h,n=+gh,r=cl(t,e,n);return r<jc&&(t=lh,e=hh,n=fh,ah<Xc&&(t=oh,e=uh,n=ch),(r=cl(t,e,n))<jc)?[NaN,NaN]:[il(e,t)*Qc,ml(n/r)*Qc]}function qh(t){return function(){return t}}function Vh(a,b){function t(t,e){return t=a(t,e),b(t[0],t[1])}return a.invert&&b.invert&&(t.invert=function(t,e){return(t=b.invert(t,e))&&a.invert(t[0],t[1])}),t}function Xh(t,e){return[el(t)>Wc?t+Math.round(-t/Jc)*Jc:t,e]}function jh(t,e,n){return(t%=Jc)?e||n?Vh(Zh(t),Kh(e,n)):Zh(t):e||n?Kh(e,n):Xh}function Wh(t){return function(e,n){return[(e+=t)>Wc?e-Jc:e<-Wc?e+Jc:e,n]}}function Zh(t){var e=Wh(t);return e.invert=Wh(-t),e}function Kh(t,e){var n=rl(t),r=fl(t),o=rl(e),c=fl(e);function l(t,e){var l=rl(e),h=rl(t)*l,f=fl(t)*l,d=fl(e),_=d*n+h*r;return[il(f*o-_*c,h*n-d*r),ml(_*o+f*c)]}return l.invert=function(t,e){var l=rl(e),h=rl(t)*l,f=fl(t)*l,d=fl(e),_=d*o-f*c;return[il(f*o+d*c,h*n+_*r),ml(_*n-h*r)]},l}function Jh(t){function e(e){return(e=t(e[0]*tl,e[1]*tl))[0]*=Qc,e[1]*=Qc,e}return t=jh(t[0]*tl,t[1]*tl,t.length>2?t[2]*tl:0),e.invert=function(e){return(e=t.invert(e[0]*tl,e[1]*tl))[0]*=Qc,e[1]*=Qc,e},e}function Qh(t,e,n,r,o,c){if(n){var l=rl(e),h=fl(e),f=r*n;null==o?(o=e+r*Jc,c=e-f/2):(o=tf(l,o),c=tf(l,c),(r>0?o<c:o>c)&&(o+=r*Jc));for(var d,_=o;r>0?_>c:_<c;_-=f)d=Kl([l,-h*rl(_),-h*fl(_)]),t.point(d[0],d[1])}}function tf(t,e){(e=Jl(e))[0]-=t,rh(e);var n=yl(-e[1]);return((-e[2]<0?-n:n)+Jc-Xc)%Jc}function circle(){var t,e,n=qh([0,0]),r=qh(90),o=qh(6),c={point:function(n,r){t.push(n=e(n,r)),n[0]*=Qc,n[1]*=Qc}};function circle(){var l=n.apply(this,arguments),h=r.apply(this,arguments)*tl,p=o.apply(this,arguments)*tl;return t=[],e=jh(-l[0]*tl,-l[1]*tl,0).invert,Qh(c,h,p,1),l={type:"Polygon",coordinates:[t]},t=e=null,l}return circle.center=function(t){return arguments.length?(n="function"==typeof t?t:qh([+t[0],+t[1]]),circle):n},circle.radius=function(t){return arguments.length?(r="function"==typeof t?t:qh(+t),circle):r},circle.precision=function(t){return arguments.length?(o="function"==typeof t?t:qh(+t),circle):o},circle}function ef(){var line,t=[];return{point:function(t,e,n){line.push([t,e,n])},lineStart:function(){t.push(line=[])},lineEnd:vl,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],line=null,e}}}function nf(a,b){return el(a[0]-b[0])<Xc&&el(a[1]-b[1])<Xc}function rf(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function sf(t,e,n,r,o){var i,c,l=[],h=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],c=t[e];if(nf(r,c)){if(!r[2]&&!c[2]){for(o.lineStart(),i=0;i<e;++i)o.point((r=t[i])[0],r[1]);return void o.lineEnd()}c[0]+=2e-6}l.push(n=new rf(r,t,null,!0)),h.push(n.o=new rf(r,null,n,!1)),l.push(n=new rf(c,t,null,!1)),h.push(n.o=new rf(c,null,n,!0))}})),l.length){for(h.sort(e),af(l),af(h),i=0,c=h.length;i<c;++i)h[i].e=n=!n;for(var f,d,_=l[0];;){for(var y=_,m=!0;y.v;)if((y=y.n)===_)return;f=y.z,o.lineStart();do{if(y.v=y.o.v=!0,y.e){if(m)for(i=0,c=f.length;i<c;++i)o.point((d=f[i])[0],d[1]);else r(y.x,y.n.x,1,o);y=y.n}else{if(m)for(f=y.p.z,i=f.length-1;i>=0;--i)o.point((d=f[i])[0],d[1]);else r(y.x,y.p.x,-1,o);y=y.p}f=(y=y.o).z,m=!m}while(!y.v);o.lineEnd()}}}function af(t){if(e=t.length){for(var e,b,i=0,a=t[0];++i<e;)a.n=b=t[i],b.p=a,a=b;a.n=b=t[0],b.p=a}}function of(t){return el(t[0])<=Wc?t[0]:_l(t[0])*((el(t[0])+Wc)%Jc-Wc)}function uf(polygon,t){var e=of(t),n=t[1],r=fl(n),o=[fl(e),-rl(e),0],c=0,l=0,h=new E;1===r?n=Zc+Xc:-1===r&&(n=-Zc-Xc);for(var i=0,f=polygon.length;i<f;++i)if(_=(d=polygon[i]).length)for(var d,_,y=d[_-1],m=of(y),v=y[1]/2+Kc,x=fl(v),w=rl(v),A=0;A<_;++A,m=C,x=k,w=T,y=M){var M=d[A],C=of(M),S=M[1]/2+Kc,k=fl(S),T=rl(S),R=C-m,D=R>=0?1:-1,L=D*R,N=L>Wc,P=x*k;if(h.add(il(P*D*fl(L),w*T+P*rl(L))),c+=N?R+D*Jc:R,N^m>=e^C>=e){var O=eh(Jl(y),Jl(M));rh(O);var z=eh(o,O);rh(z);var B=(N^R>=0?-1:1)*ml(z[2]);(n>B||n===B&&(O[0]||O[1]))&&(l+=N^R>=0?1:-1)}}return(c<-1e-6||c<Xc&&h<-1e-12)^1&l}function cf(t,e,n,r){return function(o){var polygon,c,l,line=e(o),h=ef(),f=e(h),d=!1,_={point:y,lineStart:v,lineEnd:x,polygonStart:function(){_.point=w,_.lineStart=A,_.lineEnd=M,c=[],polygon=[]},polygonEnd:function(){_.point=y,_.lineStart=v,_.lineEnd=x,c=wt(c);var t=uf(polygon,r);c.length?(d||(o.polygonStart(),d=!0),sf(c,hf,t,n,o)):t&&(d||(o.polygonStart(),d=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),d&&(o.polygonEnd(),d=!1),c=polygon=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function y(e,n){t(e,n)&&o.point(e,n)}function m(t,e){line.point(t,e)}function v(){_.point=m,line.lineStart()}function x(){_.point=y,line.lineEnd()}function w(t,e){l.push([t,e]),f.point(t,e)}function A(){f.lineStart(),l=[]}function M(){w(l[0][0],l[0][1]),f.lineEnd();var i,t,e,n,r=f.clean(),_=h.result(),y=_.length;if(l.pop(),polygon.push(l),l=null,y)if(1&r){if((t=(e=_[0]).length-1)>0){for(d||(o.polygonStart(),d=!0),o.lineStart(),i=0;i<t;++i)o.point((n=e[i])[0],n[1]);o.lineEnd()}}else y>1&&2&r&&_.push(_.pop().concat(_.shift())),c.push(_.filter(lf))}return _}}function lf(t){return t.length>1}function hf(a,b){return((a=a.x)[0]<0?a[1]-Zc-Xc:Zc-a[1])-((b=b.x)[0]<0?b[1]-Zc-Xc:Zc-b[1])}Xh.invert=Xh;var ff=cf((function(){return!0}),(function(t){var e,n=NaN,r=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(c,l){var h=c>0?Wc:-Wc,f=el(c-n);el(f-Wc)<Xc?(t.point(n,r=(r+l)/2>0?Zc:-Zc),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(h,r),t.point(c,r),e=0):o!==h&&f>=Wc&&(el(n-o)<Xc&&(n-=o*Xc),el(c-h)<Xc&&(c-=h*Xc),r=function(t,e,n,r){var o,c,l=fl(t-n);return el(l)>Xc?nl((fl(e)*(c=rl(r))*fl(n)-fl(r)*(o=rl(e))*fl(t))/(o*c*l)):(e+r)/2}(n,r,c,l),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(h,r),e=0),t.point(n=c,r=l),o=h},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var o;if(null==t)o=n*Zc,r.point(-Wc,o),r.point(0,o),r.point(Wc,o),r.point(Wc,0),r.point(Wc,-o),r.point(0,-o),r.point(-Wc,-o),r.point(-Wc,0),r.point(-Wc,o);else if(el(t[0]-e[0])>Xc){var c=t[0]<e[0]?Wc:-Wc;o=n*c/2,r.point(-c,o),r.point(0,o),r.point(c,o)}else r.point(e[0],e[1])}),[-Wc,-Zc]);function df(t){var e=rl(t),n=6*tl,r=e>0,o=el(e)>Xc;function c(t,n){return rl(t)*rl(n)>e}function l(a,b,t){var n=[1,0,0],r=eh(Jl(a),Jl(b)),o=Ql(r,r),c=r[0],l=o-c*c;if(!l)return!t&&a;var h=e*o/l,f=-e*c/l,d=eh(n,r),_=ih(n,h);nh(_,ih(r,f));var u=d,y=Ql(_,u),m=Ql(u,u),v=y*y-m*(Ql(_,_)-1);if(!(v<0)){var x=gl(v),q=ih(u,(-y-x)/m);if(nh(q,_),q=Kl(q),!t)return q;var w,A=a[0],M=b[0],C=a[1],S=b[1];M<A&&(w=A,A=M,M=w);var k=M-A,T=el(k-Wc)<Xc;if(!T&&S<C&&(w=C,C=S,S=w),T||k<Xc?T?C+S>0^q[1]<(el(q[0]-A)<Xc?C:S):C<=q[1]&&q[1]<=S:k>Wc^(A<=q[0]&&q[0]<=M)){var E=ih(u,(-y+x)/m);return nh(E,_),[q,Kl(E)]}}}function code(e,n){var o=r?t:Wc-t,code=0;return e<-o?code|=1:e>o&&(code|=2),n<-o?code|=4:n>o&&(code|=8),code}return cf(c,(function(t){var e,n,h,f,d;return{lineStart:function(){f=h=!1,d=1},point:function(_,y){var m,v=[_,y],x=c(_,y),w=r?x?0:code(_,y):x?code(_+(_<0?Wc:-Wc),y):0;if(!e&&(f=h=x)&&t.lineStart(),x!==h&&(!(m=l(e,v))||nf(e,m)||nf(v,m))&&(v[2]=1),x!==h)d=0,x?(t.lineStart(),m=l(v,e),t.point(m[0],m[1])):(m=l(e,v),t.point(m[0],m[1],2),t.lineEnd()),e=m;else if(o&&e&&r^x){var A;w&n||!(A=l(v,e,!0))||(d=0,r?(t.lineStart(),t.point(A[0][0],A[0][1]),t.point(A[1][0],A[1][1]),t.lineEnd()):(t.point(A[1][0],A[1][1]),t.lineEnd(),t.lineStart(),t.point(A[0][0],A[0][1],3)))}!x||e&&nf(e,v)||t.point(v[0],v[1]),e=v,h=x,n=w},lineEnd:function(){h&&t.lineEnd(),e=null},clean:function(){return d|(f&&h)<<1}}}),(function(e,r,o,c){Qh(c,t,n,o,e,r)}),r?[0,-t]:[-Wc,t-Wc])}var _f,gf,pf,yf,mf=1e9,bf=-mf;function vf(t,e,n,r){function o(o,c){return t<=o&&o<=n&&e<=c&&c<=r}function c(o,c,h,d){var a=0,_=0;if(null==o||(a=l(o,h))!==(_=l(c,h))||f(o,c)<0^h>0)do{d.point(0===a||3===a?t:n,a>1?r:e)}while((a=(a+h+4)%4)!==_);else d.point(c[0],c[1])}function l(p,r){return el(p[0]-t)<Xc?r>0?0:3:el(p[0]-n)<Xc?r>0?2:1:el(p[1]-e)<Xc?r>0?1:0:r>0?3:2}function h(a,b){return f(a.x,b.x)}function f(a,b){var t=l(a,1),e=l(b,1);return t!==e?t-e:0===t?b[1]-a[1]:1===t?a[0]-b[0]:2===t?a[1]-b[1]:b[0]-a[0]}return function(l){var f,polygon,d,_,y,m,v,x,w,A,M,C=l,S=ef(),k={point:T,lineStart:function(){k.point=E,polygon&&polygon.push(d=[]);A=!0,w=!1,v=x=NaN},lineEnd:function(){f&&(E(_,y),m&&w&&S.rejoin(),f.push(S.result()));k.point=T,w&&C.lineEnd()},polygonStart:function(){C=S,f=[],polygon=[],M=!0},polygonEnd:function(){var e=function(){for(var e=0,i=0,n=polygon.length;i<n;++i)for(var o,c,l=polygon[i],h=1,f=l.length,d=l[0],_=d[0],y=d[1];h<f;++h)o=_,c=y,_=(d=l[h])[0],y=d[1],c<=r?y>r&&(_-o)*(r-c)>(y-c)*(t-o)&&++e:y<=r&&(_-o)*(r-c)<(y-c)*(t-o)&&--e;return e}(),n=M&&e,o=(f=wt(f)).length;(n||o)&&(l.polygonStart(),n&&(l.lineStart(),c(null,null,1,l),l.lineEnd()),o&&sf(f,h,e,c,l),l.polygonEnd());C=l,f=polygon=d=null}};function T(t,e){o(t,e)&&C.point(t,e)}function E(c,l){var h=o(c,l);if(polygon&&d.push([c,l]),A)_=c,y=l,m=h,A=!1,h&&(C.lineStart(),C.point(c,l));else if(h&&w)C.point(c,l);else{var a=[v=Math.max(bf,Math.min(mf,v)),x=Math.max(bf,Math.min(mf,x))],b=[c=Math.max(bf,Math.min(mf,c)),l=Math.max(bf,Math.min(mf,l))];!function(a,b,t,e,n,r){var o,c=a[0],l=a[1],h=0,f=1,d=b[0]-c,_=b[1]-l;if(o=t-c,d||!(o>0)){if(o/=d,d<0){if(o<h)return;o<f&&(f=o)}else if(d>0){if(o>f)return;o>h&&(h=o)}if(o=n-c,d||!(o<0)){if(o/=d,d<0){if(o>f)return;o>h&&(h=o)}else if(d>0){if(o<h)return;o<f&&(f=o)}if(o=e-l,_||!(o>0)){if(o/=_,_<0){if(o<h)return;o<f&&(f=o)}else if(_>0){if(o>f)return;o>h&&(h=o)}if(o=r-l,_||!(o<0)){if(o/=_,_<0){if(o>f)return;o>h&&(h=o)}else if(_>0){if(o<h)return;o<f&&(f=o)}return h>0&&(a[0]=c+h*d,a[1]=l+h*_),f<1&&(b[0]=c+f*d,b[1]=l+f*_),!0}}}}}(a,b,t,e,n,r)?h&&(C.lineStart(),C.point(c,l),M=!1):(w||(C.lineStart(),C.point(a[0],a[1])),C.point(b[0],b[1]),h||C.lineEnd(),M=!1)}v=c,x=l,w=h}return k}}function xf(){var t,e,n,r=0,o=0,c=960,l=500;return n={stream:function(n){return t&&e===n?t:t=vf(r,o,c,l)(e=n)},extent:function(h){return arguments.length?(r=+h[0][0],o=+h[0][1],c=+h[1][0],l=+h[1][1],t=e=null,n):[[r,o],[c,l]]}}}var wf={sphere:vl,point:vl,lineStart:function(){wf.point=Mf,wf.lineEnd=Af},lineEnd:vl,polygonStart:vl,polygonEnd:vl};function Af(){wf.point=wf.lineEnd=vl}function Mf(t,e){gf=t*=tl,pf=fl(e*=tl),yf=rl(e),wf.point=Cf}function Cf(t,e){t*=tl;var n=fl(e*=tl),r=rl(e),o=el(t-gf),c=rl(o),l=r*fl(o),h=yf*n-pf*r*c,f=pf*n+yf*r*c;_f.add(il(gl(l*l+h*h),f)),gf=t,pf=n,yf=r}function Sf(object){return _f=new E,Sl(object,wf),+_f}var kf=[null,null],Tf={type:"LineString",coordinates:kf};function Ef(a,b){return kf[0]=a,kf[1]=b,Sf(Tf)}var Rf={Feature:function(object,t){return Lf(object.geometry,t)},FeatureCollection:function(object,t){for(var e=object.features,i=-1,n=e.length;++i<n;)if(Lf(e[i].geometry,t))return!0;return!1}},Df={Sphere:function(){return!0},Point:function(object,t){return Nf(object.coordinates,t)},MultiPoint:function(object,t){for(var e=object.coordinates,i=-1,n=e.length;++i<n;)if(Nf(e[i],t))return!0;return!1},LineString:function(object,t){return Pf(object.coordinates,t)},MultiLineString:function(object,t){for(var e=object.coordinates,i=-1,n=e.length;++i<n;)if(Pf(e[i],t))return!0;return!1},Polygon:function(object,t){return Of(object.coordinates,t)},MultiPolygon:function(object,t){for(var e=object.coordinates,i=-1,n=e.length;++i<n;)if(Of(e[i],t))return!0;return!1},GeometryCollection:function(object,t){for(var e=object.geometries,i=-1,n=e.length;++i<n;)if(Lf(e[i],t))return!0;return!1}};function Lf(t,e){return!(!t||!Df.hasOwnProperty(t.type))&&Df[t.type](t,e)}function Nf(t,e){return 0===Ef(t,e)}function Pf(t,e){for(var n,r,o,i=0,c=t.length;i<c;i++){if(0===(r=Ef(t[i],e)))return!0;if(i>0&&(o=Ef(t[i],t[i-1]))>0&&n<=o&&r<=o&&(n+r-o)*(1-Math.pow((n-r)/o,2))<jc*o)return!0;n=r}return!1}function Of(t,e){return!!uf(t.map(zf),Bf(e))}function zf(t){return(t=t.map(Bf)).pop(),t}function Bf(t){return[t[0]*tl,t[1]*tl]}function Ff(object,t){return(object&&Rf.hasOwnProperty(object.type)?Rf[object.type]:Lf)(object,t)}function Hf(t,e,n){var r=St(t,e-Xc,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function $f(t,e,n){var r=St(t,e-Xc,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function Yf(){var t,e,n,r,o,c,l,h,f,d,_,y,m=10,v=m,x=90,w=360,A=2.5;function M(){return{type:"MultiLineString",coordinates:C()}}function C(){return St(sl(r/x)*x,n,x).map(_).concat(St(sl(h/w)*w,l,w).map(y)).concat(St(sl(e/m)*m,t,m).filter((function(t){return el(t%x)>Xc})).map(f)).concat(St(sl(c/v)*v,o,v).filter((function(t){return el(t%w)>Xc})).map(d))}return M.lines=function(){return C().map((function(t){return{type:"LineString",coordinates:t}}))},M.outline=function(){return{type:"Polygon",coordinates:[_(r).concat(y(l).slice(1),_(n).reverse().slice(1),y(h).reverse().slice(1))]}},M.extent=function(t){return arguments.length?M.extentMajor(t).extentMinor(t):M.extentMinor()},M.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],h=+t[0][1],l=+t[1][1],r>n&&(t=r,r=n,n=t),h>l&&(t=h,h=l,l=t),M.precision(A)):[[r,h],[n,l]]},M.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],c=+n[0][1],o=+n[1][1],e>t&&(n=e,e=t,t=n),c>o&&(n=c,c=o,o=n),M.precision(A)):[[e,c],[t,o]]},M.step=function(t){return arguments.length?M.stepMajor(t).stepMinor(t):M.stepMinor()},M.stepMajor=function(t){return arguments.length?(x=+t[0],w=+t[1],M):[x,w]},M.stepMinor=function(t){return arguments.length?(m=+t[0],v=+t[1],M):[m,v]},M.precision=function(m){return arguments.length?(A=+m,f=Hf(c,o,90),d=$f(e,t,A),_=Hf(h,l,90),y=$f(r,n,A),M):A},M.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function If(){return Yf()()}function Gf(a,b){var t=a[0]*tl,e=a[1]*tl,n=b[0]*tl,r=b[1]*tl,o=rl(e),c=fl(e),l=rl(r),h=fl(r),f=o*rl(t),d=o*fl(t),_=l*rl(n),y=l*fl(n),m=2*ml(gl(bl(r-e)+o*l*bl(n-t))),v=fl(m),x=m?function(t){var e=fl(t*=m)/v,n=fl(m-t)/v,r=n*f+e*_,o=n*d+e*y,l=n*c+e*h;return[il(o,r)*Qc,il(l,gl(r*r+o*o))*Qc]}:function(){return[t*Qc,e*Qc]};return x.distance=m,x}var Uf,qf,Vf,Xf,jf=t=>t,Wf=new E,Zf=new E,Kf={point:vl,lineStart:vl,lineEnd:vl,polygonStart:function(){Kf.lineStart=Jf,Kf.lineEnd=nd},polygonEnd:function(){Kf.lineStart=Kf.lineEnd=Kf.point=vl,Wf.add(el(Zf)),Zf=new E},result:function(){var area=Wf/2;return Wf=new E,area}};function Jf(){Kf.point=Qf}function Qf(t,e){Kf.point=ed,Uf=Vf=t,qf=Xf=e}function ed(t,e){Zf.add(Xf*t-Vf*e),Vf=t,Xf=e}function nd(){ed(Uf,qf)}var id=Kf,rd=1/0,sd=rd,ad=-rd,od=ad,ud={point:function(t,e){t<rd&&(rd=t);t>ad&&(ad=t);e<sd&&(sd=e);e>od&&(od=e)},lineStart:vl,lineEnd:vl,polygonStart:vl,polygonEnd:vl,result:function(){var t=[[rd,sd],[ad,od]];return ad=od=-(sd=rd=1/0),t}};var cd,ld,hd,fd,_d=ud,gd=0,pd=0,yd=0,md=0,bd=0,vd=0,xd=0,wd=0,Ad=0,Md={point:Cd,lineStart:Sd,lineEnd:Ed,polygonStart:function(){Md.lineStart=Rd,Md.lineEnd=Dd},polygonEnd:function(){Md.point=Cd,Md.lineStart=Sd,Md.lineEnd=Ed},result:function(){var t=Ad?[xd/Ad,wd/Ad]:vd?[md/vd,bd/vd]:yd?[gd/yd,pd/yd]:[NaN,NaN];return gd=pd=yd=md=bd=vd=xd=wd=Ad=0,t}};function Cd(t,e){gd+=t,pd+=e,++yd}function Sd(){Md.point=kd}function kd(t,e){Md.point=Td,Cd(hd=t,fd=e)}function Td(t,e){var n=t-hd,r=e-fd,o=gl(n*n+r*r);md+=o*(hd+t)/2,bd+=o*(fd+e)/2,vd+=o,Cd(hd=t,fd=e)}function Ed(){Md.point=Cd}function Rd(){Md.point=Ld}function Dd(){Nd(cd,ld)}function Ld(t,e){Md.point=Nd,Cd(cd=hd=t,ld=fd=e)}function Nd(t,e){var n=t-hd,r=e-fd,o=gl(n*n+r*r);md+=o*(hd+t)/2,bd+=o*(fd+e)/2,vd+=o,xd+=(o=fd*t-hd*e)*(hd+t),wd+=o*(fd+e),Ad+=3*o,Cd(hd=t,fd=e)}var Pd=Md;function Od(t){this._context=t}Od.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Jc)}},result:vl};var zd,Bd,Fd,Hd,$d,Yd=new E,Id={point:vl,lineStart:function(){Id.point=Gd},lineEnd:function(){zd&&Ud(Bd,Fd),Id.point=vl},polygonStart:function(){zd=!0},polygonEnd:function(){zd=null},result:function(){var t=+Yd;return Yd=new E,t}};function Gd(t,e){Id.point=Ud,Bd=Hd=t,Fd=$d=e}function Ud(t,e){Hd-=t,$d-=e,Yd.add(gl(Hd*Hd+$d*$d)),Hd=t,$d=e}var qd=Id;function Vd(){this._string=[]}function Xd(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function jd(t,e){var n,r,o=4.5;function path(object){return object&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),Sl(object,n(r))),r.result()}return path.area=function(object){return Sl(object,n(id)),id.result()},path.measure=function(object){return Sl(object,n(qd)),qd.result()},path.bounds=function(object){return Sl(object,n(_d)),_d.result()},path.centroid=function(object){return Sl(object,n(Pd)),Pd.result()},path.projection=function(e){return arguments.length?(n=null==e?(t=null,jf):(t=e).stream,path):t},path.context=function(t){return arguments.length?(r=null==t?(e=null,new Vd):new Od(e=t),"function"!=typeof o&&r.pointRadius(o),path):e},path.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),path):o},path.projection(t).context(e)}function Wd(t){return{stream:Zd(t)}}function Zd(t){return function(e){var s=new Kd;for(var n in t)s[n]=t[n];return s.stream=e,s}}function Kd(){}function Jd(t,e,object){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=n&&t.clipExtent(null),Sl(object,t.stream(_d)),e(_d.result()),null!=n&&t.clipExtent(n),t}function Qd(t,e,object){return Jd(t,(function(b){var n=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=Math.min(n/(b[1][0]-b[0][0]),r/(b[1][1]-b[0][1])),c=+e[0][0]+(n-o*(b[1][0]+b[0][0]))/2,l=+e[0][1]+(r-o*(b[1][1]+b[0][1]))/2;t.scale(150*o).translate([c,l])}),object)}function t_(t,e,object){return Qd(t,[[0,0],e],object)}function e_(t,e,object){return Jd(t,(function(b){var n=+e,r=n/(b[1][0]-b[0][0]),o=(n-r*(b[1][0]+b[0][0]))/2,c=-r*b[0][1];t.scale(150*r).translate([o,c])}),object)}function n_(t,e,object){return Jd(t,(function(b){var n=+e,r=n/(b[1][1]-b[0][1]),o=-r*b[0][0],c=(n-r*(b[1][1]+b[0][1]))/2;t.scale(150*r).translate([o,c])}),object)}Vd.prototype={_radius:4.5,_circle:Xd(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Xd(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},Kd.prototype={constructor:Kd,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var i_=rl(30*tl);function r_(t,e){return+e?function(t,e){function n(r,o,c,l,h,f,d,_,y,m,v,x,w,A){var M=d-r,C=_-o,S=M*M+C*C;if(S>4*e&&w--){var a=l+m,b=h+v,k=f+x,T=gl(a*a+b*b+k*k),E=ml(k/=T),R=el(el(k)-1)<Xc||el(c-y)<Xc?(c+y)/2:il(b,a),p=t(R,E),D=p[0],L=p[1],N=D-r,P=L-o,O=C*N-M*P;(O*O/S>e||el((M*N+C*P)/S-.5)>.3||l*m+h*v+f*x<i_)&&(n(r,o,c,l,h,f,D,L,R,a/=T,b/=T,k,w,A),A.point(D,L),n(D,L,R,a,b,k,d,_,y,m,v,x,w,A))}}return function(e){var r,o,c,l,h,f,d,_,y,m,v,x,w={point:A,lineStart:M,lineEnd:S,polygonStart:function(){e.polygonStart(),w.lineStart=k},polygonEnd:function(){e.polygonEnd(),w.lineStart=M}};function A(n,r){n=t(n,r),e.point(n[0],n[1])}function M(){_=NaN,w.point=C,e.lineStart()}function C(r,o){var c=Jl([r,o]),p=t(r,o);n(_,y,d,m,v,x,_=p[0],y=p[1],d=r,m=c[0],v=c[1],x=c[2],16,e),e.point(_,y)}function S(){w.point=A,e.lineEnd()}function k(){M(),w.point=T,w.lineEnd=E}function T(t,e){C(r=t,e),o=_,c=y,l=m,h=v,f=x,w.point=C}function E(){n(_,y,d,m,v,x,o,c,r,l,h,f,16,e),w.lineEnd=S,S()}return w}}(t,e):function(t){return Zd({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var s_=Zd({point:function(t,e){this.stream.point(t*tl,e*tl)}});function a_(t,e,n,r,o,c){if(!c)return function(t,e,n,r,o){function c(c,l){return[e+t*(c*=r),n-t*(l*=o)]}return c.invert=function(c,l){return[(c-e)/t*r,(n-l)/t*o]},c}(t,e,n,r,o);var l=rl(c),h=fl(c),a=l*t,b=h*t,f=l/t,d=h/t,_=(h*n-l*e)/t,y=(h*e+l*n)/t;function m(t,c){return[a*(t*=r)-b*(c*=o)+e,n-b*t-a*c]}return m.invert=function(t,e){return[r*(f*t-d*e+_),o*(y-d*t-f*e)]},m}function o_(t){return u_((function(){return t}))()}function u_(t){var e,n,r,o,c,l,h,f,d,_,y=150,m=480,v=250,x=0,w=0,A=0,M=0,C=0,S=0,k=1,T=1,E=null,R=ff,D=null,L=jf,N=.5;function P(t){return f(t[0]*tl,t[1]*tl)}function O(t){return(t=f.invert(t[0],t[1]))&&[t[0]*Qc,t[1]*Qc]}function z(){var t=a_(y,0,0,k,T,S).apply(null,e(x,w)),r=a_(y,m-t[0],v-t[1],k,T,S);return n=jh(A,M,C),h=Vh(e,r),f=Vh(n,h),l=r_(h,N),B()}function B(){return d=_=null,P}return P.stream=function(t){return d&&_===t?d:d=s_(function(t){return Zd({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(R(l(L(_=t)))))},P.preclip=function(t){return arguments.length?(R=t,E=void 0,B()):R},P.postclip=function(t){return arguments.length?(L=t,D=r=o=c=null,B()):L},P.clipAngle=function(t){return arguments.length?(R=+t?df(E=t*tl):(E=null,ff),B()):E*Qc},P.clipExtent=function(t){return arguments.length?(L=null==t?(D=r=o=c=null,jf):vf(D=+t[0][0],r=+t[0][1],o=+t[1][0],c=+t[1][1]),B()):null==D?null:[[D,r],[o,c]]},P.scale=function(t){return arguments.length?(y=+t,z()):y},P.translate=function(t){return arguments.length?(m=+t[0],v=+t[1],z()):[m,v]},P.center=function(t){return arguments.length?(x=t[0]%360*tl,w=t[1]%360*tl,z()):[x*Qc,w*Qc]},P.rotate=function(t){return arguments.length?(A=t[0]%360*tl,M=t[1]%360*tl,C=t.length>2?t[2]%360*tl:0,z()):[A*Qc,M*Qc,C*Qc]},P.angle=function(t){return arguments.length?(S=t%360*tl,z()):S*Qc},P.reflectX=function(t){return arguments.length?(k=t?-1:1,z()):k<0},P.reflectY=function(t){return arguments.length?(T=t?-1:1,z()):T<0},P.precision=function(t){return arguments.length?(l=r_(h,N=t*t),B()):gl(N)},P.fitExtent=function(t,object){return Qd(P,t,object)},P.fitSize=function(t,object){return t_(P,t,object)},P.fitWidth=function(t,object){return e_(P,t,object)},P.fitHeight=function(t,object){return n_(P,t,object)},function(){return e=t.apply(this,arguments),P.invert=e.invert&&O,z()}}function c_(t){var e=0,n=Wc/3,r=u_(t),p=r(e,n);return p.parallels=function(t){return arguments.length?r(e=t[0]*tl,n=t[1]*tl):[e*Qc,n*Qc]},p}function l_(t,e){var n=fl(t),r=(n+fl(e))/2;if(el(r)<Xc)return function(t){var e=rl(t);function n(t,n){return[t*e,fl(n)/e]}return n.invert=function(t,n){return[t/e,ml(n*e)]},n}(t);var o=1+n*(2*r-n),c=gl(o)/r;function l(t,e){var n=gl(o-2*r*fl(e))/r;return[n*fl(t*=r),c-n*rl(t)]}return l.invert=function(t,e){var n=c-e,l=il(t,el(n))*_l(n);return n*r<0&&(l-=Wc*_l(t)*_l(n)),[l/r,ml((o-(t*t+n*n)*r*r)/(2*r))]},l}function h_(){return c_(l_).scale(155.424).center([0,33.6442])}function f_(){return h_().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function d_(){var t,e,n,r,o,c,l=f_(),h=h_().rotate([154,0]).center([-2,58.5]).parallels([55,65]),f=h_().rotate([157,0]).center([-3,19.9]).parallels([8,18]),d={point:function(t,e){c=[t,e]}};function _(t){var e=t[0],l=t[1];return c=null,n.point(e,l),c||(r.point(e,l),c)||(o.point(e,l),c)}function y(){return t=e=null,_}return _.invert=function(t){var e=l.scale(),n=l.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(o>=.12&&o<.234&&r>=-.425&&r<-.214?h:o>=.166&&o<.234&&r>=-.214&&r<-.115?f:l).invert(t)},_.stream=function(n){return t&&e===n?t:(r=[l.stream(e=n),h.stream(n),f.stream(n)],o=r.length,t={point:function(t,e){for(var i=-1;++i<o;)r[i].point(t,e)},sphere:function(){for(var i=-1;++i<o;)r[i].sphere()},lineStart:function(){for(var i=-1;++i<o;)r[i].lineStart()},lineEnd:function(){for(var i=-1;++i<o;)r[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<o;)r[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<o;)r[i].polygonEnd()}});var r,o},_.precision=function(t){return arguments.length?(l.precision(t),h.precision(t),f.precision(t),y()):l.precision()},_.scale=function(t){return arguments.length?(l.scale(t),h.scale(.35*t),f.scale(t),_.translate(l.translate())):l.scale()},_.translate=function(t){if(!arguments.length)return l.translate();var e=l.scale(),c=+t[0],_=+t[1];return n=l.translate(t).clipExtent([[c-.455*e,_-.238*e],[c+.455*e,_+.238*e]]).stream(d),r=h.translate([c-.307*e,_+.201*e]).clipExtent([[c-.425*e+Xc,_+.12*e+Xc],[c-.214*e-Xc,_+.234*e-Xc]]).stream(d),o=f.translate([c-.205*e,_+.212*e]).clipExtent([[c-.214*e+Xc,_+.166*e+Xc],[c-.115*e-Xc,_+.234*e-Xc]]).stream(d),y()},_.fitExtent=function(t,object){return Qd(_,t,object)},_.fitSize=function(t,object){return t_(_,t,object)},_.fitWidth=function(t,object){return e_(_,t,object)},_.fitHeight=function(t,object){return n_(_,t,object)},_.scale(1070)}function __(t){return function(e,n){var r=rl(e),o=rl(n),c=t(r*o);return c===1/0?[2,0]:[c*o*fl(e),c*fl(n)]}}function g_(t){return function(e,n){var r=gl(e*e+n*n),o=t(r),c=fl(o),l=rl(o);return[il(e*c,r*l),ml(r&&n*c/r)]}}var p_=__((function(t){return gl(2/(1+t))}));function y_(){return o_(p_).scale(124.75).clipAngle(179.999)}p_.invert=g_((function(t){return 2*ml(t/2)}));var m_=__((function(t){return(t=yl(t))&&t/fl(t)}));function b_(){return o_(m_).scale(79.4188).clipAngle(179.999)}function v_(t,e){return[t,ll(pl((Zc+e)/2))]}function x_(){return w_(v_).scale(961/Jc)}function w_(t){var e,n,r,o=o_(t),c=o.center,l=o.scale,h=o.translate,f=o.clipExtent,d=null;function _(){var c=Wc*l(),h=o(Jh(o.rotate()).invert([0,0]));return f(null==d?[[h[0]-c,h[1]-c],[h[0]+c,h[1]+c]]:t===v_?[[Math.max(h[0]-c,d),e],[Math.min(h[0]+c,n),r]]:[[d,Math.max(h[1]-c,e)],[n,Math.min(h[1]+c,r)]])}return o.scale=function(t){return arguments.length?(l(t),_()):l()},o.translate=function(t){return arguments.length?(h(t),_()):h()},o.center=function(t){return arguments.length?(c(t),_()):c()},o.clipExtent=function(t){return arguments.length?(null==t?d=e=n=r=null:(d=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),_()):null==d?null:[[d,e],[n,r]]},_()}function A_(t){return pl((Zc+t)/2)}function M_(t,e){var n=rl(t),r=t===e?fl(t):ll(n/rl(e))/ll(A_(e)/A_(t)),o=n*hl(A_(t),r)/r;if(!r)return v_;function c(t,e){o>0?e<-Zc+Xc&&(e=-Zc+Xc):e>Zc-Xc&&(e=Zc-Xc);var n=o/hl(A_(e),r);return[n*fl(r*t),o-n*rl(r*t)]}return c.invert=function(t,e){var n=o-e,c=_l(r)*gl(t*t+n*n),l=il(t,el(n))*_l(n);return n*r<0&&(l-=Wc*_l(t)*_l(n)),[l/r,2*nl(hl(o/c,1/r))-Zc]},c}function C_(){return c_(M_).scale(109.5).parallels([30,30])}function S_(t,e){return[t,e]}function k_(){return o_(S_).scale(152.63)}function T_(t,e){var n=rl(t),r=t===e?fl(t):(n-rl(e))/(e-t),g=n/r+t;if(el(r)<Xc)return S_;function o(t,e){var n=g-e,o=r*t;return[n*fl(o),g-n*rl(o)]}return o.invert=function(t,e){var n=g-e,o=il(t,el(n))*_l(n);return n*r<0&&(o-=Wc*_l(t)*_l(n)),[o/r,g-_l(r)*gl(t*t+n*n)]},o}function E_(){return c_(T_).scale(131.154).center([0,13.9389])}m_.invert=g_((function(t){return t})),v_.invert=function(t,e){return[t,2*nl(al(e))-Zc]},S_.invert=S_;var R_=1.340264,D_=-.081106,L_=893e-6,N_=.003796,P_=gl(3)/2;function O_(t,e){var n=ml(P_*fl(e)),r=n*n,o=r*r*r;return[t*rl(n)/(P_*(R_+3*D_*r+o*(7*L_+9*N_*r))),n*(R_+D_*r+o*(L_+N_*r))]}function z_(){return o_(O_).scale(177.158)}function B_(t,e){var n=rl(e),r=rl(t)*n;return[n*fl(t)/r,fl(e)/r]}function F_(){return o_(B_).scale(144.049).clipAngle(60)}function H_(){var t,e,n,r,o,c,l,h=1,f=0,d=0,_=1,y=1,m=0,v=null,x=1,w=1,A=Zd({point:function(t,e){var p=S([t,e]);this.stream.point(p[0],p[1])}}),M=jf;function C(){return x=h*_,w=h*y,c=l=null,S}function S(p){var n=p[0]*x,r=p[1]*w;if(m){var o=r*t-n*e;n=n*t+r*e,r=o}return[n+f,r+d]}return S.invert=function(p){var n=p[0]-f,r=p[1]-d;if(m){var o=r*t+n*e;n=n*t-r*e,r=o}return[n/x,r/w]},S.stream=function(t){return c&&l===t?c:c=A(M(l=t))},S.postclip=function(t){return arguments.length?(M=t,v=n=r=o=null,C()):M},S.clipExtent=function(t){return arguments.length?(M=null==t?(v=n=r=o=null,jf):vf(v=+t[0][0],n=+t[0][1],r=+t[1][0],o=+t[1][1]),C()):null==v?null:[[v,n],[r,o]]},S.scale=function(t){return arguments.length?(h=+t,C()):h},S.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],C()):[f,d]},S.angle=function(n){return arguments.length?(e=fl(m=n%360*tl),t=rl(m),C()):m*Qc},S.reflectX=function(t){return arguments.length?(_=t?-1:1,C()):_<0},S.reflectY=function(t){return arguments.length?(y=t?-1:1,C()):y<0},S.fitExtent=function(t,object){return Qd(S,t,object)},S.fitSize=function(t,object){return t_(S,t,object)},S.fitWidth=function(t,object){return e_(S,t,object)},S.fitHeight=function(t,object){return n_(S,t,object)},S}function $_(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Y_(){return o_($_).scale(175.295)}function I_(t,e){return[rl(e)*fl(t),fl(e)]}function G_(){return o_(I_).scale(249.5).clipAngle(90.000001)}function U_(t,e){var n=rl(e),r=1+rl(t)*n;return[n*fl(t)/r,fl(e)/r]}function q_(){return o_(U_).scale(250).clipAngle(142)}function V_(t,e){return[ll(pl((Zc+e)/2)),-t]}function X_(){var t=w_(V_),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}function j_(a,b){return a.parent===b.parent?1:2}function W_(t,e){return t+e.x}function Z_(t,e){return Math.max(t,e.y)}function K_(){var t=j_,e=1,n=1,r=!1;function o(o){var c,l=0;o.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(W_,0)/t.length}(n),e.y=function(t){return 1+t.reduce(Z_,0)}(n)):(e.x=c?l+=t(e,c):0,e.y=0,c=e)}));var h=function(t){for(var e;e=t.children;)t=e[0];return t}(o),f=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(o),d=h.x-t(h,f)/2,_=f.x+t(f,h)/2;return o.eachAfter(r?function(t){t.x=(t.x-o.x)*e,t.y=(o.y-t.y)*n}:function(t){t.x=(t.x-d)/(_-d)*e,t.y=(1-(o.y?t.y/o.y:1))*n})}return o.separation=function(e){return arguments.length?(t=e,o):t},o.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],o):r?null:[e,n]},o.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],o):r?[e,n]:null},o}function J_(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}function Q_(data,t){data instanceof Map?(data=[void 0,data],void 0===t&&(t=eg)):void 0===t&&(t=tg);for(var e,n,r,i,o,c=new rg(data),l=[c];e=l.pop();)if((r=t(e.data))&&(o=(r=Array.from(r)).length))for(e.children=r,i=o-1;i>=0;--i)l.push(n=r[i]=new rg(r[i])),n.parent=e,n.depth=e.depth+1;return c.eachBefore(ig)}function tg(t){return t.children}function eg(t){return Array.isArray(t)?t[1]:null}function ng(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function ig(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function rg(data){this.data=data,this.depth=this.height=0,this.parent=null}function sg(t){for(var p,e,i=0,n=(t=function(t){for(var e,i,n=t.length;n;)i=Math.random()*n--|0,e=t[n],t[n]=t[i],t[i]=e;return t}(Array.from(t))).length,r=[];i<n;)p=t[i],e&&ug(e,p)?++i:(e=lg(r=ag(r,p)),i=0);return e}function ag(t,p){var i,e;if(cg(p,t))return[p];for(i=0;i<t.length;++i)if(og(p,t[i])&&cg(hg(t[i],p),t))return[t[i],p];for(i=0;i<t.length-1;++i)for(e=i+1;e<t.length;++e)if(og(hg(t[i],t[e]),p)&&og(hg(t[i],p),t[e])&&og(hg(t[e],p),t[i])&&cg(fg(t[i],t[e],p),t))return[t[i],t[e],p];throw new Error}function og(a,b){var t=a.r-b.r,e=b.x-a.x,n=b.y-a.y;return t<0||t*t<e*e+n*n}function ug(a,b){var t=a.r-b.r+1e-9*Math.max(a.r,b.r,1),e=b.x-a.x,n=b.y-a.y;return t>0&&t*t>e*e+n*n}function cg(a,t){for(var i=0;i<t.length;++i)if(!ug(a,t[i]))return!1;return!0}function lg(t){switch(t.length){case 1:return function(a){return{x:a.x,y:a.y,r:a.r}}(t[0]);case 2:return hg(t[0],t[1]);case 3:return fg(t[0],t[1],t[2])}}function hg(a,b){var t=a.x,e=a.y,n=a.r,r=b.x,o=b.y,c=b.r,l=r-t,h=o-e,f=c-n,d=Math.sqrt(l*l+h*h);return{x:(t+r+l/d*f)/2,y:(e+o+h/d*f)/2,r:(d+n+c)/2}}function fg(a,b,t){var e=a.x,n=a.y,r=a.r,o=b.x,c=b.y,l=b.r,h=t.x,f=t.y,d=t.r,_=e-o,y=e-h,m=n-c,v=n-f,x=l-r,w=d-r,A=e*e+n*n-r*r,M=A-o*o-c*c+l*l,C=A-h*h-f*f+d*d,S=y*m-_*v,k=(m*C-v*M)/(2*S)-e,T=(v*x-m*w)/S,E=(y*M-_*C)/(2*S)-n,R=(_*w-y*x)/S,D=T*T+R*R-1,L=2*(r+k*T+E*R),N=k*k+E*E-r*r,P=-(D?(L+Math.sqrt(L*L-4*D*N))/(2*D):N/L);return{x:e+k+T*P,y:n+E+R*P,r:P}}function dg(b,a,t){var e,n,r,o,c=b.x-a.x,l=b.y-a.y,h=c*c+l*l;h?(n=a.r+t.r,n*=n,o=b.r+t.r,n>(o*=o)?(e=(h+o-n)/(2*h),r=Math.sqrt(Math.max(0,o/h-e*e)),t.x=b.x-e*c-r*l,t.y=b.y-e*l+r*c):(e=(h+n-o)/(2*h),r=Math.sqrt(Math.max(0,n/h-e*e)),t.x=a.x+e*c-r*l,t.y=a.y+e*l+r*c)):(t.x=a.x+t.r,t.y=a.y)}function _g(a,b){var t=a.r+b.r-1e-6,e=b.x-a.x,n=b.y-a.y;return t>0&&t*t>e*e+n*n}function gg(t){var a=t._,b=t.next._,e=a.r+b.r,n=(a.x*b.r+b.x*a.r)/e,r=(a.y*b.r+b.y*a.r)/e;return n*n+r*r}function pg(circle){this._=circle,this.next=null,this.previous=null}function yg(t){if(!(n=(t=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(t)).length))return 0;var a,b,e,n,r,o,i,c,l,h,f;if((a=t[0]).x=0,a.y=0,!(n>1))return a.r;if(b=t[1],a.x=-b.r,b.x=a.r,b.y=0,!(n>2))return a.r+b.r;dg(b,a,e=t[2]),a=new pg(a),b=new pg(b),e=new pg(e),a.next=e.previous=b,b.next=a.previous=e,e.next=b.previous=a;t:for(i=3;i<n;++i){dg(a._,b._,e=t[i]),e=new pg(e),c=b.next,l=a.previous,h=b._.r,f=a._.r;do{if(h<=f){if(_g(c._,e._)){b=c,a.next=b,b.previous=a,--i;continue t}h+=c._.r,c=c.next}else{if(_g(l._,e._)){(a=l).next=b,b.previous=a,--i;continue t}f+=l._.r,l=l.previous}}while(c!==l.next);for(e.previous=a,e.next=b,a.next=b.previous=b=e,r=gg(a);(e=e.next)!==b;)(o=gg(e))<r&&(a=e,r=o);b=a.next}for(a=[b._],e=b;(e=e.next)!==b;)a.push(e._);for(e=sg(a),i=0;i<n;++i)(a=t[i]).x-=e.x,a.y-=e.y;return e.r}function mg(t){return yg(t),t}function bg(t){return null==t?null:vg(t)}function vg(t){if("function"!=typeof t)throw new Error;return t}function xg(){return 0}function wg(t){return function(){return t}}function Ag(t){return Math.sqrt(t.value)}function Mg(){var t=null,e=1,n=1,r=xg;function o(o){return o.x=e/2,o.y=n/2,t?o.eachBefore(Cg(t)).eachAfter(Sg(r,.5)).eachBefore(kg(1)):o.eachBefore(Cg(Ag)).eachAfter(Sg(xg,1)).eachAfter(Sg(r,o.r/Math.min(e,n))).eachBefore(kg(Math.min(e,n)/(2*o.r))),o}return o.radius=function(e){return arguments.length?(t=bg(e),o):t},o.size=function(t){return arguments.length?(e=+t[0],n=+t[1],o):[e,n]},o.padding=function(t){return arguments.length?(r="function"==typeof t?t:wg(+t),o):r},o}function Cg(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Sg(t,e){return function(n){if(r=n.children){var r,i,o,c=r.length,l=t(n)*e||0;if(l)for(i=0;i<c;++i)r[i].r+=l;if(o=yg(r),l)for(i=0;i<c;++i)r[i].r-=l;n.r=o+l}}}function kg(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Tg(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Eg(t,e,n,r,o){for(var c,l=t.children,i=-1,h=l.length,f=t.value&&(r-e)/t.value;++i<h;)(c=l[i]).y0=n,c.y1=o,c.x0=e,c.x1=e+=c.value*f}function Rg(){var t=1,e=1,n=0,r=!1;function o(o){var c=o.height+1;return o.x0=o.y0=n,o.x1=t,o.y1=e/c,o.eachBefore(function(t,e){return function(r){r.children&&Eg(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var o=r.x0,c=r.y0,l=r.x1-n,h=r.y1-n;l<o&&(o=l=(o+l)/2),h<c&&(c=h=(c+h)/2),r.x0=o,r.y0=c,r.x1=l,r.y1=h}}(e,c)),r&&o.eachBefore(Tg),o}return o.round=function(t){return arguments.length?(r=!!t,o):r},o.size=function(n){return arguments.length?(t=+n[0],e=+n[1],o):[t,e]},o.padding=function(t){return arguments.length?(n=+t,o):n},o}O_.invert=function(t,e){for(var n,r=e,o=r*r,c=o*o*o,i=0;i<12&&(c=(o=(r-=n=(r*(R_+D_*o+c*(L_+N_*o))-e)/(R_+3*D_*o+c*(7*L_+9*N_*o)))*r)*o*o,!(el(n)<jc));++i);return[P_*t*(R_+3*D_*o+c*(7*L_+9*N_*o))/rl(r),ml(fl(r)/P_)]},B_.invert=g_(nl),$_.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,c=o*o;r-=n=(r*(1.007226+o*(.015085+c*(.028874*o-.044475-.005916*c)))-e)/(1.007226+o*(.045255+c*(.259866*o-.311325-.005916*11*c)))}while(el(n)>Xc&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},I_.invert=g_(ml),U_.invert=g_((function(t){return 2*nl(t)})),V_.invert=function(t,e){return[-e,2*nl(al(t))-Zc]},rg.prototype=Q_.prototype={constructor:rg,count:function(){return this.eachAfter(J_)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,i,r,o=this,c=[o],l=[],h=-1;o=c.pop();)if(l.push(o),n=o.children)for(i=0,r=n.length;i<r;++i)c.push(n[i]);for(;o=l.pop();)t.call(e,o,++h,this);return this},eachBefore:function(t,e){for(var n,i,r=this,o=[r],c=-1;r=o.pop();)if(t.call(e,r,++c,this),n=r.children)for(i=n.length-1;i>=0;--i)o.push(n[i]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(a,b){if(a===b)return a;var t=a.ancestors(),e=b.ancestors(),n=null;a=t.pop(),b=e.pop();for(;a===b;)n=a,a=t.pop(),b=e.pop();return n}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var o=r.length;t!==n;)r.splice(o,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return Q_(this).eachBefore(ng)},[Symbol.iterator]:function*(){var t,e,i,n,r=this,o=[r];do{for(t=o.reverse(),o=[];r=t.pop();)if(yield r,e=r.children)for(i=0,n=e.length;i<n;++i)o.push(e[i])}while(o.length)}};var Dg={depth:-1},Lg={};function Ng(t){return t.id}function Pg(t){return t.parentId}function Og(){var t=Ng,e=Pg;function n(data){var n,i,r,o,c,l,h,f=Array.from(data),d=f.length,_=new Map;for(i=0;i<d;++i)n=f[i],c=f[i]=new rg(n),null!=(l=t(n,i,data))&&(l+="")&&(h=c.id=l,_.set(h,_.has(h)?Lg:c)),null!=(l=e(n,i,data))&&(l+="")&&(c.parent=l);for(i=0;i<d;++i)if(l=(c=f[i]).parent){if(!(o=_.get(l)))throw new Error("missing: "+l);if(o===Lg)throw new Error("ambiguous: "+l);o.children?o.children.push(c):o.children=[c],c.parent=o}else{if(r)throw new Error("multiple roots");r=c}if(!r)throw new Error("no root");if(r.parent=Dg,r.eachBefore((function(t){t.depth=t.parent.depth+1,--d})).eachBefore(ig),r.parent=null,d>0)throw new Error("cycle");return r}return n.id=function(e){return arguments.length?(t=vg(e),n):t},n.parentId=function(t){return arguments.length?(e=vg(t),n):e},n}function zg(a,b){return a.parent===b.parent?1:2}function Bg(t){var e=t.children;return e?e[0]:t.t}function Fg(t){var e=t.children;return e?e[e.length-1]:t.t}function Hg(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function $g(t,e,n){return t.a.parent===e.parent?t.a:n}function Yg(t,i){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=i}function Ig(){var t=zg,e=1,n=1,r=null;function o(o){var f=function(t){for(var e,n,r,i,o,c=new Yg(t,0),l=[c];e=l.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)l.push(n=e.children[i]=new Yg(r[i],i)),n.parent=e;return(c.parent=new Yg(null,0)).children=[c],c}(o);if(f.eachAfter(c),f.parent.m=-f.z,f.eachBefore(l),r)o.eachBefore(h);else{var d=o,_=o,y=o;o.eachBefore((function(t){t.x<d.x&&(d=t),t.x>_.x&&(_=t),t.depth>y.depth&&(y=t)}));var s=d===_?1:t(d,_)/2,m=s-d.x,v=e/(_.x+s+m),x=n/(y.depth||1);o.eachBefore((function(t){t.x=(t.x+m)*v,t.y=t.depth*x}))}return o}function c(e){var n=e.children,r=e.parent.children,o=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,o=t.children,i=o.length;--i>=0;)(e=o[i]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var c=(n[0].z+n[n.length-1].z)/2;o?(e.z=o.z+t(e._,o._),e.m=e.z-c):e.z=c}else o&&(e.z=o.z+t(e._,o._));e.parent.A=function(e,n,r){if(n){for(var o,c=e,l=e,h=n,f=c.parent.children[0],d=c.m,_=l.m,y=h.m,m=f.m;h=Fg(h),c=Bg(c),h&&c;)f=Bg(f),(l=Fg(l)).a=e,(o=h.z+y-c.z-d+t(h._,c._))>0&&(Hg($g(h,e,r),e,o),d+=o,_+=o),y+=h.m,d+=c.m,m+=f.m,_+=l.m;h&&!Fg(l)&&(l.t=h,l.m+=y-_),c&&!Bg(f)&&(f.t=c,f.m+=d-m,r=e)}return r}(e,o,e.parent.A||r[0])}function l(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function h(t){t.x*=e,t.y=t.depth*n}return o.separation=function(e){return arguments.length?(t=e,o):t},o.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],o):r?null:[e,n]},o.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],o):r?[e,n]:null},o}function Gg(t,e,n,r,o){for(var c,l=t.children,i=-1,h=l.length,f=t.value&&(o-n)/t.value;++i<h;)(c=l[i]).x0=e,c.x1=r,c.y0=n,c.y1=n+=c.value*f}Yg.prototype=Object.create(rg.prototype);var Ug=(1+Math.sqrt(5))/2;function qg(t,e,n,r,o,c){for(var l,h,f,d,_,y,m,v,x,w,A,M=[],C=e.children,S=0,k=0,T=C.length,E=e.value;S<T;){f=o-n,d=c-r;do{_=C[k++].value}while(!_&&k<T);for(y=m=_,A=_*_*(w=Math.max(d/f,f/d)/(E*t)),x=Math.max(m/A,A/y);k<T;++k){if(_+=h=C[k].value,h<y&&(y=h),h>m&&(m=h),A=_*_*w,(v=Math.max(m/A,A/y))>x){_-=h;break}x=v}M.push(l={value:_,dice:f<d,children:C.slice(S,k)}),l.dice?Eg(l,n,r,o,E?r+=d*_/E:c):Gg(l,n,r,E?n+=f*_/E:o,c),E-=_,S=k}return M}var Vg=function t(e){function n(t,n,r,o,c){qg(e,t,n,r,o,c)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Ug);function Xg(){var t=Vg,e=!1,n=1,r=1,o=[0],c=xg,l=xg,h=xg,f=xg,d=xg;function _(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(y),o=[0],e&&t.eachBefore(Tg),t}function y(e){var p=o[e.depth],n=e.x0+p,r=e.y0+p,_=e.x1-p,y=e.y1-p;_<n&&(n=_=(n+_)/2),y<r&&(r=y=(r+y)/2),e.x0=n,e.y0=r,e.x1=_,e.y1=y,e.children&&(p=o[e.depth+1]=c(e)/2,n+=d(e)-p,r+=l(e)-p,(_-=h(e)-p)<n&&(n=_=(n+_)/2),(y-=f(e)-p)<r&&(r=y=(r+y)/2),t(e,n,r,_,y))}return _.round=function(t){return arguments.length?(e=!!t,_):e},_.size=function(t){return arguments.length?(n=+t[0],r=+t[1],_):[n,r]},_.tile=function(e){return arguments.length?(t=vg(e),_):t},_.padding=function(t){return arguments.length?_.paddingInner(t).paddingOuter(t):_.paddingInner()},_.paddingInner=function(t){return arguments.length?(c="function"==typeof t?t:wg(+t),_):c},_.paddingOuter=function(t){return arguments.length?_.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):_.paddingTop()},_.paddingTop=function(t){return arguments.length?(l="function"==typeof t?t:wg(+t),_):l},_.paddingRight=function(t){return arguments.length?(h="function"==typeof t?t:wg(+t),_):h},_.paddingBottom=function(t){return arguments.length?(f="function"==typeof t?t:wg(+t),_):f},_.paddingLeft=function(t){return arguments.length?(d="function"==typeof t?t:wg(+t),_):d},_}function jg(t,e,n,r,o){var i,c,l=t.children,h=l.length,f=new Array(h+1);for(f[0]=c=i=0;i<h;++i)f[i+1]=c+=l[i].value;!function t(i,e,n,r,o,c,h){if(i>=e-1){var d=l[i];return d.x0=r,d.y0=o,d.x1=c,void(d.y1=h)}var _=f[i],y=n/2+_,m=i+1,v=e-1;for(;m<v;){var x=m+v>>>1;f[x]<y?m=x+1:v=x}y-f[m-1]<f[m]-y&&i+1<m&&--m;var w=f[m]-_,A=n-w;if(c-r>h-o){var M=n?(r*A+c*w)/n:c;t(i,m,w,r,o,M,h),t(m,e,A,M,o,c,h)}else{var C=n?(o*A+h*w)/n:h;t(i,m,w,r,o,c,C),t(m,e,A,r,C,c,h)}}(0,h,t.value,e,n,r,o)}function Wg(t,e,n,r,o){(1&t.depth?Gg:Eg)(t,e,n,r,o)}var Zg=function t(e){function n(t,n,r,o,c){if((l=t._squarify)&&l.ratio===e)for(var l,h,f,i,d,_=-1,y=l.length,m=t.value;++_<y;){for(f=(h=l[_]).children,i=h.value=0,d=f.length;i<d;++i)h.value+=f[i].value;h.dice?Eg(h,n,r,o,m?r+=(c-r)*h.value/m:c):Gg(h,n,r,m?n+=(o-n)*h.value/m:o,c),m-=h.value}else t._squarify=l=qg(e,t,n,r,o,c),l.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Ug);function Kg(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function Jg(a,b){var i=vi(+a,+b);return function(t){var e=i(t);return e-360*Math.floor(e/360)}}function Qg(a,b){return a=+a,b=+b,function(t){return Math.round(a*(1-t)+b*t)}}function tp(t){return((t=Math.exp(t))+1/t)/2}var ep=function t(e,n,r){function o(t,o){var i,c,l=t[0],h=t[1],f=t[2],d=o[0],_=o[1],y=o[2],m=d-l,v=_-h,x=m*m+v*v;if(x<1e-12)c=Math.log(y/f)/e,i=function(t){return[l+t*m,h+t*v,f*Math.exp(e*t*c)]};else{var w=Math.sqrt(x),A=(y*y-f*f+r*x)/(2*f*n*w),M=(y*y-f*f-r*x)/(2*y*n*w),C=Math.log(Math.sqrt(A*A+1)-A),S=Math.log(Math.sqrt(M*M+1)-M);c=(S-C)/e,i=function(t){var s=t*c,r=tp(C),u=f/(n*w)*(r*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(e*s+C)-function(t){return((t=Math.exp(t))-1/t)/2}(C));return[l+u*m,h+u*v,f*r/tp(e*s+C)]}}return i.duration=1e3*c*e/Math.SQRT2,i}return o.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},o}(Math.SQRT2,2,4);function np(t){return function(e,n){var r=t((e=fi(e)).h,(n=fi(n)).h),s=wi(e.s,n.s),o=wi(e.l,n.l),c=wi(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=s(t),e.l=o(t),e.opacity=c(t),e+""}}}var ip=np(vi),sp=np(wi);function ap(t,e){var n=wi((t=Ma(t)).l,(e=Ma(e)).l),a=wi(t.a,e.a),b=wi(t.b,e.b),r=wi(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=a(e),t.b=b(e),t.opacity=r(e),t+""}}function op(t){return function(e,n){var r=t((e=La(e)).h,(n=La(n)).h),o=wi(e.c,n.c),c=wi(e.l,n.l),l=wi(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=o(t),e.l=c(t),e.opacity=l(t),e+""}}}var up=op(vi),cp=op(wi);function lp(t){return function e(n){function r(e,r){var o=t((e=Ua(e)).h,(r=Ua(r)).h),s=wi(e.s,r.s),c=wi(e.l,r.l),l=wi(e.opacity,r.opacity);return function(t){return e.h=o(t),e.s=s(t),e.l=c(Math.pow(t,n)),e.opacity=l(t),e+""}}return n=+n,r.gamma=e,r}(1)}var hp=lp(vi),fp=lp(wi);function dp(t,e){void 0===e&&(e=t,t=zi);for(var i=0,n=e.length-1,r=e[0],o=new Array(n<0?0:n);i<n;)o[i]=t(r,r=e[++i]);return function(t){var i=Math.max(0,Math.min(n-1,Math.floor(t*=n)));return o[i](t-i)}}function _p(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}function gp(polygon){for(var a,i=-1,t=polygon.length,b=polygon[t-1],area=0;++i<t;)a=b,b=polygon[i],area+=a[1]*b[0]-a[0]*b[1];return area/2}function pp(polygon){for(var a,t,i=-1,e=polygon.length,n=0,r=0,b=polygon[e-1],o=0;++i<e;)a=b,b=polygon[i],o+=t=a[0]*b[1]-b[0]*a[1],n+=(a[0]+b[0])*t,r+=(a[1]+b[1])*t;return[n/(o*=3),r/o]}function yp(a,b,t){return(b[0]-a[0])*(t[1]-a[1])-(b[1]-a[1])*(t[0]-a[0])}function mp(a,b){return a[0]-b[0]||a[1]-b[1]}function bp(t){const e=t.length,n=[0,1];let i,r=2;for(i=2;i<e;++i){for(;r>1&&yp(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function vp(t){if((e=t.length)<3)return null;var i,e,n=new Array(e),r=new Array(e);for(i=0;i<e;++i)n[i]=[+t[i][0],+t[i][1],i];for(n.sort(mp),i=0;i<e;++i)r[i]=[n[i][0],-n[i][1]];var o=bp(n),c=bp(r),l=c[0]===o[0],h=c[c.length-1]===o[o.length-1],f=[];for(i=o.length-1;i>=0;--i)f.push(t[n[o[i]][2]]);for(i=+l;i<c.length-h;++i)f.push(t[n[c[i]][2]]);return f}function xp(polygon,t){for(var e,n,r=polygon.length,p=polygon[r-1],o=t[0],c=t[1],l=p[0],h=p[1],f=!1,i=0;i<r;++i)e=(p=polygon[i])[0],(n=p[1])>c!=h>c&&o<(l-e)*(c-n)/(h-n)+e&&(f=!f),l=e,h=n;return f}function wp(polygon){for(var t,e,i=-1,n=polygon.length,b=polygon[n-1],r=b[0],o=b[1],c=0;++i<n;)t=r,e=o,t-=r=(b=polygon[i])[0],e-=o=b[1],c+=Math.hypot(t,e);return c}var Ap=Math.random,Mp=function t(source){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return source()*e+t}}return e.source=t,e}(Ap),Cp=function t(source){function e(t,e){return arguments.length<2&&(e=t,t=0),t=Math.floor(t),e=Math.floor(e)-t,function(){return Math.floor(source()*e+t)}}return e.source=t,e}(Ap),Sp=function t(source){function e(t,e){var n,r;return t=null==t?0:+t,e=null==e?1:+e,function(){var o;if(null!=n)o=n,n=null;else do{n=2*source()-1,o=2*source()-1,r=n*n+o*o}while(!r||r>1);return t+e*o*Math.sqrt(-2*Math.log(r)/r)}}return e.source=t,e}(Ap),kp=function t(source){var e=Sp.source(source);function n(){var t=e.apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(Ap),Tp=function t(source){function e(t){return(t=+t)<=0?()=>0:function(){for(var e=0,i=t;i>1;--i)e+=source();return e+i*source()}}return e.source=t,e}(Ap),Ep=function t(source){var e=Tp.source(source);function n(t){if(0==(t=+t))return source;var n=e(t);return function(){return n()/t}}return n.source=t,n}(Ap),Rp=function t(source){function e(t){return function(){return-Math.log1p(-source())/t}}return e.source=t,e}(Ap),Dp=function t(source){function e(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-source(),t)}}return e.source=t,e}(Ap),Lp=function t(source){function e(p){if((p=+p)<0||p>1)throw new RangeError("invalid p");return function(){return Math.floor(source()+p)}}return e.source=t,e}(Ap),Np=function t(source){function e(p){if((p=+p)<0||p>1)throw new RangeError("invalid p");return 0===p?()=>1/0:1===p?()=>1:(p=Math.log1p(-p),function(){return 1+Math.floor(Math.log1p(-source())/p)})}return e.source=t,e}(Ap),Pp=function t(source){var e=Sp.source(source)();function n(t,n){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return()=>0;if(n=null==n?1:+n,1===t)return()=>-Math.log1p(-source())*n;var r=(t<1?t+1:t)-1/3,o=1/(3*Math.sqrt(r)),c=t<1?()=>Math.pow(source(),1/t):()=>1;return function(){do{do{var t=e(),l=1+o*t}while(l<=0);l*=l*l;var u=1-source()}while(u>=1-.0331*t*t*t*t&&Math.log(u)>=.5*t*t+r*(1-l+Math.log(l)));return r*l*c()*n}}return n.source=t,n}(Ap),Op=function t(source){var e=Pp.source(source);function n(t,n){var r=e(t),o=e(n);return function(){var t=r();return 0===t?0:t/(t+o())}}return n.source=t,n}(Ap),zp=function t(source){var e=Np.source(source),n=Op.source(source);function r(t,p){return t=+t,(p=+p)>=1?()=>t:p<=0?()=>0:function(){for(var r=0,o=t,c=p;o*c>16&&o*(1-c)>16;){var i=Math.floor((o+1)*c),l=n(i,o-i+1)();l<=c?(r+=i,o-=i,c=(c-l)/(1-l)):(o=i-1,c/=l)}for(var h=c<.5,g=e(h?c:1-c),s=g(),f=0;s<=o;++f)s+=g();return r+(h?f:o-f)}}return r.source=t,r}(Ap),Bp=function t(source){function e(t,a,b){var e;return 0==(t=+t)?e=t=>-Math.log(t):(t=1/t,e=e=>Math.pow(e,t)),a=null==a?0:+a,b=null==b?1:+b,function(){return a+b*e(-Math.log1p(-source()))}}return e.source=t,e}(Ap),Fp=function t(source){function e(a,b){return a=null==a?0:+a,b=null==b?1:+b,function(){return a+b*Math.tan(Math.PI*source())}}return e.source=t,e}(Ap),Hp=function t(source){function e(a,b){return a=null==a?0:+a,b=null==b?1:+b,function(){var u=source();return a+b*Math.log(u/(1-u))}}return e.source=t,e}(Ap),$p=function t(source){var e=Pp.source(source),n=zp.source(source);function r(t){return function(){for(var r=0,o=t;o>16;){var c=Math.floor(.875*o),l=e(c)();if(l>o)return r+n(c-1,o/l)();r+=c,o-=l}for(var s=-Math.log1p(-source()),h=0;s<=o;++h)s-=Math.log1p(-source());return r+h}}return r.source=t,r}(Ap);const Yp=1/4294967296;function Ip(t=Math.random()){let e=0|(0<=t&&t<1?t/Yp:Math.abs(t));return()=>(e=1664525*e+1013904223|0,Yp*(e>>>0))}function Gp(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Up(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const qp=Symbol("implicit");function Vp(){var t=new Map,e=[],n=[],r=qp;function o(o){var c=o+"",i=t.get(c);if(!i){if(r!==qp)return r;t.set(c,i=e.push(o))}return n[(i-1)%n.length]}return o.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;for(const r of n){const n=r+"";t.has(n)||t.set(n,e.push(r))}return o},o.range=function(t){return arguments.length?(n=Array.from(t),o):n.slice()},o.unknown=function(t){return arguments.length?(r=t,o):r},o.copy=function(){return Vp(e,n).unknown(r)},Gp.apply(o,arguments),o}function Xp(){var t,e,n=Vp().unknown(void 0),r=n.domain,o=n.range,c=0,l=1,h=!1,f=0,d=0,_=.5;function y(){var n=r().length,y=l<c,m=y?l:c,v=y?c:l;t=(v-m)/Math.max(1,n-f+2*d),h&&(t=Math.floor(t)),m+=(v-m-t*(n-f))*_,e=t*(1-f),h&&(m=Math.round(m),e=Math.round(e));var x=St(n).map((function(i){return m+t*i}));return o(y?x.reverse():x)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),y()):r()},n.range=function(t){return arguments.length?([c,l]=t,c=+c,l=+l,y()):[c,l]},n.rangeRound=function(t){return[c,l]=t,c=+c,l=+l,h=!0,y()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(h=!!t,y()):h},n.padding=function(t){return arguments.length?(f=Math.min(1,d=+t),y()):f},n.paddingInner=function(t){return arguments.length?(f=Math.min(1,t),y()):f},n.paddingOuter=function(t){return arguments.length?(d=+t,y()):d},n.align=function(t){return arguments.length?(_=Math.max(0,Math.min(1,t)),y()):_},n.copy=function(){return Xp(r(),[c,l]).round(h).paddingInner(f).paddingOuter(d).align(_)},Gp.apply(y(),arguments)}function jp(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return jp(e())},t}function Wp(){return jp(Xp.apply(null,arguments).paddingInner(1))}function Zp(t){return+t}var Kp=[0,1];function Jp(t){return t}function Qp(a,b){return(b-=a=+a)?function(t){return(t-a)/b}:function(t){return function(){return t}}(isNaN(b)?NaN:.5)}function ty(t,e,n){var r=t[0],o=t[1],c=e[0],l=e[1];return o<r?(r=Qp(o,r),c=n(l,c)):(r=Qp(r,o),c=n(c,l)),function(t){return c(r(t))}}function ey(t,e,n){var r=Math.min(t.length,e.length)-1,o=new Array(r),c=new Array(r),i=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<r;)o[i]=Qp(t[i],t[i+1]),c[i]=n(e[i],e[i+1]);return function(e){var i=y(t,e,1,r)-1;return c[i](o[i](e))}}function ny(source,t){return t.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown())}function iy(){var t,e,n,r,output,input,o=Kp,c=Kp,l=zi,h=Jp;function f(){var t=Math.min(o.length,c.length);return h!==Jp&&(h=function(a,b){var t;return a>b&&(t=a,a=b,b=t),function(t){return Math.max(a,Math.min(b,t))}}(o[0],o[t-1])),r=t>2?ey:ty,output=input=null,d}function d(e){return null==e||isNaN(e=+e)?n:(output||(output=r(o.map(t),c,l)))(t(h(e)))}return d.invert=function(n){return h(e((input||(input=r(c,o.map(t),Li)))(n)))},d.domain=function(t){return arguments.length?(o=Array.from(t,Zp),f()):o.slice()},d.range=function(t){return arguments.length?(c=Array.from(t),f()):c.slice()},d.rangeRound=function(t){return c=Array.from(t),l=Qg,f()},d.clamp=function(t){return arguments.length?(h=!!t||Jp,f()):h!==Jp},d.interpolate=function(t){return arguments.length?(l=t,f()):l},d.unknown=function(t){return arguments.length?(n=t,d):n},function(n,u){return t=n,e=u,f()}}function ry(){return iy()(Jp,Jp)}function sy(t,e,n,r){var o,c=at(t,e,n);switch((r=Lc(null==r?",f":r)).type){case"s":var l=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(o=qc(c,l))||(r.precision=o),Hc(r,l);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=Vc(c,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=Uc(c))||(r.precision=o-2*("%"===r.type))}return Fc(r)}function ay(t){var e=t.domain;return t.ticks=function(t){var n=e();return it(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return sy(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,o,c=e(),l=0,h=c.length-1,f=c[l],d=c[h],_=10;for(d<f&&(o=f,f=d,d=o,o=l,l=h,h=o);_-- >0;){if((o=st(f,d,n))===r)return c[l]=f,c[h]=d,e(c);if(o>0)f=Math.floor(f/o)*o,d=Math.ceil(d/o)*o;else{if(!(o<0))break;f=Math.ceil(f*o)/o,d=Math.floor(d*o)/o}r=o}return t},t}function oy(){var t=ry();return t.copy=function(){return ny(t,oy())},Gp.apply(t,arguments),ay(t)}function uy(t){var e;function n(t){return null==t||isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,Zp),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return uy(t).unknown(e)},t=arguments.length?Array.from(t,Zp):[0,1],ay(n)}function cy(t,e){var n,r=0,o=(t=t.slice()).length-1,c=t[r],l=t[o];return l<c&&(n=r,r=o,o=n,n=c,c=l,l=n),t[r]=e.floor(c),t[o]=e.ceil(l),t}function ly(t){return Math.log(t)}function hy(t){return Math.exp(t)}function fy(t){return-Math.log(-t)}function dy(t){return-Math.exp(-t)}function _y(t){return isFinite(t)?+("1e"+t):t<0?0:t}function gy(t){return function(e){return-t(-e)}}function py(t){var e,n,r=t(ly,hy),o=r.domain,base=10;function c(){return e=function(base){return base===Math.E?Math.log:10===base&&Math.log10||2===base&&Math.log2||(base=Math.log(base),function(t){return Math.log(t)/base})}(base),n=function(base){return 10===base?_y:base===Math.E?Math.exp:function(t){return Math.pow(base,t)}}(base),o()[0]<0?(e=gy(e),n=gy(n),t(fy,dy)):t(ly,hy),r}return r.base=function(t){return arguments.length?(base=+t,c()):base},r.domain=function(t){return arguments.length?(o(t),c()):o()},r.ticks=function(t){var r,c=o(),u=c[0],l=c[c.length-1];(r=l<u)&&(i=u,u=l,l=i);var p,h,f,i=e(u),d=e(l),_=null==t?10:+t,y=[];if(!(base%1)&&d-i<_){if(i=Math.floor(i),d=Math.ceil(d),u>0){for(;i<=d;++i)for(h=1,p=n(i);h<base;++h)if(!((f=p*h)<u)){if(f>l)break;y.push(f)}}else for(;i<=d;++i)for(h=base-1,p=n(i);h>=1;--h)if(!((f=p*h)<u)){if(f>l)break;y.push(f)}2*y.length<_&&(y=it(u,l,_))}else y=it(i,d,Math.min(d-i,_)).map(n);return r?y.reverse():y},r.tickFormat=function(t,o){if(null==o&&(o=10===base?".0e":","),"function"!=typeof o&&(o=Fc(o)),t===1/0)return o;null==t&&(t=10);var c=Math.max(1,base*t/r.ticks().length);return function(t){var i=t/n(Math.round(e(t)));return i*base<base-.5&&(i*=base),i<=c?o(t):""}},r.nice=function(){return o(cy(o(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function yy(){var t=py(iy()).domain([1,10]);return t.copy=function(){return ny(t,yy()).base(t.base())},Gp.apply(t,arguments),t}function my(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function by(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function vy(t){var e=1,n=t(my(e),by(e));return n.constant=function(n){return arguments.length?t(my(e=+n),by(e)):e},ay(n)}function xy(){var t=vy(iy());return t.copy=function(){return ny(t,xy()).constant(t.constant())},Gp.apply(t,arguments)}function wy(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Ay(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function My(t){return t<0?-t*t:t*t}function Cy(t){var e=t(Jp,Jp),n=1;function r(){return 1===n?t(Jp,Jp):.5===n?t(Ay,My):t(wy(n),wy(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},ay(e)}function Sy(){var t=Cy(iy());return t.copy=function(){return ny(t,Sy()).exponent(t.exponent())},Gp.apply(t,arguments),t}function ky(){return Sy.apply(null,arguments).exponent(.5)}function Ty(t){return Math.sign(t)*t*t}function Ey(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Ry(){var t,e=ry(),n=[0,1],r=!1;function o(n){var o=Ey(e(n));return isNaN(o)?t:r?Math.round(o):o}return o.invert=function(t){return e.invert(Ty(t))},o.domain=function(t){return arguments.length?(e.domain(t),o):e.domain()},o.range=function(t){return arguments.length?(e.range((n=Array.from(t,Zp)).map(Ty)),o):n.slice()},o.rangeRound=function(t){return o.range(t).round(!0)},o.round=function(t){return arguments.length?(r=!!t,o):r},o.clamp=function(t){return arguments.length?(e.clamp(t),o):e.clamp()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return Ry(e.domain(),n).round(r).clamp(e.clamp()).unknown(t)},Gp.apply(o,arguments),ay(o)}function Dy(){var t,e=[],n=[],r=[];function c(){var i=0,t=Math.max(1,n.length);for(r=new Array(t-1);++i<t;)r[i-1]=pt(e,i/t);return l}function l(e){return null==e||isNaN(e=+e)?t:n[y(r,e)]}return l.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},l.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(o),c()},l.range=function(t){return arguments.length?(n=Array.from(t),c()):n.slice()},l.unknown=function(e){return arguments.length?(t=e,l):t},l.quantiles=function(){return r.slice()},l.copy=function(){return Dy().domain(e).range(n).unknown(t)},Gp.apply(l,arguments)}function Ly(){var t,e=0,n=1,r=1,o=[.5],c=[0,1];function l(e){return null!=e&&e<=e?c[y(o,e,0,r)]:t}function h(){var i=-1;for(o=new Array(r);++i<r;)o[i]=((i+1)*n-(i-r)*e)/(r+1);return l}return l.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,h()):[e,n]},l.range=function(t){return arguments.length?(r=(c=Array.from(t)).length-1,h()):c.slice()},l.invertExtent=function(t){var i=c.indexOf(t);return i<0?[NaN,NaN]:i<1?[e,o[0]]:i>=r?[o[r-1],n]:[o[i-1],o[i]]},l.unknown=function(e){return arguments.length?(t=e,l):l},l.thresholds=function(){return o.slice()},l.copy=function(){return Ly().domain([e,n]).range(c).unknown(t)},Gp.apply(ay(l),arguments)}function Ny(){var t,e=[.5],n=[0,1],r=1;function o(o){return null!=o&&o<=o?n[y(e,o,0,r)]:t}return o.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),o):e.slice()},o.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),o):n.slice()},o.invertExtent=function(t){var i=n.indexOf(t);return[e[i-1],e[i]]},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return Ny().domain(e).range(n).unknown(t)},Gp.apply(o,arguments)}const Py=1e3,Oy=6e4,zy=36e5,By=864e5,Fy=6048e5,Hy=2592e6,$y=31536e6;var Yy=new Date,Iy=new Date;function Gy(t,e,n,r){function o(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return o.floor=function(e){return t(e=new Date(+e)),e},o.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},o.round=function(t){var e=o(t),n=o.ceil(t);return t-e<n-t?e:n},o.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},o.range=function(n,r,c){var l,h=[];if(n=o.ceil(n),c=null==c?1:Math.floor(c),!(n<r&&c>0))return h;do{h.push(l=new Date(+n)),e(n,c),t(n)}while(l<n&&n<r);return h},o.filter=function(n){return Gy((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(o.count=function(e,r){return Yy.setTime(+e),Iy.setTime(+r),t(Yy),t(Iy),Math.floor(n(Yy,Iy))},o.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?o.filter(r?function(e){return r(e)%t==0}:function(e){return o.count(0,e)%t==0}):o:null}),o}var Uy=Gy((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Uy.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Gy((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Uy:null};var qy=Uy,Vy=Uy.range,Xy=Gy((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*Py)}),(function(t,e){return(e-t)/Py}),(function(t){return t.getUTCSeconds()})),jy=Xy,Wy=Xy.range,Zy=Gy((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Py)}),(function(t,e){t.setTime(+t+e*Oy)}),(function(t,e){return(e-t)/Oy}),(function(t){return t.getMinutes()})),Ky=Zy,Jy=Zy.range,Qy=Gy((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Py-t.getMinutes()*Oy)}),(function(t,e){t.setTime(+t+e*zy)}),(function(t,e){return(e-t)/zy}),(function(t){return t.getHours()})),tm=Qy,nm=Qy.range,im=Gy((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Oy)/By),(t=>t.getDate()-1)),rm=im,sm=im.range;function am(i){return Gy((function(t){t.setDate(t.getDate()-(t.getDay()+7-i)%7),t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Oy)/Fy}))}var om=am(0),um=am(1),cm=am(2),lm=am(3),hm=am(4),fm=am(5),dm=am(6),_m=om.range,gm=um.range,pm=cm.range,ym=lm.range,mm=hm.range,bm=fm.range,vm=dm.range,xm=Gy((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),wm=xm,Am=xm.range,Mm=Gy((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Mm.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Gy((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Cm=Mm,Sm=Mm.range,km=Gy((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*Oy)}),(function(t,e){return(e-t)/Oy}),(function(t){return t.getUTCMinutes()})),Tm=km,Em=km.range,Rm=Gy((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*zy)}),(function(t,e){return(e-t)/zy}),(function(t){return t.getUTCHours()})),Dm=Rm,Lm=Rm.range,Nm=Gy((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/By}),(function(t){return t.getUTCDate()-1})),Pm=Nm,Om=Nm.range;function zm(i){return Gy((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-i)%7),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/Fy}))}var Bm=zm(0),Fm=zm(1),Hm=zm(2),$m=zm(3),Ym=zm(4),Im=zm(5),Gm=zm(6),Um=Bm.range,qm=Fm.range,Vm=Hm.range,Xm=$m.range,jm=Ym.range,Wm=Im.range,Zm=Gm.range,Km=Gy((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),Jm=Km,Qm=Km.range,tb=Gy((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));tb.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Gy((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var eb=tb,nb=tb.range;function ib(t,e,n,r,o,l){const h=[[jy,1,Py],[jy,5,5e3],[jy,15,15e3],[jy,30,3e4],[l,1,Oy],[l,5,3e5],[l,15,9e5],[l,30,18e5],[o,1,zy],[o,3,108e5],[o,6,216e5],[o,12,432e5],[r,1,By],[r,2,1728e5],[n,1,Fy],[e,1,Hy],[e,3,7776e6],[t,1,$y]];function f(e,n,r){const o=Math.abs(n-e)/r,i=c((([,,t])=>t)).right(h,o);if(i===h.length)return t.every(at(e/$y,n/$y,r));if(0===i)return qy.every(Math.max(at(e,n,r),1));const[l,f]=h[o/h[i-1][2]<h[i][2]/o?i-1:i];return l.every(f)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const o=n&&"function"==typeof n.range?n:f(t,e,n),c=o?o.range(t,+e+1):[];return r?c.reverse():c},f]}const[rb,sb]=ib(eb,Jm,Bm,Pm,Dm,Tm),[ab,ob]=ib(Cm,wm,om,rm,tm,Ky);function ub(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function cb(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function lb(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function hb(t){var e=t.dateTime,n=t.date,r=t.time,o=t.periods,c=t.days,l=t.shortDays,h=t.months,f=t.shortMonths,d=Ab(o),_=Mb(o),y=Ab(c),m=Mb(c),v=Ab(l),x=Mb(l),w=Ab(h),A=Mb(h),M=Ab(f),C=Mb(f),S={a:function(t){return l[t.getDay()]},A:function(t){return c[t.getDay()]},b:function(t){return f[t.getMonth()]},B:function(t){return h[t.getMonth()]},c:null,d:qb,e:qb,f:Zb,g:ov,G:cv,H:Vb,I:Xb,j:jb,L:Wb,m:Kb,M:Jb,p:function(t){return o[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Lv,s:Nv,S:Qb,u:tv,U:ev,V:iv,w:rv,W:sv,x:null,X:null,y:av,Y:uv,Z:lv,"%":Dv},k={a:function(t){return l[t.getUTCDay()]},A:function(t){return c[t.getUTCDay()]},b:function(t){return f[t.getUTCMonth()]},B:function(t){return h[t.getUTCMonth()]},c:null,d:hv,e:hv,f:pv,g:kv,G:Ev,H:fv,I:dv,j:_v,L:gv,m:yv,M:mv,p:function(t){return o[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Lv,s:Nv,S:bv,u:vv,U:xv,V:Av,w:Mv,W:Cv,x:null,X:null,y:Sv,Y:Tv,Z:Rv,"%":Dv},T={a:function(t,e,i){var n=v.exec(e.slice(i));return n?(t.w=x.get(n[0].toLowerCase()),i+n[0].length):-1},A:function(t,e,i){var n=y.exec(e.slice(i));return n?(t.w=m.get(n[0].toLowerCase()),i+n[0].length):-1},b:function(t,e,i){var n=M.exec(e.slice(i));return n?(t.m=C.get(n[0].toLowerCase()),i+n[0].length):-1},B:function(t,e,i){var n=w.exec(e.slice(i));return n?(t.m=A.get(n[0].toLowerCase()),i+n[0].length):-1},c:function(t,n,i){return D(t,e,n,i)},d:Ob,e:Ob,f:Yb,g:Db,G:Rb,H:Bb,I:Bb,j:zb,L:$b,m:Pb,M:Fb,p:function(t,e,i){var n=d.exec(e.slice(i));return n?(t.p=_.get(n[0].toLowerCase()),i+n[0].length):-1},q:Nb,Q:Gb,s:Ub,S:Hb,u:Sb,U:kb,V:Tb,w:Cb,W:Eb,x:function(t,e,i){return D(t,n,e,i)},X:function(t,e,i){return D(t,r,e,i)},y:Db,Y:Rb,Z:Lb,"%":Ib};function E(t,e){return function(n){var r,o,c,l=[],i=-1,h=0,f=t.length;for(n instanceof Date||(n=new Date(+n));++i<f;)37===t.charCodeAt(i)&&(l.push(t.slice(h,i)),null!=(o=yb[r=t.charAt(++i)])?r=t.charAt(++i):o="e"===r?" ":"0",(c=e[r])&&(r=c(n,o)),l.push(r),h=i+1);return l.push(t.slice(h,i)),l.join("")}}function R(t,e){return function(n){var r,o,c=lb(1900,void 0,1);if(D(c,t,n+="",0)!=n.length)return null;if("Q"in c)return new Date(c.Q);if("s"in c)return new Date(1e3*c.s+("L"in c?c.L:0));if(e&&!("Z"in c)&&(c.Z=0),"p"in c&&(c.H=c.H%12+12*c.p),void 0===c.m&&(c.m="q"in c?c.q:0),"V"in c){if(c.V<1||c.V>53)return null;"w"in c||(c.w=1),"Z"in c?(o=(r=cb(lb(c.y,0,1))).getUTCDay(),r=o>4||0===o?Fm.ceil(r):Fm(r),r=Pm.offset(r,7*(c.V-1)),c.y=r.getUTCFullYear(),c.m=r.getUTCMonth(),c.d=r.getUTCDate()+(c.w+6)%7):(o=(r=ub(lb(c.y,0,1))).getDay(),r=o>4||0===o?um.ceil(r):um(r),r=rm.offset(r,7*(c.V-1)),c.y=r.getFullYear(),c.m=r.getMonth(),c.d=r.getDate()+(c.w+6)%7)}else("W"in c||"U"in c)&&("w"in c||(c.w="u"in c?c.u%7:"W"in c?1:0),o="Z"in c?cb(lb(c.y,0,1)).getUTCDay():ub(lb(c.y,0,1)).getDay(),c.m=0,c.d="W"in c?(c.w+6)%7+7*c.W-(o+5)%7:c.w+7*c.U-(o+6)%7);return"Z"in c?(c.H+=c.Z/100|0,c.M+=c.Z%100,cb(c)):ub(c)}}function D(t,e,n,r){for(var o,c,i=0,l=e.length,h=n.length;i<l;){if(r>=h)return-1;if(37===(o=e.charCodeAt(i++))){if(o=e.charAt(i++),!(c=T[o in yb?e.charAt(i++):o])||(r=c(t,n,r))<0)return-1}else if(o!=n.charCodeAt(r++))return-1}return r}return S.x=E(n,S),S.X=E(r,S),S.c=E(e,S),k.x=E(n,k),k.X=E(r,k),k.c=E(e,k),{format:function(t){var e=E(t+="",S);return e.toString=function(){return t},e},parse:function(t){var p=R(t+="",!1);return p.toString=function(){return t},p},utcFormat:function(t){var e=E(t+="",k);return e.toString=function(){return t},e},utcParse:function(t){var p=R(t+="",!0);return p.toString=function(){return t},p}}}var fb,db,_b,gb,pb,yb={"-":"",_:" ",0:"0"},mb=/^\s*\d+/,bb=/^%/,vb=/[\\^$*+?|[\]().{}]/g;function xb(t,e,n){var r=t<0?"-":"",o=(r?-t:t)+"",c=o.length;return r+(c<n?new Array(n-c+1).join(e)+o:o)}function wb(s){return s.replace(vb,"\\$&")}function Ab(t){return new RegExp("^(?:"+t.map(wb).join("|")+")","i")}function Mb(t){return new Map(t.map(((t,i)=>[t.toLowerCase(),i])))}function Cb(t,e,i){var n=mb.exec(e.slice(i,i+1));return n?(t.w=+n[0],i+n[0].length):-1}function Sb(t,e,i){var n=mb.exec(e.slice(i,i+1));return n?(t.u=+n[0],i+n[0].length):-1}function kb(t,e,i){var n=mb.exec(e.slice(i,i+2));return n?(t.U=+n[0],i+n[0].length):-1}function Tb(t,e,i){var n=mb.exec(e.slice(i,i+2));return n?(t.V=+n[0],i+n[0].length):-1}function Eb(t,e,i){var n=mb.exec(e.slice(i,i+2));return n?(t.W=+n[0],i+n[0].length):-1}function Rb(t,e,i){var n=mb.exec(e.slice(i,i+4));return n?(t.y=+n[0],i+n[0].length):-1}function Db(t,e,i){var n=mb.exec(e.slice(i,i+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function Lb(t,e,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function Nb(t,e,i){var n=mb.exec(e.slice(i,i+1));return n?(t.q=3*n[0]-3,i+n[0].length):-1}function Pb(t,e,i){var n=mb.exec(e.slice(i,i+2));return n?(t.m=n[0]-1,i+n[0].length):-1}function Ob(t,e,i){var n=mb.exec(e.slice(i,i+2));return n?(t.d=+n[0],i+n[0].length):-1}function zb(t,e,i){var n=mb.exec(e.slice(i,i+3));return n?(t.m=0,t.d=+n[0],i+n[0].length):-1}function Bb(t,e,i){var n=mb.exec(e.slice(i,i+2));return n?(t.H=+n[0],i+n[0].length):-1}function Fb(t,e,i){var n=mb.exec(e.slice(i,i+2));return n?(t.M=+n[0],i+n[0].length):-1}function Hb(t,e,i){var n=mb.exec(e.slice(i,i+2));return n?(t.S=+n[0],i+n[0].length):-1}function $b(t,e,i){var n=mb.exec(e.slice(i,i+3));return n?(t.L=+n[0],i+n[0].length):-1}function Yb(t,e,i){var n=mb.exec(e.slice(i,i+6));return n?(t.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function Ib(t,e,i){var n=bb.exec(e.slice(i,i+1));return n?i+n[0].length:-1}function Gb(t,e,i){var n=mb.exec(e.slice(i));return n?(t.Q=+n[0],i+n[0].length):-1}function Ub(t,e,i){var n=mb.exec(e.slice(i));return n?(t.s=+n[0],i+n[0].length):-1}function qb(t,p){return xb(t.getDate(),p,2)}function Vb(t,p){return xb(t.getHours(),p,2)}function Xb(t,p){return xb(t.getHours()%12||12,p,2)}function jb(t,p){return xb(1+rm.count(Cm(t),t),p,3)}function Wb(t,p){return xb(t.getMilliseconds(),p,3)}function Zb(t,p){return Wb(t,p)+"000"}function Kb(t,p){return xb(t.getMonth()+1,p,2)}function Jb(t,p){return xb(t.getMinutes(),p,2)}function Qb(t,p){return xb(t.getSeconds(),p,2)}function tv(t){var e=t.getDay();return 0===e?7:e}function ev(t,p){return xb(om.count(Cm(t)-1,t),p,2)}function nv(t){var e=t.getDay();return e>=4||0===e?hm(t):hm.ceil(t)}function iv(t,p){return t=nv(t),xb(hm.count(Cm(t),t)+(4===Cm(t).getDay()),p,2)}function rv(t){return t.getDay()}function sv(t,p){return xb(um.count(Cm(t)-1,t),p,2)}function av(t,p){return xb(t.getFullYear()%100,p,2)}function ov(t,p){return xb((t=nv(t)).getFullYear()%100,p,2)}function uv(t,p){return xb(t.getFullYear()%1e4,p,4)}function cv(t,p){var e=t.getDay();return xb((t=e>=4||0===e?hm(t):hm.ceil(t)).getFullYear()%1e4,p,4)}function lv(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+xb(e/60|0,"0",2)+xb(e%60,"0",2)}function hv(t,p){return xb(t.getUTCDate(),p,2)}function fv(t,p){return xb(t.getUTCHours(),p,2)}function dv(t,p){return xb(t.getUTCHours()%12||12,p,2)}function _v(t,p){return xb(1+Pm.count(eb(t),t),p,3)}function gv(t,p){return xb(t.getUTCMilliseconds(),p,3)}function pv(t,p){return gv(t,p)+"000"}function yv(t,p){return xb(t.getUTCMonth()+1,p,2)}function mv(t,p){return xb(t.getUTCMinutes(),p,2)}function bv(t,p){return xb(t.getUTCSeconds(),p,2)}function vv(t){var e=t.getUTCDay();return 0===e?7:e}function xv(t,p){return xb(Bm.count(eb(t)-1,t),p,2)}function wv(t){var e=t.getUTCDay();return e>=4||0===e?Ym(t):Ym.ceil(t)}function Av(t,p){return t=wv(t),xb(Ym.count(eb(t),t)+(4===eb(t).getUTCDay()),p,2)}function Mv(t){return t.getUTCDay()}function Cv(t,p){return xb(Fm.count(eb(t)-1,t),p,2)}function Sv(t,p){return xb(t.getUTCFullYear()%100,p,2)}function kv(t,p){return xb((t=wv(t)).getUTCFullYear()%100,p,2)}function Tv(t,p){return xb(t.getUTCFullYear()%1e4,p,4)}function Ev(t,p){var e=t.getUTCDay();return xb((t=e>=4||0===e?Ym(t):Ym.ceil(t)).getUTCFullYear()%1e4,p,4)}function Rv(){return"+0000"}function Dv(){return"%"}function Lv(t){return+t}function Nv(t){return Math.floor(+t/1e3)}function Pv(t){return fb=hb(t),db=fb.format,_b=fb.parse,gb=fb.utcFormat,pb=fb.utcParse,fb}function Ov(t){return new Date(t)}function zv(t){return t instanceof Date?+t:+new Date(+t)}function Bv(t,e,n,r,o,c,l,h,f,d){var _=ry(),y=_.invert,m=_.domain,v=d(".%L"),x=d(":%S"),w=d("%I:%M"),A=d("%I %p"),M=d("%a %d"),C=d("%b %d"),S=d("%B"),k=d("%Y");function T(t){return(f(t)<t?v:h(t)<t?x:l(t)<t?w:c(t)<t?A:r(t)<t?o(t)<t?M:C:n(t)<t?S:k)(t)}return _.invert=function(t){return new Date(y(t))},_.domain=function(t){return arguments.length?m(Array.from(t,zv)):m().map(Ov)},_.ticks=function(e){var n=m();return t(n[0],n[n.length-1],null==e?10:e)},_.tickFormat=function(t,e){return null==e?T:d(e)},_.nice=function(t){var n=m();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?m(cy(n,t)):_},_.copy=function(){return ny(_,Bv(t,e,n,r,o,c,l,h,f,d))},_}function time(){return Gp.apply(Bv(ab,ob,Cm,wm,om,rm,tm,Ky,jy,db).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Fv(){return Gp.apply(Bv(rb,sb,eb,Jm,Bm,Pm,Dm,Tm,jy,gb).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Hv(){var t,e,n,r,o,c=0,l=1,h=Jp,f=!1;function d(e){return null==e||isNaN(e=+e)?o:h(0===n?.5:(e=(r(e)-t)*n,f?Math.max(0,Math.min(1,e)):e))}function _(t){return function(e){var n,r;return arguments.length?([n,r]=e,h=t(n,r),d):[h(0),h(1)]}}return d.domain=function(o){return arguments.length?([c,l]=o,t=r(c=+c),e=r(l=+l),n=t===e?0:1/(e-t),d):[c,l]},d.clamp=function(t){return arguments.length?(f=!!t,d):f},d.interpolator=function(t){return arguments.length?(h=t,d):h},d.range=_(zi),d.rangeRound=_(Qg),d.unknown=function(t){return arguments.length?(o=t,d):o},function(o){return r=o,t=o(c),e=o(l),n=t===e?0:1/(e-t),d}}function $v(source,t){return t.domain(source.domain()).interpolator(source.interpolator()).clamp(source.clamp()).unknown(source.unknown())}function Yv(){var t=ay(Hv()(Jp));return t.copy=function(){return $v(t,Yv())},Up.apply(t,arguments)}function Iv(){var t=py(Hv()).domain([1,10]);return t.copy=function(){return $v(t,Iv()).base(t.base())},Up.apply(t,arguments)}function Gv(){var t=vy(Hv());return t.copy=function(){return $v(t,Gv()).constant(t.constant())},Up.apply(t,arguments)}function Uv(){var t=Cy(Hv());return t.copy=function(){return $v(t,Uv()).exponent(t.exponent())},Up.apply(t,arguments)}function qv(){return Uv.apply(null,arguments).exponent(.5)}function Vv(){var t=[],e=Jp;function n(n){if(null!=n&&!isNaN(n=+n))return e((y(t,n,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(o),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.range=function(){return t.map(((n,i)=>e(i/(t.length-1))))},n.quantiles=function(e){return Array.from({length:e+1},((n,i)=>gt(t,i/e)))},n.copy=function(){return Vv(e).domain(t)},Up.apply(n,arguments)}function Xv(){var t,e,n,r,o,c,l,h=0,f=.5,d=1,s=1,_=Jp,y=!1;function m(t){return isNaN(t=+t)?l:(t=.5+((t=+c(t))-e)*(s*t<s*e?r:o),_(y?Math.max(0,Math.min(1,t)):t))}function v(t){return function(e){var n,r,o;return arguments.length?([n,r,o]=e,_=dp(t,[n,r,o]),m):[_(0),_(.5),_(1)]}}return m.domain=function(l){return arguments.length?([h,f,d]=l,t=c(h=+h),e=c(f=+f),n=c(d=+d),r=t===e?0:.5/(e-t),o=e===n?0:.5/(n-e),s=e<t?-1:1,m):[h,f,d]},m.clamp=function(t){return arguments.length?(y=!!t,m):y},m.interpolator=function(t){return arguments.length?(_=t,m):_},m.range=v(zi),m.rangeRound=v(Qg),m.unknown=function(t){return arguments.length?(l=t,m):l},function(l){return c=l,t=l(h),e=l(f),n=l(d),r=t===e?0:.5/(e-t),o=e===n?0:.5/(n-e),s=e<t?-1:1,m}}function jv(){var t=ay(Xv()(Jp));return t.copy=function(){return $v(t,jv())},Up.apply(t,arguments)}function Wv(){var t=py(Xv()).domain([.1,1,10]);return t.copy=function(){return $v(t,Wv()).base(t.base())},Up.apply(t,arguments)}function Zv(){var t=vy(Xv());return t.copy=function(){return $v(t,Zv()).constant(t.constant())},Up.apply(t,arguments)}function Kv(){var t=Cy(Xv());return t.copy=function(){return $v(t,Kv()).exponent(t.exponent())},Up.apply(t,arguments)}function Jv(){return Kv.apply(null,arguments).exponent(.5)}function Qv(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n}Pv({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var tx=Qv("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),ex=Qv("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),nx=Qv("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),ix=Qv("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),rx=Qv("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),sx=Qv("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),ax=Qv("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),ox=Qv("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),ux=Qv("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),cx=Qv("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),lx=t=>Ci(t[t.length-1]),hx=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Qv),fx=lx(hx),dx=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Qv),_x=lx(dx),gx=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Qv),px=lx(gx),yx=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Qv),mx=lx(yx),bx=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Qv),vx=lx(bx),xx=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Qv),wx=lx(xx),Ax=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Qv),Mx=lx(Ax),Cx=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Qv),Sx=lx(Cx),kx=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Qv),Tx=lx(kx),Ex=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Qv),Rx=lx(Ex),Dx=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Qv),Lx=lx(Dx),Nx=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Qv),Px=lx(Nx),Ox=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Qv),zx=lx(Ox),Bx=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Qv),Fx=lx(Bx),Hx=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Qv),$x=lx(Hx),Yx=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Qv),Ix=lx(Yx),Gx=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Qv),Ux=lx(Gx),qx=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Qv),Vx=lx(qx),Xx=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Qv),jx=lx(Xx),Wx=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Qv),Zx=lx(Wx),Kx=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Qv),Jx=lx(Kx),Qx=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Qv),tw=lx(Qx),ew=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Qv),nw=lx(ew),iw=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Qv),rw=lx(iw),sw=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Qv),aw=lx(sw),ow=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Qv),uw=lx(ow),cw=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Qv),lw=lx(cw);function hw(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"}var fw=fp(Ua(300,.5,0),Ua(-240,.5,1)),dw=fp(Ua(-100,.75,.35),Ua(80,1.5,.8)),_w=fp(Ua(260,.75,.35),Ua(80,1.5,.8)),gw=Ua();function pw(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return gw.h=360*t-100,gw.s=1.5-1.5*e,gw.l=.8-.9*e,gw+""}var yw=ri(),mw=Math.PI/3,bw=2*Math.PI/3;function vw(t){var e;return t=(.5-t)*Math.PI,yw.r=255*(e=Math.sin(t))*e,yw.g=255*(e=Math.sin(t+mw))*e,yw.b=255*(e=Math.sin(t+bw))*e,yw+""}function xw(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"}function ww(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var Aw=ww(Qv("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Mw=ww(Qv("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Cw=ww(Qv("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Sw=ww(Qv("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function kw(t){return Dn(pn(t).call(document.documentElement))}var Tw=0;function Ew(){return new Rw}function Rw(){this._="@"+(++Tw).toString(36)}function Dw(t,e){return t.target&&(t=Bi(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>Fi(t,e)))}function Lw(t){return"string"==typeof t?new Tn([document.querySelectorAll(t)],[document.documentElement]):new Tn([null==t?[]:me(t)],kn)}function Nw(t){return function(){return t}}Rw.prototype=Ew.prototype={constructor:Rw,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var Pw=Math.abs,Ow=Math.atan2,zw=Math.cos,Bw=Math.max,Fw=Math.min,Hw=Math.sin,$w=Math.sqrt,Yw=1e-12,Iw=Math.PI,Gw=Iw/2,Uw=2*Iw;function qw(t){return t>1?0:t<-1?Iw:Math.acos(t)}function Vw(t){return t>=1?Gw:t<=-1?-Gw:Math.asin(t)}function Xw(t){return t.innerRadius}function jw(t){return t.outerRadius}function Ww(t){return t.startAngle}function Zw(t){return t.endAngle}function Kw(t){return t&&t.padAngle}function Jw(t,e,n,r,o,c,l,h){var f=n-t,d=r-e,_=l-o,y=h-c,m=y*f-_*d;if(!(m*m<Yw))return[t+(m=(_*(e-c)-y*(t-o))/m)*f,e+m*d]}function Qw(t,e,n,r,o,c,l){var h=t-n,f=e-r,d=(l?c:-c)/$w(h*h+f*f),_=d*f,y=-d*h,m=t+_,v=e+y,x=n+_,w=r+y,A=(m+x)/2,M=(v+w)/2,C=x-m,S=w-v,k=C*C+S*S,T=o-c,E=m*w-x*v,R=(S<0?-1:1)*$w(Bw(0,T*T*k-E*E)),D=(E*S-C*R)/k,L=(-E*C-S*R)/k,N=(E*S+C*R)/k,P=(-E*C+S*R)/k,O=D-A,z=L-M,B=N-A,F=P-M;return O*O+z*z>B*B+F*F&&(D=N,L=P),{cx:D,cy:L,x01:-_,y01:-y,x11:D*(o/T-1),y11:L*(o/T-1)}}function tA(){var t=Xw,e=jw,n=Nw(0),r=null,o=Ww,c=Zw,l=Kw,h=null;function f(){var f,d,_=+t.apply(this,arguments),y=+e.apply(this,arguments),m=o.apply(this,arguments)-Gw,v=c.apply(this,arguments)-Gw,x=Pw(v-m),w=v>m;if(h||(h=f=na()),y<_&&(d=y,y=_,_=d),y>Yw)if(x>Uw-Yw)h.moveTo(y*zw(m),y*Hw(m)),h.arc(0,0,y,m,v,!w),_>Yw&&(h.moveTo(_*zw(v),_*Hw(v)),h.arc(0,0,_,v,m,w));else{var A,M,C=m,S=v,k=m,T=v,E=x,R=x,D=l.apply(this,arguments)/2,rp=D>Yw&&(r?+r.apply(this,arguments):$w(_*_+y*y)),L=Fw(Pw(y-_)/2,+n.apply(this,arguments)),N=L,P=L;if(rp>Yw){var O=Vw(rp/_*Hw(D)),z=Vw(rp/y*Hw(D));(E-=2*O)>Yw?(k+=O*=w?1:-1,T-=O):(E=0,k=T=(m+v)/2),(R-=2*z)>Yw?(C+=z*=w?1:-1,S-=z):(R=0,C=S=(m+v)/2)}var B=y*zw(C),F=y*Hw(C),H=_*zw(T),$=_*Hw(T);if(L>Yw){var Y,I=y*zw(S),G=y*Hw(S),U=_*zw(k),V=_*Hw(k);if(x<Iw&&(Y=Jw(B,F,U,V,I,G,H,$))){var X=B-Y[0],j=F-Y[1],W=I-Y[0],Z=G-Y[1],K=1/Hw(qw((X*W+j*Z)/($w(X*X+j*j)*$w(W*W+Z*Z)))/2),J=$w(Y[0]*Y[0]+Y[1]*Y[1]);N=Fw(L,(_-J)/(K-1)),P=Fw(L,(y-J)/(K+1))}}R>Yw?P>Yw?(A=Qw(U,V,B,F,y,P,w),M=Qw(I,G,H,$,y,P,w),h.moveTo(A.cx+A.x01,A.cy+A.y01),P<L?h.arc(A.cx,A.cy,P,Ow(A.y01,A.x01),Ow(M.y01,M.x01),!w):(h.arc(A.cx,A.cy,P,Ow(A.y01,A.x01),Ow(A.y11,A.x11),!w),h.arc(0,0,y,Ow(A.cy+A.y11,A.cx+A.x11),Ow(M.cy+M.y11,M.cx+M.x11),!w),h.arc(M.cx,M.cy,P,Ow(M.y11,M.x11),Ow(M.y01,M.x01),!w))):(h.moveTo(B,F),h.arc(0,0,y,C,S,!w)):h.moveTo(B,F),_>Yw&&E>Yw?N>Yw?(A=Qw(H,$,I,G,_,-N,w),M=Qw(B,F,U,V,_,-N,w),h.lineTo(A.cx+A.x01,A.cy+A.y01),N<L?h.arc(A.cx,A.cy,N,Ow(A.y01,A.x01),Ow(M.y01,M.x01),!w):(h.arc(A.cx,A.cy,N,Ow(A.y01,A.x01),Ow(A.y11,A.x11),!w),h.arc(0,0,_,Ow(A.cy+A.y11,A.cx+A.x11),Ow(M.cy+M.y11,M.cx+M.x11),w),h.arc(M.cx,M.cy,N,Ow(M.y11,M.x11),Ow(M.y01,M.x01),!w))):h.arc(0,0,_,T,k,w):h.lineTo(H,$)}else h.moveTo(0,0);if(h.closePath(),f)return h=null,f+""||null}return f.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,a=(+o.apply(this,arguments)+ +c.apply(this,arguments))/2-Iw/2;return[zw(a)*n,Hw(a)*n]},f.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Nw(+e),f):t},f.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Nw(+t),f):e},f.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Nw(+t),f):n},f.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Nw(+t),f):r},f.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:Nw(+t),f):o},f.endAngle=function(t){return arguments.length?(c="function"==typeof t?t:Nw(+t),f):c},f.padAngle=function(t){return arguments.length?(l="function"==typeof t?t:Nw(+t),f):l},f.context=function(t){return arguments.length?(h=null==t?null:t,f):h},f}var eA=Array.prototype.slice;function nA(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function iA(t){this._context=t}function rA(t){return new iA(t)}function sA(p){return p[0]}function aA(p){return p[1]}function oA(t,e){var n=Nw(!0),r=null,o=rA,output=null;function line(data){var i,c,l,h=(data=nA(data)).length,f=!1;for(null==r&&(output=o(l=na())),i=0;i<=h;++i)!(i<h&&n(c=data[i],i,data))===f&&((f=!f)?output.lineStart():output.lineEnd()),f&&output.point(+t(c,i,data),+e(c,i,data));if(l)return output=null,l+""||null}return t="function"==typeof t?t:void 0===t?sA:Nw(t),e="function"==typeof e?e:void 0===e?aA:Nw(e),line.x=function(e){return arguments.length?(t="function"==typeof e?e:Nw(+e),line):t},line.y=function(t){return arguments.length?(e="function"==typeof t?t:Nw(+t),line):e},line.defined=function(t){return arguments.length?(n="function"==typeof t?t:Nw(!!t),line):n},line.curve=function(t){return arguments.length?(o=t,null!=r&&(output=o(r)),line):o},line.context=function(t){return arguments.length?(null==t?r=output=null:output=o(r=t),line):r},line}function uA(t,e,n){var r=null,o=Nw(!0),c=null,l=rA,output=null;function area(data){var i,h,f,d,_,y=(data=nA(data)).length,m=!1,v=new Array(y),x=new Array(y);for(null==c&&(output=l(_=na())),i=0;i<=y;++i){if(!(i<y&&o(d=data[i],i,data))===m)if(m=!m)h=i,output.areaStart(),output.lineStart();else{for(output.lineEnd(),output.lineStart(),f=i-1;f>=h;--f)output.point(v[f],x[f]);output.lineEnd(),output.areaEnd()}m&&(v[i]=+t(d,i,data),x[i]=+e(d,i,data),output.point(r?+r(d,i,data):v[i],n?+n(d,i,data):x[i]))}if(_)return output=null,_+""||null}function h(){return oA().defined(o).curve(l).context(c)}return t="function"==typeof t?t:void 0===t?sA:Nw(+t),e="function"==typeof e?e:Nw(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?aA:Nw(+n),area.x=function(e){return arguments.length?(t="function"==typeof e?e:Nw(+e),r=null,area):t},area.x0=function(e){return arguments.length?(t="function"==typeof e?e:Nw(+e),area):t},area.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Nw(+t),area):r},area.y=function(t){return arguments.length?(e="function"==typeof t?t:Nw(+t),n=null,area):e},area.y0=function(t){return arguments.length?(e="function"==typeof t?t:Nw(+t),area):e},area.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:Nw(+t),area):n},area.lineX0=area.lineY0=function(){return h().x(t).y(e)},area.lineY1=function(){return h().x(t).y(n)},area.lineX1=function(){return h().x(r).y(e)},area.defined=function(t){return arguments.length?(o="function"==typeof t?t:Nw(!!t),area):o},area.curve=function(t){return arguments.length?(l=t,null!=c&&(output=l(c)),area):l},area.context=function(t){return arguments.length?(null==t?c=output=null:output=l(c=t),area):c},area}function cA(a,b){return b<a?-1:b>a?1:b>=a?0:NaN}function lA(t){return t}function hA(){var t=lA,e=cA,n=null,r=Nw(0),o=Nw(Uw),c=Nw(0);function l(data){var i,l,h,f,d,_=(data=nA(data)).length,y=0,m=new Array(_),v=new Array(_),x=+r.apply(this,arguments),w=Math.min(Uw,Math.max(-Uw,o.apply(this,arguments)-x)),p=Math.min(Math.abs(w)/_,c.apply(this,arguments)),A=p*(w<0?-1:1);for(i=0;i<_;++i)(d=v[m[i]=i]=+t(data[i],i,data))>0&&(y+=d);for(null!=e?m.sort((function(i,t){return e(v[i],v[t])})):null!=n&&m.sort((function(i,t){return n(data[i],data[t])})),i=0,h=y?(w-_*A)/y:0;i<_;++i,x=f)l=m[i],f=x+((d=v[l])>0?d*h:0)+A,v[l]={data:data[l],index:i,value:d,startAngle:x,endAngle:f,padAngle:p};return v}return l.value=function(e){return arguments.length?(t="function"==typeof e?e:Nw(+e),l):t},l.sortValues=function(t){return arguments.length?(e=t,n=null,l):e},l.sort=function(t){return arguments.length?(n=t,e=null,l):n},l.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Nw(+t),l):r},l.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Nw(+t),l):o},l.padAngle=function(t){return arguments.length?(c="function"==typeof t?t:Nw(+t),l):c},l}iA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var fA=_A(rA);function dA(t){this._curve=t}function _A(t){function e(e){return new dA(t(e))}return e._curve=t,e}function gA(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(_A(t)):e()._curve},t}function pA(){return gA(oA().curve(fA))}function yA(){var a=uA().curve(fA),t=a.curve,e=a.lineX0,n=a.lineX1,r=a.lineY0,o=a.lineY1;return a.angle=a.x,delete a.x,a.startAngle=a.x0,delete a.x0,a.endAngle=a.x1,delete a.x1,a.radius=a.y,delete a.y,a.innerRadius=a.y0,delete a.y0,a.outerRadius=a.y1,delete a.y1,a.lineStartAngle=function(){return gA(e())},delete a.lineX0,a.lineEndAngle=function(){return gA(n())},delete a.lineX1,a.lineInnerRadius=function(){return gA(r())},delete a.lineY0,a.lineOuterRadius=function(){return gA(o())},delete a.lineY1,a.curve=function(e){return arguments.length?t(_A(e)):t()._curve},a}function mA(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}function bA(t){return t.source}function vA(t){return t.target}function xA(t){var source=bA,e=vA,n=sA,r=aA,o=null;function link(){var c,l=eA.call(arguments),s=source.apply(this,l),h=e.apply(this,l);if(o||(o=c=na()),t(o,+n.apply(this,(l[0]=s,l)),+r.apply(this,l),+n.apply(this,(l[0]=h,l)),+r.apply(this,l)),c)return o=null,c+""||null}return link.source=function(t){return arguments.length?(source=t,link):source},link.target=function(t){return arguments.length?(e=t,link):e},link.x=function(t){return arguments.length?(n="function"==typeof t?t:Nw(+t),link):n},link.y=function(t){return arguments.length?(r="function"==typeof t?t:Nw(+t),link):r},link.context=function(t){return arguments.length?(o=null==t?null:t,link):o},link}function wA(t,e,n,r,o){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,o,r,o)}function AA(t,e,n,r,o){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+o)/2,r,n,r,o)}function MA(t,e,n,r,o){var c=mA(e,n),l=mA(e,n=(n+o)/2),h=mA(r,n),f=mA(r,o);t.moveTo(c[0],c[1]),t.bezierCurveTo(l[0],l[1],h[0],h[1],f[0],f[1])}function CA(){return xA(wA)}function SA(){return xA(AA)}function kA(){var t=xA(MA);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}dA.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(a,t){this._curve.point(t*Math.sin(a),t*-Math.cos(a))}};var TA={draw:function(t,e){var n=Math.sqrt(e/Iw);t.moveTo(n,0),t.arc(0,0,n,0,Uw)}},EA={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},RA=Math.sqrt(1/3),DA=2*RA,LA={draw:function(t,e){var n=Math.sqrt(e/DA),r=n*RA;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},NA=Math.sin(Iw/10)/Math.sin(7*Iw/10),PA=Math.sin(Uw/10)*NA,OA=-Math.cos(Uw/10)*NA,zA={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=PA*n,o=OA*n;t.moveTo(0,-n),t.lineTo(r,o);for(var i=1;i<5;++i){var a=Uw*i/5,c=Math.cos(a),s=Math.sin(a);t.lineTo(s*n,-c*n),t.lineTo(c*r-s*o,s*r+c*o)}t.closePath()}},BA={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},FA=Math.sqrt(3),HA={draw:function(t,e){var n=-Math.sqrt(e/(3*FA));t.moveTo(0,2*n),t.lineTo(-FA*n,-n),t.lineTo(FA*n,-n),t.closePath()}},$A=-.5,s=Math.sqrt(3)/2,YA=1/Math.sqrt(12),IA=3*(YA/2+1),GA={draw:function(t,e){var n=Math.sqrt(e/IA),r=n/2,o=n*YA,c=r,l=n*YA+n,h=-c,f=l;t.moveTo(r,o),t.lineTo(c,l),t.lineTo(h,f),t.lineTo($A*r-s*o,s*r+$A*o),t.lineTo($A*c-s*l,s*c+$A*l),t.lineTo($A*h-s*f,s*h+$A*f),t.lineTo($A*r+s*o,$A*o-s*r),t.lineTo($A*c+s*l,$A*l-s*c),t.lineTo($A*h+s*f,$A*f-s*h),t.closePath()}},UA=[TA,EA,LA,BA,zA,HA,GA];function symbol(t,e){var n=null;function symbol(){var r;if(n||(n=r=na()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return t="function"==typeof t?t:Nw(t||TA),e="function"==typeof e?e:Nw(void 0===e?64:+e),symbol.type=function(e){return arguments.length?(t="function"==typeof e?e:Nw(e),symbol):t},symbol.size=function(t){return arguments.length?(e="function"==typeof t?t:Nw(+t),symbol):e},symbol.context=function(t){return arguments.length?(n=null==t?null:t,symbol):n},symbol}function qA(){}function VA(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function XA(t){this._context=t}function jA(t){return new XA(t)}function WA(t){this._context=t}function ZA(t){return new WA(t)}function KA(t){this._context=t}function JA(t){return new KA(t)}XA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:VA(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:VA(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},WA.prototype={areaStart:qA,areaEnd:qA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:VA(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},KA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:VA(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};class QA{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}function tM(t){return new QA(t,!0)}function eM(t){return new QA(t,!1)}function nM(t,e){this._basis=new XA(t),this._beta=e}nM.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,o=t[0],c=e[0],l=t[n]-o,h=e[n]-c,i=-1;++i<=n;)r=i/n,this._basis.point(this._beta*t[i]+(1-this._beta)*(o+r*l),this._beta*e[i]+(1-this._beta)*(c+r*h));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var iM=function t(e){function n(t){return 1===e?new XA(t):new nM(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function rM(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function sM(t,e){this._context=t,this._k=(1-e)/6}sM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:rM(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:rM(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var aM=function t(e){function n(t){return new sM(t,e)}return n.tension=function(e){return t(+e)},n}(0);function oM(t,e){this._context=t,this._k=(1-e)/6}oM.prototype={areaStart:qA,areaEnd:qA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:rM(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var uM=function t(e){function n(t){return new oM(t,e)}return n.tension=function(e){return t(+e)},n}(0);function cM(t,e){this._context=t,this._k=(1-e)/6}cM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rM(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var lM=function t(e){function n(t){return new cM(t,e)}return n.tension=function(e){return t(+e)},n}(0);function hM(t,e,n){var r=t._x1,o=t._y1,c=t._x2,l=t._y2;if(t._l01_a>Yw){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,h=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/h,o=(o*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/h}if(t._l23_a>Yw){var b=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);c=(c*b+t._x1*t._l23_2a-e*t._l12_2a)/f,l=(l*b+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(r,o,c,l,t._x2,t._y2)}function fM(t,e){this._context=t,this._alpha=e}fM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:hM(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var dM=function t(e){function n(t){return e?new fM(t,e):new sM(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function _M(t,e){this._context=t,this._alpha=e}_M.prototype={areaStart:qA,areaEnd:qA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:hM(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var gM=function t(e){function n(t){return e?new _M(t,e):new oM(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function pM(t,e){this._context=t,this._alpha=e}pM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:hM(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var yM=function t(e){function n(t){return e?new pM(t,e):new cM(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function mM(t){this._context=t}function bM(t){return new mM(t)}function vM(t){return t<0?-1:1}function xM(t,e,n){var r=t._x1-t._x0,h1=e-t._x1,o=(t._y1-t._y0)/(r||h1<0&&-0),c=(n-t._y1)/(h1||r<0&&-0),p=(o*h1+c*r)/(r+h1);return(vM(o)+vM(c))*Math.min(Math.abs(o),Math.abs(c),.5*Math.abs(p))||0}function wM(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function AM(t,e,n){var r=t._x0,o=t._y0,c=t._x1,l=t._y1,h=(c-r)/3;t._context.bezierCurveTo(r+h,o+h*e,c-h,l-h*n,c,l)}function MM(t){this._context=t}function CM(t){this._context=new SM(t)}function SM(t){this._context=t}function kM(t){return new MM(t)}function TM(t){return new CM(t)}function EM(t){this._context=t}function RM(t){var i,e,n=t.length-1,a=new Array(n),b=new Array(n),r=new Array(n);for(a[0]=0,b[0]=2,r[0]=t[0]+2*t[1],i=1;i<n-1;++i)a[i]=1,b[i]=4,r[i]=4*t[i]+2*t[i+1];for(a[n-1]=2,b[n-1]=7,r[n-1]=8*t[n-1]+t[n],i=1;i<n;++i)e=a[i]/b[i-1],b[i]-=e,r[i]-=e*r[i-1];for(a[n-1]=r[n-1]/b[n-1],i=n-2;i>=0;--i)a[i]=(r[i]-a[i+1])/b[i];for(b[n-1]=(t[n]+a[n-1])/2,i=0;i<n-1;++i)b[i]=2*t[i+1]-a[i+1];return[a,b]}function DM(t){return new EM(t)}function LM(t,e){this._context=t,this._t=e}function NM(t){return new LM(t,.5)}function PM(t){return new LM(t,0)}function OM(t){return new LM(t,1)}function zM(t,e){if((o=t.length)>1)for(var n,r,o,i=1,c=t[e[0]],l=c.length;i<o;++i)for(r=c,c=t[e[i]],n=0;n<l;++n)c[n][1]+=c[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function BM(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function FM(t,e){return t[e]}function HM(t){const e=[];return e.key=t,e}function $M(){var t=Nw([]),e=BM,n=zM,r=FM;function o(data){var i,o,c=Array.from(t.apply(this,arguments),HM),l=c.length,h=-1;for(const t of data)for(i=0,++h;i<l;++i)(c[i][h]=[0,+r(t,c[i].key,h,data)]).data=t;for(i=0,o=nA(e(c));i<l;++i)c[o[i]].index=i;return n(c,o),c}return o.keys=function(e){return arguments.length?(t="function"==typeof e?e:Nw(Array.from(e)),o):t},o.value=function(t){return arguments.length?(r="function"==typeof t?t:Nw(+t),o):r},o.order=function(t){return arguments.length?(e=null==t?BM:"function"==typeof t?t:Nw(Array.from(t)),o):e},o.offset=function(t){return arguments.length?(n=null==t?zM:t,o):n},o}function YM(t,e){if((n=t.length)>0){for(var i,n,r,o=0,c=t[0].length;o<c;++o){for(r=i=0;i<n;++i)r+=t[i][o][1]||0;if(r)for(i=0;i<n;++i)t[i][o][1]/=r}zM(t,e)}}function IM(t,e){if((l=t.length)>0)for(var i,n,r,o,c,l,h=0,f=t[e[0]].length;h<f;++h)for(o=c=0,i=0;i<l;++i)(r=(n=t[e[i]][h])[1]-n[0])>0?(n[0]=o,n[1]=o+=r):r<0?(n[1]=c,n[0]=c+=r):(n[0]=0,n[1]=r)}function GM(t,e){if((n=t.length)>0){for(var n,r=0,o=t[e[0]],c=o.length;r<c;++r){for(var i=0,l=0;i<n;++i)l+=t[i][r][1]||0;o[r][1]+=o[r][0]=-l/2}zM(t,e)}}function UM(t,e){if((o=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,o,c=0,l=1;l<r;++l){for(var i=0,h=0,f=0;i<o;++i){for(var d=t[e[i]],_=d[l][1]||0,y=(_-(d[l-1][1]||0))/2,m=0;m<i;++m){var v=t[e[m]];y+=(v[l][1]||0)-(v[l-1][1]||0)}h+=_,f+=y*_}n[l-1][1]+=n[l-1][0]=c,h&&(c-=f/h)}n[l-1][1]+=n[l-1][0]=c,zM(t,e)}}function qM(t){var e=t.map(VM);return BM(t).sort((function(a,b){return e[a]-e[b]}))}function VM(t){for(var e,i=-1,n=0,r=t.length,o=-1/0;++i<r;)(e=+t[i][1])>o&&(o=e,n=i);return n}function XM(t){var e=t.map(jM);return BM(t).sort((function(a,b){return e[a]-e[b]}))}function jM(t){for(var e,s=0,i=-1,n=t.length;++i<n;)(e=+t[i][1])&&(s+=e);return s}function WM(t){return XM(t).reverse()}function ZM(t){var i,e,n=t.length,r=t.map(jM),o=qM(t),c=0,l=0,h=[],f=[];for(i=0;i<n;++i)e=o[i],c<l?(c+=r[e],h.push(e)):(l+=r[e],f.push(e));return f.reverse().concat(h)}function KM(t){return BM(t).reverse()}mM.prototype={areaStart:qA,areaEnd:qA,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},MM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:AM(this,this._t0,wM(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,AM(this,wM(this,n=xM(this,t,e)),n);break;default:AM(this,this._t0,n=xM(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(CM.prototype=Object.create(MM.prototype)).point=function(t,e){MM.prototype.point.call(this,e,t)},SM.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,o,c){this._context.bezierCurveTo(e,t,r,n,c,o)}},EM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=RM(t),o=RM(e),c=0,l=1;l<n;++c,++l)this._context.bezierCurveTo(r[0][c],o[0][c],r[1][c],o[1][c],t[l],e[l]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},LM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var JM="%Y-%m-%dT%H:%M:%S.%LZ";var QM=Date.prototype.toISOString?function(t){return t.toISOString()}:gb(JM),tC=QM;var eC=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:pb(JM),nC=eC;function iC(t,e,time){var n=new Ki,r=e;return null==e?(n.restart(t,e,time),n):(n._restart=n.restart,n.restart=function(t,e,time){e=+e,time=null==time?Wi():+time,n._restart((function o(c){c+=r,n._restart(o,r+=e,time),t(c)}),e,time)},n.restart(t,e,time),n)}var rC=t=>()=>t;function sC(t,{sourceEvent:e,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function aC(t,e,n){this.k=t,this.x=e,this.y=n}aC.prototype={constructor:aC,scale:function(t){return 1===t?this:new aC(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new aC(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var oC=new aC(1,0,0);function uC(t){for(;!t.__zoom;)if(!(t=t.parentNode))return oC;return t.__zoom}function cC(t){t.stopImmediatePropagation()}function lC(t){t.preventDefault(),t.stopImmediatePropagation()}function hC(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function fC(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function dC(){return this.__zoom||oC}function _C(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function gC(){return navigator.maxTouchPoints||"ontouchstart"in this}function pC(t,e,n){var r=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],c=t.invertY(e[0][1])-n[0][1],l=t.invertY(e[1][1])-n[1][1];return t.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),l>c?(c+l)/2:Math.min(0,c)||Math.max(0,l))}function yC(){var t,e,n,filter=hC,r=fC,o=pC,c=_C,l=gC,h=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],d=250,_=ep,y=ge("start","zoom","end"),m=500,v=0,x=10;function w(t){t.property("__zoom",dC).on("wheel.zoom",E).on("mousedown.zoom",R).on("dblclick.zoom",D).filter(l).on("touchstart.zoom",L).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function A(t,e){return(e=Math.max(h[0],Math.min(h[1],e)))===t.k?t:new aC(e,t.x,t.y)}function M(t,e,n){var r=e[0]-n[0]*t.k,o=e[1]-n[1]*t.k;return r===t.x&&o===t.y?t:new aC(t.k,r,o)}function C(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function S(t,e,n,o){t.on("start.zoom",(function(){k(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){k(this,arguments).event(o).end()})).tween("zoom",(function(){var t=this,c=arguments,g=k(t,c).event(o),l=r.apply(t,c),p=null==n?C(l):"function"==typeof n?n.apply(t,c):n,h=Math.max(l[1][0]-l[0][0],l[1][1]-l[0][1]),a=t.__zoom,b="function"==typeof e?e.apply(t,c):e,i=_(a.invert(p).concat(h/a.k),b.invert(p).concat(h/b.k));return function(t){if(1===t)t=b;else{var e=i(t),n=h/e[2];t=new aC(n,p[0]-e[0]*n,p[1]-e[1]*n)}g.zoom(null,t)}}))}function k(t,e,n){return!n&&t.__zooming||new T(t,e)}function T(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=r.apply(t,e),this.taps=0}function E(t,...e){if(filter.apply(this,arguments)){var g=k(this,e).event(t),n=this.__zoom,r=Math.max(h[0],Math.min(h[1],n.k*Math.pow(2,c.apply(this,arguments)))),p=Fi(t);if(g.wheel)g.mouse[0][0]===p[0]&&g.mouse[0][1]===p[1]||(g.mouse[1]=n.invert(g.mouse[0]=p)),clearTimeout(g.wheel);else{if(n.k===r)return;g.mouse=[p,n.invert(p)],fr(this),g.start()}lC(t),g.wheel=setTimeout(l,150),g.zoom("mouse",o(M(A(n,r),g.mouse[0],g.mouse[1]),g.extent,f))}function l(){g.wheel=null,g.end()}}function R(t,...e){if(!n&&filter.apply(this,arguments)){var g=k(this,e,!0).event(t),r=Dn(t.view).on("mousemove.zoom",d,!0).on("mouseup.zoom",_,!0),p=Fi(t,c),c=t.currentTarget,l=t.clientX,h=t.clientY;Pn(t.view),cC(t),g.mouse=[p,this.__zoom.invert(p)],fr(this),g.start()}function d(t){if(lC(t),!g.moved){var e=t.clientX-l,n=t.clientY-h;g.moved=e*e+n*n>v}g.event(t).zoom("mouse",o(M(g.that.__zoom,g.mouse[0]=Fi(t,c),g.mouse[1]),g.extent,f))}function _(t){r.on("mousemove.zoom mouseup.zoom",null),On(t.view,g.moved),lC(t),g.event(t).end()}}function D(t,...e){if(filter.apply(this,arguments)){var n=this.__zoom,c=Fi(t.changedTouches?t.changedTouches[0]:t,this),l=n.invert(c),h=n.k*(t.shiftKey?.5:2),_=o(M(A(n,h),c,l),r.apply(this,e),f);lC(t),d>0?Dn(this).transition().duration(d).call(S,_,c,t):Dn(this).call(w.transform,_,c,t)}}function L(n,...r){if(filter.apply(this,arguments)){var o,i,c,p,l=n.touches,h=l.length,g=k(this,r,n.changedTouches.length===h).event(n);for(cC(n),i=0;i<h;++i)p=[p=Fi(c=l[i],this),this.__zoom.invert(p),c.identifier],g.touch0?g.touch1||g.touch0[2]===p[2]||(g.touch1=p,g.taps=0):(g.touch0=p,o=!0,g.taps=1+!!t);t&&(t=clearTimeout(t)),o&&(g.taps<2&&(e=p[0],t=setTimeout((function(){t=null}),m)),fr(this),g.start())}}function N(t,...e){if(this.__zooming){var i,n,p,r,g=k(this,e).event(t),c=t.changedTouches,l=c.length;for(lC(t),i=0;i<l;++i)p=Fi(n=c[i],this),g.touch0&&g.touch0[2]===n.identifier?g.touch0[0]=p:g.touch1&&g.touch1[2]===n.identifier&&(g.touch1[0]=p);if(n=g.that.__zoom,g.touch1){var h=g.touch0[0],d=g.touch0[1],_=g.touch1[0],y=g.touch1[1],m=(m=_[0]-h[0])*m+(m=_[1]-h[1])*m,dl=(dl=y[0]-d[0])*dl+(dl=y[1]-d[1])*dl;n=A(n,Math.sqrt(m/dl)),p=[(h[0]+_[0])/2,(h[1]+_[1])/2],r=[(d[0]+y[0])/2,(d[1]+y[1])/2]}else{if(!g.touch0)return;p=g.touch0[0],r=g.touch0[1]}g.zoom("touch",o(M(n,p,r),g.extent,f))}}function P(t,...r){if(this.__zooming){var i,o,g=k(this,r).event(t),c=t.changedTouches,l=c.length;for(cC(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),m),i=0;i<l;++i)o=c[i],g.touch0&&g.touch0[2]===o.identifier?delete g.touch0:g.touch1&&g.touch1[2]===o.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),2===g.taps&&(o=Fi(o,this),Math.hypot(e[0]-o[0],e[1]-o[1])<x)){var p=Dn(this).on("dblclick.zoom");p&&p.apply(this,arguments)}}}return w.transform=function(t,e,n,r){var o=t.selection?t.selection():t;o.property("__zoom",dC),t!==o?S(t,e,n,r):o.interrupt().each((function(){k(this,arguments).event(r).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},w.scaleBy=function(t,e,p,n){w.scaleTo(t,(function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n}),p,n)},w.scaleTo=function(t,e,p,n){w.transform(t,(function(){var t=r.apply(this,arguments),n=this.__zoom,c=null==p?C(t):"function"==typeof p?p.apply(this,arguments):p,l=n.invert(c),h="function"==typeof e?e.apply(this,arguments):e;return o(M(A(n,h),c,l),t,f)}),p,n)},w.translateBy=function(t,e,n,c){w.transform(t,(function(){return o(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),f)}),null,c)},w.translateTo=function(t,e,n,p,c){w.transform(t,(function(){var t=r.apply(this,arguments),c=this.__zoom,l=null==p?C(t):"function"==typeof p?p.apply(this,arguments):p;return o(oC.translate(l[0],l[1]).scale(c.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,f)}),p,c)},T.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=Dn(this.that).datum();y.call(t,this.that,new sC(t,{sourceEvent:this.sourceEvent,target:w,type:t,transform:this.that.__zoom,dispatch:y}),e)}},w.wheelDelta=function(t){return arguments.length?(c="function"==typeof t?t:rC(+t),w):c},w.filter=function(t){return arguments.length?(filter="function"==typeof t?t:rC(!!t),w):filter},w.touchable=function(t){return arguments.length?(l="function"==typeof t?t:rC(!!t),w):l},w.extent=function(t){return arguments.length?(r="function"==typeof t?t:rC([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),w):r},w.scaleExtent=function(t){return arguments.length?(h[0]=+t[0],h[1]=+t[1],w):[h[0],h[1]]},w.translateExtent=function(t){return arguments.length?(f[0][0]=+t[0][0],f[1][0]=+t[1][0],f[0][1]=+t[0][1],f[1][1]=+t[1][1],w):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},w.constrain=function(t){return arguments.length?(o=t,w):o},w.duration=function(t){return arguments.length?(d=+t,w):d},w.interpolate=function(t){return arguments.length?(_=t,w):_},w.on=function(){var t=y.on.apply(y,arguments);return t===y?w:t},w.clickDistance=function(t){return arguments.length?(v=(t=+t)*t,w):Math.sqrt(v)},w.tapDistance=function(t){return arguments.length?(x=+t,w):x},w}uC.prototype=aC.prototype}}]);